function uw(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var cS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cw={exports:{}},Id={},hw={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ju=Symbol.for("react.element"),hS=Symbol.for("react.portal"),dS=Symbol.for("react.fragment"),fS=Symbol.for("react.strict_mode"),pS=Symbol.for("react.profiler"),mS=Symbol.for("react.provider"),gS=Symbol.for("react.context"),_S=Symbol.for("react.forward_ref"),vS=Symbol.for("react.suspense"),yS=Symbol.for("react.memo"),wS=Symbol.for("react.lazy"),sv=Symbol.iterator;function ES(t){return t===null||typeof t!="object"?null:(t=sv&&t[sv]||t["@@iterator"],typeof t=="function"?t:null)}var dw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fw=Object.assign,pw={};function Qa(t,e,n){this.props=t,this.context=e,this.refs=pw,this.updater=n||dw}Qa.prototype.isReactComponent={};Qa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function mw(){}mw.prototype=Qa.prototype;function km(t,e,n){this.props=t,this.context=e,this.refs=pw,this.updater=n||dw}var Lm=km.prototype=new mw;Lm.constructor=km;fw(Lm,Qa.prototype);Lm.isPureReactComponent=!0;var ov=Array.isArray,gw=Object.prototype.hasOwnProperty,bm={current:null},_w={key:!0,ref:!0,__self:!0,__source:!0};function vw(t,e,n){var r,i={},o=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)gw.call(e,r)&&!_w.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var d=Array(c),p=0;p<c;p++)d[p]=arguments[p+2];i.children=d}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:Ju,type:t,key:o,ref:l,props:i,_owner:bm.current}}function TS(t,e){return{$$typeof:Ju,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Nm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ju}function IS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var av=/\/+/g;function pf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?IS(""+t.key):e.toString(36)}function uh(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Ju:case hS:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+pf(l,0):r,ov(i)?(n="",t!=null&&(n=t.replace(av,"$&/")+"/"),uh(i,e,n,"",function(p){return p})):i!=null&&(Nm(i)&&(i=TS(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(av,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",ov(t))for(var c=0;c<t.length;c++){o=t[c];var d=r+pf(o,c);l+=uh(o,e,n,d,i)}else if(d=ES(t),typeof d=="function")for(t=d.call(t),c=0;!(o=t.next()).done;)o=o.value,d=r+pf(o,c++),l+=uh(o,e,n,d,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Fc(t,e,n){if(t==null)return t;var r=[],i=0;return uh(t,r,"","",function(o){return e.call(n,o,i++)}),r}function SS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var On={current:null},ch={transition:null},PS={ReactCurrentDispatcher:On,ReactCurrentBatchConfig:ch,ReactCurrentOwner:bm};function yw(){throw Error("act(...) is not supported in production builds of React.")}Ge.Children={map:Fc,forEach:function(t,e,n){Fc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Fc(t,function(){e++}),e},toArray:function(t){return Fc(t,function(e){return e})||[]},only:function(t){if(!Nm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ge.Component=Qa;Ge.Fragment=dS;Ge.Profiler=pS;Ge.PureComponent=km;Ge.StrictMode=fS;Ge.Suspense=vS;Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PS;Ge.act=yw;Ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=fw({},t.props),i=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=bm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(d in e)gw.call(e,d)&&!_w.hasOwnProperty(d)&&(r[d]=e[d]===void 0&&c!==void 0?c[d]:e[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){c=Array(d);for(var p=0;p<d;p++)c[p]=arguments[p+2];r.children=c}return{$$typeof:Ju,type:t.type,key:i,ref:o,props:r,_owner:l}};Ge.createContext=function(t){return t={$$typeof:gS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:mS,_context:t},t.Consumer=t};Ge.createElement=vw;Ge.createFactory=function(t){var e=vw.bind(null,t);return e.type=t,e};Ge.createRef=function(){return{current:null}};Ge.forwardRef=function(t){return{$$typeof:_S,render:t}};Ge.isValidElement=Nm;Ge.lazy=function(t){return{$$typeof:wS,_payload:{_status:-1,_result:t},_init:SS}};Ge.memo=function(t,e){return{$$typeof:yS,type:t,compare:e===void 0?null:e}};Ge.startTransition=function(t){var e=ch.transition;ch.transition={};try{t()}finally{ch.transition=e}};Ge.unstable_act=yw;Ge.useCallback=function(t,e){return On.current.useCallback(t,e)};Ge.useContext=function(t){return On.current.useContext(t)};Ge.useDebugValue=function(){};Ge.useDeferredValue=function(t){return On.current.useDeferredValue(t)};Ge.useEffect=function(t,e){return On.current.useEffect(t,e)};Ge.useId=function(){return On.current.useId()};Ge.useImperativeHandle=function(t,e,n){return On.current.useImperativeHandle(t,e,n)};Ge.useInsertionEffect=function(t,e){return On.current.useInsertionEffect(t,e)};Ge.useLayoutEffect=function(t,e){return On.current.useLayoutEffect(t,e)};Ge.useMemo=function(t,e){return On.current.useMemo(t,e)};Ge.useReducer=function(t,e,n){return On.current.useReducer(t,e,n)};Ge.useRef=function(t){return On.current.useRef(t)};Ge.useState=function(t){return On.current.useState(t)};Ge.useSyncExternalStore=function(t,e,n){return On.current.useSyncExternalStore(t,e,n)};Ge.useTransition=function(){return On.current.useTransition()};Ge.version="18.3.1";hw.exports=Ge;var Q=hw.exports;const Tn=Rm(Q),AS=uw({__proto__:null,default:Tn},[Q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xS=Q,CS=Symbol.for("react.element"),RS=Symbol.for("react.fragment"),kS=Object.prototype.hasOwnProperty,LS=xS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bS={key:!0,ref:!0,__self:!0,__source:!0};function ww(t,e,n){var r,i={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)kS.call(e,r)&&!bS.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:CS,type:t,key:o,ref:l,props:i,_owner:LS.current}}Id.Fragment=RS;Id.jsx=ww;Id.jsxs=ww;cw.exports=Id;var M=cw.exports,ip={},Ew={exports:{}},or={},Tw={exports:{}},Iw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Y,we){var re=Y.length;Y.push(we);e:for(;0<re;){var Ee=re-1>>>1,Re=Y[Ee];if(0<i(Re,we))Y[Ee]=we,Y[re]=Re,re=Ee;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var we=Y[0],re=Y.pop();if(re!==we){Y[0]=re;e:for(var Ee=0,Re=Y.length,Ve=Re>>>1;Ee<Ve;){var ze=2*(Ee+1)-1,be=Y[ze],Se=ze+1,pt=Y[Se];if(0>i(be,re))Se<Re&&0>i(pt,be)?(Y[Ee]=pt,Y[Se]=re,Ee=Se):(Y[Ee]=be,Y[ze]=re,Ee=ze);else if(Se<Re&&0>i(pt,re))Y[Ee]=pt,Y[Se]=re,Ee=Se;else break e}}return we}function i(Y,we){var re=Y.sortIndex-we.sortIndex;return re!==0?re:Y.id-we.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],p=[],g=1,y=null,E=3,k=!1,F=!1,V=!1,B=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(Y){for(var we=n(p);we!==null;){if(we.callback===null)r(p);else if(we.startTime<=Y)r(p),we.sortIndex=we.expirationTime,e(d,we);else break;we=n(p)}}function Z(Y){if(V=!1,b(Y),!F)if(n(d)!==null)F=!0,We(J);else{var we=n(p);we!==null&&Ae(Z,we.startTime-Y)}}function J(Y,we){F=!1,V&&(V=!1,C(T),T=-1),k=!0;var re=E;try{for(b(we),y=n(d);y!==null&&(!(y.expirationTime>we)||Y&&!D());){var Ee=y.callback;if(typeof Ee=="function"){y.callback=null,E=y.priorityLevel;var Re=Ee(y.expirationTime<=we);we=t.unstable_now(),typeof Re=="function"?y.callback=Re:y===n(d)&&r(d),b(we)}else r(d);y=n(d)}if(y!==null)var Ve=!0;else{var ze=n(p);ze!==null&&Ae(Z,ze.startTime-we),Ve=!1}return Ve}finally{y=null,E=re,k=!1}}var z=!1,P=null,T=-1,A=5,R=-1;function D(){return!(t.unstable_now()-R<A)}function N(){if(P!==null){var Y=t.unstable_now();R=Y;var we=!0;try{we=P(!0,Y)}finally{we?x():(z=!1,P=null)}}else z=!1}var x;if(typeof S=="function")x=function(){S(N)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,Je=Ie.port2;Ie.port1.onmessage=N,x=function(){Je.postMessage(null)}}else x=function(){B(N,0)};function We(Y){P=Y,z||(z=!0,x())}function Ae(Y,we){T=B(function(){Y(t.unstable_now())},we)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){F||k||(F=!0,We(J))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(Y){switch(E){case 1:case 2:case 3:var we=3;break;default:we=E}var re=E;E=we;try{return Y()}finally{E=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,we){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var re=E;E=Y;try{return we()}finally{E=re}},t.unstable_scheduleCallback=function(Y,we,re){var Ee=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Ee+re:Ee):re=Ee,Y){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=re+Re,Y={id:g++,callback:we,priorityLevel:Y,startTime:re,expirationTime:Re,sortIndex:-1},re>Ee?(Y.sortIndex=re,e(p,Y),n(d)===null&&Y===n(p)&&(V?(C(T),T=-1):V=!0,Ae(Z,re-Ee))):(Y.sortIndex=Re,e(d,Y),F||k||(F=!0,We(J))),Y},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(Y){var we=E;return function(){var re=E;E=we;try{return Y.apply(this,arguments)}finally{E=re}}}})(Iw);Tw.exports=Iw;var NS=Tw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DS=Q,sr=NS;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sw=new Set,Eu={};function Lo(t,e){Da(t,e),Da(t+"Capture",e)}function Da(t,e){for(Eu[t]=e,t=0;t<e.length;t++)Sw.add(e[t])}var Bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sp=Object.prototype.hasOwnProperty,MS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lv={},uv={};function OS(t){return sp.call(uv,t)?!0:sp.call(lv,t)?!1:MS.test(t)?uv[t]=!0:(lv[t]=!0,!1)}function VS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function FS(t,e,n,r){if(e===null||typeof e>"u"||VS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vn(t,e,n,r,i,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var gn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){gn[t]=new Vn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];gn[e]=new Vn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){gn[t]=new Vn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){gn[t]=new Vn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){gn[t]=new Vn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){gn[t]=new Vn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){gn[t]=new Vn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){gn[t]=new Vn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){gn[t]=new Vn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Dm=/[\-:]([a-z])/g;function Mm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Dm,Mm);gn[e]=new Vn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Dm,Mm);gn[e]=new Vn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Dm,Mm);gn[e]=new Vn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){gn[t]=new Vn(t,1,!1,t.toLowerCase(),null,!1,!1)});gn.xlinkHref=new Vn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){gn[t]=new Vn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Om(t,e,n,r){var i=gn.hasOwnProperty(e)?gn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(FS(e,n,i,r)&&(n=null),r||i===null?OS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qi=DS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Uc=Symbol.for("react.element"),aa=Symbol.for("react.portal"),la=Symbol.for("react.fragment"),Vm=Symbol.for("react.strict_mode"),op=Symbol.for("react.profiler"),Pw=Symbol.for("react.provider"),Aw=Symbol.for("react.context"),Fm=Symbol.for("react.forward_ref"),ap=Symbol.for("react.suspense"),lp=Symbol.for("react.suspense_list"),Um=Symbol.for("react.memo"),ms=Symbol.for("react.lazy"),xw=Symbol.for("react.offscreen"),cv=Symbol.iterator;function Ll(t){return t===null||typeof t!="object"?null:(t=cv&&t[cv]||t["@@iterator"],typeof t=="function"?t:null)}var kt=Object.assign,mf;function Wl(t){if(mf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);mf=e&&e[1]||""}return`
`+mf+t}var gf=!1;function _f(t,e){if(!t||gf)return"";gf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var r=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){r=p}t.call(e.prototype)}else{try{throw Error()}catch(p){r=p}t()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var i=p.stack.split(`
`),o=r.stack.split(`
`),l=i.length-1,c=o.length-1;1<=l&&0<=c&&i[l]!==o[c];)c--;for(;1<=l&&0<=c;l--,c--)if(i[l]!==o[c]){if(l!==1||c!==1)do if(l--,c--,0>c||i[l]!==o[c]){var d=`
`+i[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=c);break}}}finally{gf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Wl(t):""}function US(t){switch(t.tag){case 5:return Wl(t.type);case 16:return Wl("Lazy");case 13:return Wl("Suspense");case 19:return Wl("SuspenseList");case 0:case 2:case 15:return t=_f(t.type,!1),t;case 11:return t=_f(t.type.render,!1),t;case 1:return t=_f(t.type,!0),t;default:return""}}function up(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case la:return"Fragment";case aa:return"Portal";case op:return"Profiler";case Vm:return"StrictMode";case ap:return"Suspense";case lp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Aw:return(t.displayName||"Context")+".Consumer";case Pw:return(t._context.displayName||"Context")+".Provider";case Fm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Um:return e=t.displayName||null,e!==null?e:up(t.type)||"Memo";case ms:e=t._payload,t=t._init;try{return up(t(e))}catch{}}return null}function zS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return up(e);case 8:return e===Vm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Cw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function BS(t){var e=Cw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zc(t){t._valueTracker||(t._valueTracker=BS(t))}function Rw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Cw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function bh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function cp(t,e){var n=e.checked;return kt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function hv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kw(t,e){e=e.checked,e!=null&&Om(t,"checked",e,!1)}function hp(t,e){kw(t,e);var n=Fs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?dp(t,e.type,n):e.hasOwnProperty("defaultValue")&&dp(t,e.type,Fs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function dv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function dp(t,e,n){(e!=="number"||bh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Zl=Array.isArray;function Sa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function fp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return kt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function fv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(Zl(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fs(n)}}function Lw(t,e){var n=Fs(e.value),r=Fs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function pv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bc,Nw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bc=Bc||document.createElement("div"),Bc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Tu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var iu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jS=["Webkit","ms","Moz","O"];Object.keys(iu).forEach(function(t){jS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),iu[e]=iu[t]})});function Dw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||iu.hasOwnProperty(t)&&iu[t]?(""+e).trim():e+"px"}function Mw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Dw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var qS=kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mp(t,e){if(e){if(qS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function gp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _p=null;function zm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vp=null,Pa=null,Aa=null;function mv(t){if(t=nc(t)){if(typeof vp!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=Cd(e),vp(t.stateNode,t.type,e))}}function Ow(t){Pa?Aa?Aa.push(t):Aa=[t]:Pa=t}function Vw(){if(Pa){var t=Pa,e=Aa;if(Aa=Pa=null,mv(t),e)for(t=0;t<e.length;t++)mv(e[t])}}function Fw(t,e){return t(e)}function Uw(){}var vf=!1;function zw(t,e,n){if(vf)return t(e,n);vf=!0;try{return Fw(t,e,n)}finally{vf=!1,(Pa!==null||Aa!==null)&&(Uw(),Vw())}}function Iu(t,e){var n=t.stateNode;if(n===null)return null;var r=Cd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var yp=!1;if(Bi)try{var bl={};Object.defineProperty(bl,"passive",{get:function(){yp=!0}}),window.addEventListener("test",bl,bl),window.removeEventListener("test",bl,bl)}catch{yp=!1}function HS(t,e,n,r,i,o,l,c,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(g){this.onError(g)}}var su=!1,Nh=null,Dh=!1,wp=null,$S={onError:function(t){su=!0,Nh=t}};function WS(t,e,n,r,i,o,l,c,d){su=!1,Nh=null,HS.apply($S,arguments)}function ZS(t,e,n,r,i,o,l,c,d){if(WS.apply(this,arguments),su){if(su){var p=Nh;su=!1,Nh=null}else throw Error(oe(198));Dh||(Dh=!0,wp=p)}}function bo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Bw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gv(t){if(bo(t)!==t)throw Error(oe(188))}function KS(t){var e=t.alternate;if(!e){if(e=bo(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return gv(i),t;if(o===r)return gv(i),e;o=o.sibling}throw Error(oe(188))}if(n.return!==r.return)n=i,r=o;else{for(var l=!1,c=i.child;c;){if(c===n){l=!0,n=i,r=o;break}if(c===r){l=!0,r=i,n=o;break}c=c.sibling}if(!l){for(c=o.child;c;){if(c===n){l=!0,n=o,r=i;break}if(c===r){l=!0,r=o,n=i;break}c=c.sibling}if(!l)throw Error(oe(189))}}if(n.alternate!==r)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function jw(t){return t=KS(t),t!==null?qw(t):null}function qw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=qw(t);if(e!==null)return e;t=t.sibling}return null}var Hw=sr.unstable_scheduleCallback,_v=sr.unstable_cancelCallback,GS=sr.unstable_shouldYield,QS=sr.unstable_requestPaint,Ut=sr.unstable_now,YS=sr.unstable_getCurrentPriorityLevel,Bm=sr.unstable_ImmediatePriority,$w=sr.unstable_UserBlockingPriority,Mh=sr.unstable_NormalPriority,XS=sr.unstable_LowPriority,Ww=sr.unstable_IdlePriority,Sd=null,ai=null;function JS(t){if(ai&&typeof ai.onCommitFiberRoot=="function")try{ai.onCommitFiberRoot(Sd,t,void 0,(t.current.flags&128)===128)}catch{}}var jr=Math.clz32?Math.clz32:nP,eP=Math.log,tP=Math.LN2;function nP(t){return t>>>=0,t===0?32:31-(eP(t)/tP|0)|0}var jc=64,qc=4194304;function Kl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Oh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var c=l&~i;c!==0?r=Kl(c):(o&=l,o!==0&&(r=Kl(o)))}else l=n&~i,l!==0?r=Kl(l):o!==0&&(r=Kl(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-jr(e),i=1<<n,r|=t[n],e&=~i;return r}function rP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-jr(o),c=1<<l,d=i[l];d===-1?(!(c&n)||c&r)&&(i[l]=rP(c,e)):d<=e&&(t.expiredLanes|=c),o&=~c}}function Ep(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Zw(){var t=jc;return jc<<=1,!(jc&4194240)&&(jc=64),t}function yf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ec(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-jr(e),t[e]=n}function sP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-jr(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function jm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-jr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var lt=0;function Kw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Gw,qm,Qw,Yw,Xw,Tp=!1,Hc=[],xs=null,Cs=null,Rs=null,Su=new Map,Pu=new Map,_s=[],oP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vv(t,e){switch(t){case"focusin":case"focusout":xs=null;break;case"dragenter":case"dragleave":Cs=null;break;case"mouseover":case"mouseout":Rs=null;break;case"pointerover":case"pointerout":Su.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pu.delete(e.pointerId)}}function Nl(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=nc(e),e!==null&&qm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function aP(t,e,n,r,i){switch(e){case"focusin":return xs=Nl(xs,t,e,n,r,i),!0;case"dragenter":return Cs=Nl(Cs,t,e,n,r,i),!0;case"mouseover":return Rs=Nl(Rs,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Su.set(o,Nl(Su.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Pu.set(o,Nl(Pu.get(o)||null,t,e,n,r,i)),!0}return!1}function Jw(t){var e=uo(t.target);if(e!==null){var n=bo(e);if(n!==null){if(e=n.tag,e===13){if(e=Bw(n),e!==null){t.blockedOn=e,Xw(t.priority,function(){Qw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ip(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);_p=r,n.target.dispatchEvent(r),_p=null}else return e=nc(n),e!==null&&qm(e),t.blockedOn=n,!1;e.shift()}return!0}function yv(t,e,n){hh(t)&&n.delete(e)}function lP(){Tp=!1,xs!==null&&hh(xs)&&(xs=null),Cs!==null&&hh(Cs)&&(Cs=null),Rs!==null&&hh(Rs)&&(Rs=null),Su.forEach(yv),Pu.forEach(yv)}function Dl(t,e){t.blockedOn===e&&(t.blockedOn=null,Tp||(Tp=!0,sr.unstable_scheduleCallback(sr.unstable_NormalPriority,lP)))}function Au(t){function e(i){return Dl(i,t)}if(0<Hc.length){Dl(Hc[0],t);for(var n=1;n<Hc.length;n++){var r=Hc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xs!==null&&Dl(xs,t),Cs!==null&&Dl(Cs,t),Rs!==null&&Dl(Rs,t),Su.forEach(e),Pu.forEach(e),n=0;n<_s.length;n++)r=_s[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_s.length&&(n=_s[0],n.blockedOn===null);)Jw(n),n.blockedOn===null&&_s.shift()}var xa=Qi.ReactCurrentBatchConfig,Vh=!0;function uP(t,e,n,r){var i=lt,o=xa.transition;xa.transition=null;try{lt=1,Hm(t,e,n,r)}finally{lt=i,xa.transition=o}}function cP(t,e,n,r){var i=lt,o=xa.transition;xa.transition=null;try{lt=4,Hm(t,e,n,r)}finally{lt=i,xa.transition=o}}function Hm(t,e,n,r){if(Vh){var i=Ip(t,e,n,r);if(i===null)Rf(t,e,r,Fh,n),vv(t,r);else if(aP(i,t,e,n,r))r.stopPropagation();else if(vv(t,r),e&4&&-1<oP.indexOf(t)){for(;i!==null;){var o=nc(i);if(o!==null&&Gw(o),o=Ip(t,e,n,r),o===null&&Rf(t,e,r,Fh,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Rf(t,e,r,null,n)}}var Fh=null;function Ip(t,e,n,r){if(Fh=null,t=zm(r),t=uo(t),t!==null)if(e=bo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Bw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Fh=t,null}function eE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YS()){case Bm:return 1;case $w:return 4;case Mh:case XS:return 16;case Ww:return 536870912;default:return 16}default:return 16}}var Ss=null,$m=null,dh=null;function tE(){if(dh)return dh;var t,e=$m,n=e.length,r,i="value"in Ss?Ss.value:Ss.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===i[o-r];r++);return dh=i.slice(t,1<r?1-r:void 0)}function fh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $c(){return!0}function wv(){return!1}function ar(t){function e(n,r,i,o,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?$c:wv,this.isPropagationStopped=wv,this}return kt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$c)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$c)},persist:function(){},isPersistent:$c}),e}var Ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wm=ar(Ya),tc=kt({},Ya,{view:0,detail:0}),hP=ar(tc),wf,Ef,Ml,Pd=kt({},tc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ml&&(Ml&&t.type==="mousemove"?(wf=t.screenX-Ml.screenX,Ef=t.screenY-Ml.screenY):Ef=wf=0,Ml=t),wf)},movementY:function(t){return"movementY"in t?t.movementY:Ef}}),Ev=ar(Pd),dP=kt({},Pd,{dataTransfer:0}),fP=ar(dP),pP=kt({},tc,{relatedTarget:0}),Tf=ar(pP),mP=kt({},Ya,{animationName:0,elapsedTime:0,pseudoElement:0}),gP=ar(mP),_P=kt({},Ya,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vP=ar(_P),yP=kt({},Ya,{data:0}),Tv=ar(yP),wP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=TP[t])?!!e[t]:!1}function Zm(){return IP}var SP=kt({},tc,{key:function(t){if(t.key){var e=wP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?EP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zm,charCode:function(t){return t.type==="keypress"?fh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),PP=ar(SP),AP=kt({},Pd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Iv=ar(AP),xP=kt({},tc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zm}),CP=ar(xP),RP=kt({},Ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),kP=ar(RP),LP=kt({},Pd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bP=ar(LP),NP=[9,13,27,32],Km=Bi&&"CompositionEvent"in window,ou=null;Bi&&"documentMode"in document&&(ou=document.documentMode);var DP=Bi&&"TextEvent"in window&&!ou,nE=Bi&&(!Km||ou&&8<ou&&11>=ou),Sv=" ",Pv=!1;function rE(t,e){switch(t){case"keyup":return NP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ua=!1;function MP(t,e){switch(t){case"compositionend":return iE(e);case"keypress":return e.which!==32?null:(Pv=!0,Sv);case"textInput":return t=e.data,t===Sv&&Pv?null:t;default:return null}}function OP(t,e){if(ua)return t==="compositionend"||!Km&&rE(t,e)?(t=tE(),dh=$m=Ss=null,ua=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return nE&&e.locale!=="ko"?null:e.data;default:return null}}var VP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Av(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!VP[t.type]:e==="textarea"}function sE(t,e,n,r){Ow(r),e=Uh(e,"onChange"),0<e.length&&(n=new Wm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var au=null,xu=null;function FP(t){gE(t,0)}function Ad(t){var e=da(t);if(Rw(e))return t}function UP(t,e){if(t==="change")return e}var oE=!1;if(Bi){var If;if(Bi){var Sf="oninput"in document;if(!Sf){var xv=document.createElement("div");xv.setAttribute("oninput","return;"),Sf=typeof xv.oninput=="function"}If=Sf}else If=!1;oE=If&&(!document.documentMode||9<document.documentMode)}function Cv(){au&&(au.detachEvent("onpropertychange",aE),xu=au=null)}function aE(t){if(t.propertyName==="value"&&Ad(xu)){var e=[];sE(e,xu,t,zm(t)),zw(FP,e)}}function zP(t,e,n){t==="focusin"?(Cv(),au=e,xu=n,au.attachEvent("onpropertychange",aE)):t==="focusout"&&Cv()}function BP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ad(xu)}function jP(t,e){if(t==="click")return Ad(e)}function qP(t,e){if(t==="input"||t==="change")return Ad(e)}function HP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hr=typeof Object.is=="function"?Object.is:HP;function Cu(t,e){if(Hr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!sp.call(e,i)||!Hr(t[i],e[i]))return!1}return!0}function Rv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kv(t,e){var n=Rv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Rv(n)}}function lE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?lE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function uE(){for(var t=window,e=bh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=bh(t.document)}return e}function Gm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $P(t){var e=uE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&lE(n.ownerDocument.documentElement,n)){if(r!==null&&Gm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=kv(n,o);var l=kv(n,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var WP=Bi&&"documentMode"in document&&11>=document.documentMode,ca=null,Sp=null,lu=null,Pp=!1;function Lv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pp||ca==null||ca!==bh(r)||(r=ca,"selectionStart"in r&&Gm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),lu&&Cu(lu,r)||(lu=r,r=Uh(Sp,"onSelect"),0<r.length&&(e=new Wm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ca)))}function Wc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ha={animationend:Wc("Animation","AnimationEnd"),animationiteration:Wc("Animation","AnimationIteration"),animationstart:Wc("Animation","AnimationStart"),transitionend:Wc("Transition","TransitionEnd")},Pf={},cE={};Bi&&(cE=document.createElement("div").style,"AnimationEvent"in window||(delete ha.animationend.animation,delete ha.animationiteration.animation,delete ha.animationstart.animation),"TransitionEvent"in window||delete ha.transitionend.transition);function xd(t){if(Pf[t])return Pf[t];if(!ha[t])return t;var e=ha[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in cE)return Pf[t]=e[n];return t}var hE=xd("animationend"),dE=xd("animationiteration"),fE=xd("animationstart"),pE=xd("transitionend"),mE=new Map,bv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hs(t,e){mE.set(t,e),Lo(e,[t])}for(var Af=0;Af<bv.length;Af++){var xf=bv[Af],ZP=xf.toLowerCase(),KP=xf[0].toUpperCase()+xf.slice(1);Hs(ZP,"on"+KP)}Hs(hE,"onAnimationEnd");Hs(dE,"onAnimationIteration");Hs(fE,"onAnimationStart");Hs("dblclick","onDoubleClick");Hs("focusin","onFocus");Hs("focusout","onBlur");Hs(pE,"onTransitionEnd");Da("onMouseEnter",["mouseout","mouseover"]);Da("onMouseLeave",["mouseout","mouseover"]);Da("onPointerEnter",["pointerout","pointerover"]);Da("onPointerLeave",["pointerout","pointerover"]);Lo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Lo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Lo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Lo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Lo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Lo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gl));function Nv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ZS(r,e,void 0,t),t.currentTarget=null}function gE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var l=r.length-1;0<=l;l--){var c=r[l],d=c.instance,p=c.currentTarget;if(c=c.listener,d!==o&&i.isPropagationStopped())break e;Nv(i,c,p),o=d}else for(l=0;l<r.length;l++){if(c=r[l],d=c.instance,p=c.currentTarget,c=c.listener,d!==o&&i.isPropagationStopped())break e;Nv(i,c,p),o=d}}}if(Dh)throw t=wp,Dh=!1,wp=null,t}function vt(t,e){var n=e[kp];n===void 0&&(n=e[kp]=new Set);var r=t+"__bubble";n.has(r)||(_E(e,t,2,!1),n.add(r))}function Cf(t,e,n){var r=0;e&&(r|=4),_E(n,t,r,e)}var Zc="_reactListening"+Math.random().toString(36).slice(2);function Ru(t){if(!t[Zc]){t[Zc]=!0,Sw.forEach(function(n){n!=="selectionchange"&&(GP.has(n)||Cf(n,!1,t),Cf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zc]||(e[Zc]=!0,Cf("selectionchange",!1,e))}}function _E(t,e,n,r){switch(eE(e)){case 1:var i=uP;break;case 4:i=cP;break;default:i=Hm}n=i.bind(null,e,n,t),i=void 0,!yp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Rf(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;l=l.return}for(;c!==null;){if(l=uo(c),l===null)return;if(d=l.tag,d===5||d===6){r=o=l;continue e}c=c.parentNode}}r=r.return}zw(function(){var p=o,g=zm(n),y=[];e:{var E=mE.get(t);if(E!==void 0){var k=Wm,F=t;switch(t){case"keypress":if(fh(n)===0)break e;case"keydown":case"keyup":k=PP;break;case"focusin":F="focus",k=Tf;break;case"focusout":F="blur",k=Tf;break;case"beforeblur":case"afterblur":k=Tf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=Ev;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=fP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=CP;break;case hE:case dE:case fE:k=gP;break;case pE:k=kP;break;case"scroll":k=hP;break;case"wheel":k=bP;break;case"copy":case"cut":case"paste":k=vP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=Iv}var V=(e&4)!==0,B=!V&&t==="scroll",C=V?E!==null?E+"Capture":null:E;V=[];for(var S=p,b;S!==null;){b=S;var Z=b.stateNode;if(b.tag===5&&Z!==null&&(b=Z,C!==null&&(Z=Iu(S,C),Z!=null&&V.push(ku(S,Z,b)))),B)break;S=S.return}0<V.length&&(E=new k(E,F,null,n,g),y.push({event:E,listeners:V}))}}if(!(e&7)){e:{if(E=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",E&&n!==_p&&(F=n.relatedTarget||n.fromElement)&&(uo(F)||F[ji]))break e;if((k||E)&&(E=g.window===g?g:(E=g.ownerDocument)?E.defaultView||E.parentWindow:window,k?(F=n.relatedTarget||n.toElement,k=p,F=F?uo(F):null,F!==null&&(B=bo(F),F!==B||F.tag!==5&&F.tag!==6)&&(F=null)):(k=null,F=p),k!==F)){if(V=Ev,Z="onMouseLeave",C="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(V=Iv,Z="onPointerLeave",C="onPointerEnter",S="pointer"),B=k==null?E:da(k),b=F==null?E:da(F),E=new V(Z,S+"leave",k,n,g),E.target=B,E.relatedTarget=b,Z=null,uo(g)===p&&(V=new V(C,S+"enter",F,n,g),V.target=b,V.relatedTarget=B,Z=V),B=Z,k&&F)t:{for(V=k,C=F,S=0,b=V;b;b=na(b))S++;for(b=0,Z=C;Z;Z=na(Z))b++;for(;0<S-b;)V=na(V),S--;for(;0<b-S;)C=na(C),b--;for(;S--;){if(V===C||C!==null&&V===C.alternate)break t;V=na(V),C=na(C)}V=null}else V=null;k!==null&&Dv(y,E,k,V,!1),F!==null&&B!==null&&Dv(y,B,F,V,!0)}}e:{if(E=p?da(p):window,k=E.nodeName&&E.nodeName.toLowerCase(),k==="select"||k==="input"&&E.type==="file")var J=UP;else if(Av(E))if(oE)J=qP;else{J=BP;var z=zP}else(k=E.nodeName)&&k.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(J=jP);if(J&&(J=J(t,p))){sE(y,J,n,g);break e}z&&z(t,E,p),t==="focusout"&&(z=E._wrapperState)&&z.controlled&&E.type==="number"&&dp(E,"number",E.value)}switch(z=p?da(p):window,t){case"focusin":(Av(z)||z.contentEditable==="true")&&(ca=z,Sp=p,lu=null);break;case"focusout":lu=Sp=ca=null;break;case"mousedown":Pp=!0;break;case"contextmenu":case"mouseup":case"dragend":Pp=!1,Lv(y,n,g);break;case"selectionchange":if(WP)break;case"keydown":case"keyup":Lv(y,n,g)}var P;if(Km)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ua?rE(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(nE&&n.locale!=="ko"&&(ua||T!=="onCompositionStart"?T==="onCompositionEnd"&&ua&&(P=tE()):(Ss=g,$m="value"in Ss?Ss.value:Ss.textContent,ua=!0)),z=Uh(p,T),0<z.length&&(T=new Tv(T,t,null,n,g),y.push({event:T,listeners:z}),P?T.data=P:(P=iE(n),P!==null&&(T.data=P)))),(P=DP?MP(t,n):OP(t,n))&&(p=Uh(p,"onBeforeInput"),0<p.length&&(g=new Tv("onBeforeInput","beforeinput",null,n,g),y.push({event:g,listeners:p}),g.data=P))}gE(y,e)})}function ku(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Uh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Iu(t,n),o!=null&&r.unshift(ku(t,o,i)),o=Iu(t,e),o!=null&&r.push(ku(t,o,i))),t=t.return}return r}function na(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Dv(t,e,n,r,i){for(var o=e._reactName,l=[];n!==null&&n!==r;){var c=n,d=c.alternate,p=c.stateNode;if(d!==null&&d===r)break;c.tag===5&&p!==null&&(c=p,i?(d=Iu(n,o),d!=null&&l.unshift(ku(n,d,c))):i||(d=Iu(n,o),d!=null&&l.push(ku(n,d,c)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var QP=/\r\n?/g,YP=/\u0000|\uFFFD/g;function Mv(t){return(typeof t=="string"?t:""+t).replace(QP,`
`).replace(YP,"")}function Kc(t,e,n){if(e=Mv(e),Mv(t)!==e&&n)throw Error(oe(425))}function zh(){}var Ap=null,xp=null;function Cp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rp=typeof setTimeout=="function"?setTimeout:void 0,XP=typeof clearTimeout=="function"?clearTimeout:void 0,Ov=typeof Promise=="function"?Promise:void 0,JP=typeof queueMicrotask=="function"?queueMicrotask:typeof Ov<"u"?function(t){return Ov.resolve(null).then(t).catch(eA)}:Rp;function eA(t){setTimeout(function(){throw t})}function kf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Au(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Au(e)}function ks(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Vv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xa=Math.random().toString(36).slice(2),ii="__reactFiber$"+Xa,Lu="__reactProps$"+Xa,ji="__reactContainer$"+Xa,kp="__reactEvents$"+Xa,tA="__reactListeners$"+Xa,nA="__reactHandles$"+Xa;function uo(t){var e=t[ii];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ji]||n[ii]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Vv(t);t!==null;){if(n=t[ii])return n;t=Vv(t)}return e}t=n,n=t.parentNode}return null}function nc(t){return t=t[ii]||t[ji],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function da(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function Cd(t){return t[Lu]||null}var Lp=[],fa=-1;function $s(t){return{current:t}}function Et(t){0>fa||(t.current=Lp[fa],Lp[fa]=null,fa--)}function gt(t,e){fa++,Lp[fa]=t.current,t.current=e}var Us={},An=$s(Us),Wn=$s(!1),yo=Us;function Ma(t,e){var n=t.type.contextTypes;if(!n)return Us;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Zn(t){return t=t.childContextTypes,t!=null}function Bh(){Et(Wn),Et(An)}function Fv(t,e,n){if(An.current!==Us)throw Error(oe(168));gt(An,e),gt(Wn,n)}function vE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(oe(108,zS(t)||"Unknown",i));return kt({},n,r)}function jh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Us,yo=An.current,gt(An,t),gt(Wn,Wn.current),!0}function Uv(t,e,n){var r=t.stateNode;if(!r)throw Error(oe(169));n?(t=vE(t,e,yo),r.__reactInternalMemoizedMergedChildContext=t,Et(Wn),Et(An),gt(An,t)):Et(Wn),gt(Wn,n)}var Ci=null,Rd=!1,Lf=!1;function yE(t){Ci===null?Ci=[t]:Ci.push(t)}function rA(t){Rd=!0,yE(t)}function Ws(){if(!Lf&&Ci!==null){Lf=!0;var t=0,e=lt;try{var n=Ci;for(lt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ci=null,Rd=!1}catch(i){throw Ci!==null&&(Ci=Ci.slice(t+1)),Hw(Bm,Ws),i}finally{lt=e,Lf=!1}}return null}var pa=[],ma=0,qh=null,Hh=0,wr=[],Er=0,wo=null,Ri=1,ki="";function oo(t,e){pa[ma++]=Hh,pa[ma++]=qh,qh=t,Hh=e}function wE(t,e,n){wr[Er++]=Ri,wr[Er++]=ki,wr[Er++]=wo,wo=t;var r=Ri;t=ki;var i=32-jr(r)-1;r&=~(1<<i),n+=1;var o=32-jr(e)+i;if(30<o){var l=i-i%5;o=(r&(1<<l)-1).toString(32),r>>=l,i-=l,Ri=1<<32-jr(e)+i|n<<i|r,ki=o+t}else Ri=1<<o|n<<i|r,ki=t}function Qm(t){t.return!==null&&(oo(t,1),wE(t,1,0))}function Ym(t){for(;t===qh;)qh=pa[--ma],pa[ma]=null,Hh=pa[--ma],pa[ma]=null;for(;t===wo;)wo=wr[--Er],wr[Er]=null,ki=wr[--Er],wr[Er]=null,Ri=wr[--Er],wr[Er]=null}var rr=null,nr=null,St=!1,Ur=null;function EE(t,e){var n=Ir(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function zv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,rr=t,nr=ks(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,rr=t,nr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=wo!==null?{id:Ri,overflow:ki}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ir(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,rr=t,nr=null,!0):!1;default:return!1}}function bp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Np(t){if(St){var e=nr;if(e){var n=e;if(!zv(t,e)){if(bp(t))throw Error(oe(418));e=ks(n.nextSibling);var r=rr;e&&zv(t,e)?EE(r,n):(t.flags=t.flags&-4097|2,St=!1,rr=t)}}else{if(bp(t))throw Error(oe(418));t.flags=t.flags&-4097|2,St=!1,rr=t}}}function Bv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;rr=t}function Gc(t){if(t!==rr)return!1;if(!St)return Bv(t),St=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Cp(t.type,t.memoizedProps)),e&&(e=nr)){if(bp(t))throw TE(),Error(oe(418));for(;e;)EE(t,e),e=ks(e.nextSibling)}if(Bv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){nr=ks(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}nr=null}}else nr=rr?ks(t.stateNode.nextSibling):null;return!0}function TE(){for(var t=nr;t;)t=ks(t.nextSibling)}function Oa(){nr=rr=null,St=!1}function Xm(t){Ur===null?Ur=[t]:Ur.push(t)}var iA=Qi.ReactCurrentBatchConfig;function Ol(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var r=n.stateNode}if(!r)throw Error(oe(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var c=i.refs;l===null?delete c[o]:c[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function Qc(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jv(t){var e=t._init;return e(t._payload)}function IE(t){function e(C,S){if(t){var b=C.deletions;b===null?(C.deletions=[S],C.flags|=16):b.push(S)}}function n(C,S){if(!t)return null;for(;S!==null;)e(C,S),S=S.sibling;return null}function r(C,S){for(C=new Map;S!==null;)S.key!==null?C.set(S.key,S):C.set(S.index,S),S=S.sibling;return C}function i(C,S){return C=Ds(C,S),C.index=0,C.sibling=null,C}function o(C,S,b){return C.index=b,t?(b=C.alternate,b!==null?(b=b.index,b<S?(C.flags|=2,S):b):(C.flags|=2,S)):(C.flags|=1048576,S)}function l(C){return t&&C.alternate===null&&(C.flags|=2),C}function c(C,S,b,Z){return S===null||S.tag!==6?(S=Ff(b,C.mode,Z),S.return=C,S):(S=i(S,b),S.return=C,S)}function d(C,S,b,Z){var J=b.type;return J===la?g(C,S,b.props.children,Z,b.key):S!==null&&(S.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===ms&&jv(J)===S.type)?(Z=i(S,b.props),Z.ref=Ol(C,S,b),Z.return=C,Z):(Z=wh(b.type,b.key,b.props,null,C.mode,Z),Z.ref=Ol(C,S,b),Z.return=C,Z)}function p(C,S,b,Z){return S===null||S.tag!==4||S.stateNode.containerInfo!==b.containerInfo||S.stateNode.implementation!==b.implementation?(S=Uf(b,C.mode,Z),S.return=C,S):(S=i(S,b.children||[]),S.return=C,S)}function g(C,S,b,Z,J){return S===null||S.tag!==7?(S=_o(b,C.mode,Z,J),S.return=C,S):(S=i(S,b),S.return=C,S)}function y(C,S,b){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Ff(""+S,C.mode,b),S.return=C,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Uc:return b=wh(S.type,S.key,S.props,null,C.mode,b),b.ref=Ol(C,null,S),b.return=C,b;case aa:return S=Uf(S,C.mode,b),S.return=C,S;case ms:var Z=S._init;return y(C,Z(S._payload),b)}if(Zl(S)||Ll(S))return S=_o(S,C.mode,b,null),S.return=C,S;Qc(C,S)}return null}function E(C,S,b,Z){var J=S!==null?S.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return J!==null?null:c(C,S,""+b,Z);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Uc:return b.key===J?d(C,S,b,Z):null;case aa:return b.key===J?p(C,S,b,Z):null;case ms:return J=b._init,E(C,S,J(b._payload),Z)}if(Zl(b)||Ll(b))return J!==null?null:g(C,S,b,Z,null);Qc(C,b)}return null}function k(C,S,b,Z,J){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return C=C.get(b)||null,c(S,C,""+Z,J);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Uc:return C=C.get(Z.key===null?b:Z.key)||null,d(S,C,Z,J);case aa:return C=C.get(Z.key===null?b:Z.key)||null,p(S,C,Z,J);case ms:var z=Z._init;return k(C,S,b,z(Z._payload),J)}if(Zl(Z)||Ll(Z))return C=C.get(b)||null,g(S,C,Z,J,null);Qc(S,Z)}return null}function F(C,S,b,Z){for(var J=null,z=null,P=S,T=S=0,A=null;P!==null&&T<b.length;T++){P.index>T?(A=P,P=null):A=P.sibling;var R=E(C,P,b[T],Z);if(R===null){P===null&&(P=A);break}t&&P&&R.alternate===null&&e(C,P),S=o(R,S,T),z===null?J=R:z.sibling=R,z=R,P=A}if(T===b.length)return n(C,P),St&&oo(C,T),J;if(P===null){for(;T<b.length;T++)P=y(C,b[T],Z),P!==null&&(S=o(P,S,T),z===null?J=P:z.sibling=P,z=P);return St&&oo(C,T),J}for(P=r(C,P);T<b.length;T++)A=k(P,C,T,b[T],Z),A!==null&&(t&&A.alternate!==null&&P.delete(A.key===null?T:A.key),S=o(A,S,T),z===null?J=A:z.sibling=A,z=A);return t&&P.forEach(function(D){return e(C,D)}),St&&oo(C,T),J}function V(C,S,b,Z){var J=Ll(b);if(typeof J!="function")throw Error(oe(150));if(b=J.call(b),b==null)throw Error(oe(151));for(var z=J=null,P=S,T=S=0,A=null,R=b.next();P!==null&&!R.done;T++,R=b.next()){P.index>T?(A=P,P=null):A=P.sibling;var D=E(C,P,R.value,Z);if(D===null){P===null&&(P=A);break}t&&P&&D.alternate===null&&e(C,P),S=o(D,S,T),z===null?J=D:z.sibling=D,z=D,P=A}if(R.done)return n(C,P),St&&oo(C,T),J;if(P===null){for(;!R.done;T++,R=b.next())R=y(C,R.value,Z),R!==null&&(S=o(R,S,T),z===null?J=R:z.sibling=R,z=R);return St&&oo(C,T),J}for(P=r(C,P);!R.done;T++,R=b.next())R=k(P,C,T,R.value,Z),R!==null&&(t&&R.alternate!==null&&P.delete(R.key===null?T:R.key),S=o(R,S,T),z===null?J=R:z.sibling=R,z=R);return t&&P.forEach(function(N){return e(C,N)}),St&&oo(C,T),J}function B(C,S,b,Z){if(typeof b=="object"&&b!==null&&b.type===la&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Uc:e:{for(var J=b.key,z=S;z!==null;){if(z.key===J){if(J=b.type,J===la){if(z.tag===7){n(C,z.sibling),S=i(z,b.props.children),S.return=C,C=S;break e}}else if(z.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===ms&&jv(J)===z.type){n(C,z.sibling),S=i(z,b.props),S.ref=Ol(C,z,b),S.return=C,C=S;break e}n(C,z);break}else e(C,z);z=z.sibling}b.type===la?(S=_o(b.props.children,C.mode,Z,b.key),S.return=C,C=S):(Z=wh(b.type,b.key,b.props,null,C.mode,Z),Z.ref=Ol(C,S,b),Z.return=C,C=Z)}return l(C);case aa:e:{for(z=b.key;S!==null;){if(S.key===z)if(S.tag===4&&S.stateNode.containerInfo===b.containerInfo&&S.stateNode.implementation===b.implementation){n(C,S.sibling),S=i(S,b.children||[]),S.return=C,C=S;break e}else{n(C,S);break}else e(C,S);S=S.sibling}S=Uf(b,C.mode,Z),S.return=C,C=S}return l(C);case ms:return z=b._init,B(C,S,z(b._payload),Z)}if(Zl(b))return F(C,S,b,Z);if(Ll(b))return V(C,S,b,Z);Qc(C,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,S!==null&&S.tag===6?(n(C,S.sibling),S=i(S,b),S.return=C,C=S):(n(C,S),S=Ff(b,C.mode,Z),S.return=C,C=S),l(C)):n(C,S)}return B}var Va=IE(!0),SE=IE(!1),$h=$s(null),Wh=null,ga=null,Jm=null;function eg(){Jm=ga=Wh=null}function tg(t){var e=$h.current;Et($h),t._currentValue=e}function Dp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ca(t,e){Wh=t,Jm=ga=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Hn=!0),t.firstContext=null)}function Ar(t){var e=t._currentValue;if(Jm!==t)if(t={context:t,memoizedValue:e,next:null},ga===null){if(Wh===null)throw Error(oe(308));ga=t,Wh.dependencies={lanes:0,firstContext:t}}else ga=ga.next=t;return e}var co=null;function ng(t){co===null?co=[t]:co.push(t)}function PE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ng(e)):(n.next=i.next,i.next=n),e.interleaved=n,qi(t,r)}function qi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var gs=!1;function rg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function AE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ls(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,rt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,qi(t,n)}return i=r.interleaved,i===null?(e.next=e,ng(r)):(e.next=i.next,i.next=e),r.interleaved=e,qi(t,n)}function ph(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jm(t,n)}}function qv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Zh(t,e,n,r){var i=t.updateQueue;gs=!1;var o=i.firstBaseUpdate,l=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var d=c,p=d.next;d.next=null,l===null?o=p:l.next=p,l=d;var g=t.alternate;g!==null&&(g=g.updateQueue,c=g.lastBaseUpdate,c!==l&&(c===null?g.firstBaseUpdate=p:c.next=p,g.lastBaseUpdate=d))}if(o!==null){var y=i.baseState;l=0,g=p=d=null,c=o;do{var E=c.lane,k=c.eventTime;if((r&E)===E){g!==null&&(g=g.next={eventTime:k,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var F=t,V=c;switch(E=e,k=n,V.tag){case 1:if(F=V.payload,typeof F=="function"){y=F.call(k,y,E);break e}y=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=V.payload,E=typeof F=="function"?F.call(k,y,E):F,E==null)break e;y=kt({},y,E);break e;case 2:gs=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,E=i.effects,E===null?i.effects=[c]:E.push(c))}else k={eventTime:k,lane:E,tag:c.tag,payload:c.payload,callback:c.callback,next:null},g===null?(p=g=k,d=y):g=g.next=k,l|=E;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;E=c,c=E.next,E.next=null,i.lastBaseUpdate=E,i.shared.pending=null}}while(!0);if(g===null&&(d=y),i.baseState=d,i.firstBaseUpdate=p,i.lastBaseUpdate=g,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);To|=l,t.lanes=l,t.memoizedState=y}}function Hv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(oe(191,i));i.call(r)}}}var rc={},li=$s(rc),bu=$s(rc),Nu=$s(rc);function ho(t){if(t===rc)throw Error(oe(174));return t}function ig(t,e){switch(gt(Nu,e),gt(bu,t),gt(li,rc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=pp(e,t)}Et(li),gt(li,e)}function Fa(){Et(li),Et(bu),Et(Nu)}function xE(t){ho(Nu.current);var e=ho(li.current),n=pp(e,t.type);e!==n&&(gt(bu,t),gt(li,n))}function sg(t){bu.current===t&&(Et(li),Et(bu))}var Ct=$s(0);function Kh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var bf=[];function og(){for(var t=0;t<bf.length;t++)bf[t]._workInProgressVersionPrimary=null;bf.length=0}var mh=Qi.ReactCurrentDispatcher,Nf=Qi.ReactCurrentBatchConfig,Eo=0,Rt=null,Xt=null,sn=null,Gh=!1,uu=!1,Du=0,sA=0;function yn(){throw Error(oe(321))}function ag(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hr(t[n],e[n]))return!1;return!0}function lg(t,e,n,r,i,o){if(Eo=o,Rt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,mh.current=t===null||t.memoizedState===null?uA:cA,t=n(r,i),uu){o=0;do{if(uu=!1,Du=0,25<=o)throw Error(oe(301));o+=1,sn=Xt=null,e.updateQueue=null,mh.current=hA,t=n(r,i)}while(uu)}if(mh.current=Qh,e=Xt!==null&&Xt.next!==null,Eo=0,sn=Xt=Rt=null,Gh=!1,e)throw Error(oe(300));return t}function ug(){var t=Du!==0;return Du=0,t}function ni(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?Rt.memoizedState=sn=t:sn=sn.next=t,sn}function xr(){if(Xt===null){var t=Rt.alternate;t=t!==null?t.memoizedState:null}else t=Xt.next;var e=sn===null?Rt.memoizedState:sn.next;if(e!==null)sn=e,Xt=t;else{if(t===null)throw Error(oe(310));Xt=t,t={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},sn===null?Rt.memoizedState=sn=t:sn=sn.next=t}return sn}function Mu(t,e){return typeof e=="function"?e(t):e}function Df(t){var e=xr(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=Xt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var l=i.next;i.next=o.next,o.next=l}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var c=l=null,d=null,p=o;do{var g=p.lane;if((Eo&g)===g)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:t(r,p.action);else{var y={lane:g,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(c=d=y,l=r):d=d.next=y,Rt.lanes|=g,To|=g}p=p.next}while(p!==null&&p!==o);d===null?l=r:d.next=c,Hr(r,e.memoizedState)||(Hn=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=d,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Rt.lanes|=o,To|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Mf(t){var e=xr(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do o=t(o,l.action),l=l.next;while(l!==i);Hr(o,e.memoizedState)||(Hn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function CE(){}function RE(t,e){var n=Rt,r=xr(),i=e(),o=!Hr(r.memoizedState,i);if(o&&(r.memoizedState=i,Hn=!0),r=r.queue,cg(bE.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||sn!==null&&sn.memoizedState.tag&1){if(n.flags|=2048,Ou(9,LE.bind(null,n,r,i,e),void 0,null),on===null)throw Error(oe(349));Eo&30||kE(n,e,i)}return i}function kE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Rt.updateQueue,e===null?(e={lastEffect:null,stores:null},Rt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function LE(t,e,n,r){e.value=n,e.getSnapshot=r,NE(e)&&DE(t)}function bE(t,e,n){return n(function(){NE(e)&&DE(t)})}function NE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hr(t,n)}catch{return!0}}function DE(t){var e=qi(t,1);e!==null&&qr(e,t,1,-1)}function $v(t){var e=ni();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mu,lastRenderedState:t},e.queue=t,t=t.dispatch=lA.bind(null,Rt,t),[e.memoizedState,t]}function Ou(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Rt.updateQueue,e===null?(e={lastEffect:null,stores:null},Rt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ME(){return xr().memoizedState}function gh(t,e,n,r){var i=ni();Rt.flags|=t,i.memoizedState=Ou(1|e,n,void 0,r===void 0?null:r)}function kd(t,e,n,r){var i=xr();r=r===void 0?null:r;var o=void 0;if(Xt!==null){var l=Xt.memoizedState;if(o=l.destroy,r!==null&&ag(r,l.deps)){i.memoizedState=Ou(e,n,o,r);return}}Rt.flags|=t,i.memoizedState=Ou(1|e,n,o,r)}function Wv(t,e){return gh(8390656,8,t,e)}function cg(t,e){return kd(2048,8,t,e)}function OE(t,e){return kd(4,2,t,e)}function VE(t,e){return kd(4,4,t,e)}function FE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function UE(t,e,n){return n=n!=null?n.concat([t]):null,kd(4,4,FE.bind(null,e,t),n)}function hg(){}function zE(t,e){var n=xr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ag(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function BE(t,e){var n=xr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ag(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function jE(t,e,n){return Eo&21?(Hr(n,e)||(n=Zw(),Rt.lanes|=n,To|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Hn=!0),t.memoizedState=n)}function oA(t,e){var n=lt;lt=n!==0&&4>n?n:4,t(!0);var r=Nf.transition;Nf.transition={};try{t(!1),e()}finally{lt=n,Nf.transition=r}}function qE(){return xr().memoizedState}function aA(t,e,n){var r=Ns(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},HE(t))$E(e,n);else if(n=PE(t,e,n,r),n!==null){var i=Mn();qr(n,t,r,i),WE(n,e,r)}}function lA(t,e,n){var r=Ns(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(HE(t))$E(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,c=o(l,n);if(i.hasEagerState=!0,i.eagerState=c,Hr(c,l)){var d=e.interleaved;d===null?(i.next=i,ng(e)):(i.next=d.next,d.next=i),e.interleaved=i;return}}catch{}finally{}n=PE(t,e,i,r),n!==null&&(i=Mn(),qr(n,t,r,i),WE(n,e,r))}}function HE(t){var e=t.alternate;return t===Rt||e!==null&&e===Rt}function $E(t,e){uu=Gh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function WE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jm(t,n)}}var Qh={readContext:Ar,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useInsertionEffect:yn,useLayoutEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useMutableSource:yn,useSyncExternalStore:yn,useId:yn,unstable_isNewReconciler:!1},uA={readContext:Ar,useCallback:function(t,e){return ni().memoizedState=[t,e===void 0?null:e],t},useContext:Ar,useEffect:Wv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,gh(4194308,4,FE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return gh(4194308,4,t,e)},useInsertionEffect:function(t,e){return gh(4,2,t,e)},useMemo:function(t,e){var n=ni();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ni();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=aA.bind(null,Rt,t),[r.memoizedState,t]},useRef:function(t){var e=ni();return t={current:t},e.memoizedState=t},useState:$v,useDebugValue:hg,useDeferredValue:function(t){return ni().memoizedState=t},useTransition:function(){var t=$v(!1),e=t[0];return t=oA.bind(null,t[1]),ni().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Rt,i=ni();if(St){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),on===null)throw Error(oe(349));Eo&30||kE(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Wv(bE.bind(null,r,o,t),[t]),r.flags|=2048,Ou(9,LE.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=ni(),e=on.identifierPrefix;if(St){var n=ki,r=Ri;n=(r&~(1<<32-jr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Du++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=sA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},cA={readContext:Ar,useCallback:zE,useContext:Ar,useEffect:cg,useImperativeHandle:UE,useInsertionEffect:OE,useLayoutEffect:VE,useMemo:BE,useReducer:Df,useRef:ME,useState:function(){return Df(Mu)},useDebugValue:hg,useDeferredValue:function(t){var e=xr();return jE(e,Xt.memoizedState,t)},useTransition:function(){var t=Df(Mu)[0],e=xr().memoizedState;return[t,e]},useMutableSource:CE,useSyncExternalStore:RE,useId:qE,unstable_isNewReconciler:!1},hA={readContext:Ar,useCallback:zE,useContext:Ar,useEffect:cg,useImperativeHandle:UE,useInsertionEffect:OE,useLayoutEffect:VE,useMemo:BE,useReducer:Mf,useRef:ME,useState:function(){return Mf(Mu)},useDebugValue:hg,useDeferredValue:function(t){var e=xr();return Xt===null?e.memoizedState=t:jE(e,Xt.memoizedState,t)},useTransition:function(){var t=Mf(Mu)[0],e=xr().memoizedState;return[t,e]},useMutableSource:CE,useSyncExternalStore:RE,useId:qE,unstable_isNewReconciler:!1};function Or(t,e){if(t&&t.defaultProps){e=kt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Mp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:kt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ld={isMounted:function(t){return(t=t._reactInternals)?bo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Mn(),i=Ns(t),o=Mi(r,i);o.payload=e,n!=null&&(o.callback=n),e=Ls(t,o,i),e!==null&&(qr(e,t,i,r),ph(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Mn(),i=Ns(t),o=Mi(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Ls(t,o,i),e!==null&&(qr(e,t,i,r),ph(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Mn(),r=Ns(t),i=Mi(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ls(t,i,r),e!==null&&(qr(e,t,r,n),ph(e,t,r))}};function Zv(t,e,n,r,i,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,l):e.prototype&&e.prototype.isPureReactComponent?!Cu(n,r)||!Cu(i,o):!0}function ZE(t,e,n){var r=!1,i=Us,o=e.contextType;return typeof o=="object"&&o!==null?o=Ar(o):(i=Zn(e)?yo:An.current,r=e.contextTypes,o=(r=r!=null)?Ma(t,i):Us),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ld,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Kv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ld.enqueueReplaceState(e,e.state,null)}function Op(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},rg(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Ar(o):(o=Zn(e)?yo:An.current,i.context=Ma(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Mp(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ld.enqueueReplaceState(i,i.state,null),Zh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ua(t,e){try{var n="",r=e;do n+=US(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Of(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Vp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var dA=typeof WeakMap=="function"?WeakMap:Map;function KE(t,e,n){n=Mi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xh||(Xh=!0,Zp=r),Vp(t,e)},n}function GE(t,e,n){n=Mi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Vp(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Vp(t,e),typeof r!="function"&&(bs===null?bs=new Set([this]):bs.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function Gv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new dA;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=AA.bind(null,t,e,n),e.then(t,t))}function Qv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Yv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mi(-1,1),e.tag=2,Ls(n,e,1))),n.lanes|=1),t)}var fA=Qi.ReactCurrentOwner,Hn=!1;function Nn(t,e,n,r){e.child=t===null?SE(e,null,n,r):Va(e,t.child,n,r)}function Xv(t,e,n,r,i){n=n.render;var o=e.ref;return Ca(e,i),r=lg(t,e,n,r,o,i),n=ug(),t!==null&&!Hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Hi(t,e,i)):(St&&n&&Qm(e),e.flags|=1,Nn(t,e,r,i),e.child)}function Jv(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!yg(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,QE(t,e,o,r,i)):(t=wh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Cu,n(l,r)&&t.ref===e.ref)return Hi(t,e,i)}return e.flags|=1,t=Ds(o,r),t.ref=e.ref,t.return=e,e.child=t}function QE(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Cu(o,r)&&t.ref===e.ref)if(Hn=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Hn=!0);else return e.lanes=t.lanes,Hi(t,e,i)}return Fp(t,e,n,r,i)}function YE(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},gt(va,tr),tr|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,gt(va,tr),tr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,gt(va,tr),tr|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,gt(va,tr),tr|=r;return Nn(t,e,i,n),e.child}function XE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Fp(t,e,n,r,i){var o=Zn(n)?yo:An.current;return o=Ma(e,o),Ca(e,i),n=lg(t,e,n,r,o,i),r=ug(),t!==null&&!Hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Hi(t,e,i)):(St&&r&&Qm(e),e.flags|=1,Nn(t,e,n,i),e.child)}function ey(t,e,n,r,i){if(Zn(n)){var o=!0;jh(e)}else o=!1;if(Ca(e,i),e.stateNode===null)_h(t,e),ZE(e,n,r),Op(e,n,r,i),r=!0;else if(t===null){var l=e.stateNode,c=e.memoizedProps;l.props=c;var d=l.context,p=n.contextType;typeof p=="object"&&p!==null?p=Ar(p):(p=Zn(n)?yo:An.current,p=Ma(e,p));var g=n.getDerivedStateFromProps,y=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function";y||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==r||d!==p)&&Kv(e,l,r,p),gs=!1;var E=e.memoizedState;l.state=E,Zh(e,r,l,i),d=e.memoizedState,c!==r||E!==d||Wn.current||gs?(typeof g=="function"&&(Mp(e,n,g,r),d=e.memoizedState),(c=gs||Zv(e,n,c,r,E,d,p))?(y||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=d),l.props=r,l.state=d,l.context=p,r=c):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,AE(t,e),c=e.memoizedProps,p=e.type===e.elementType?c:Or(e.type,c),l.props=p,y=e.pendingProps,E=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=Ar(d):(d=Zn(n)?yo:An.current,d=Ma(e,d));var k=n.getDerivedStateFromProps;(g=typeof k=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==y||E!==d)&&Kv(e,l,r,d),gs=!1,E=e.memoizedState,l.state=E,Zh(e,r,l,i);var F=e.memoizedState;c!==y||E!==F||Wn.current||gs?(typeof k=="function"&&(Mp(e,n,k,r),F=e.memoizedState),(p=gs||Zv(e,n,p,r,E,F,d)||!1)?(g||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,F,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,F,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=F),l.props=r,l.state=F,l.context=d,r=p):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),r=!1)}return Up(t,e,n,r,o,i)}function Up(t,e,n,r,i,o){XE(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&Uv(e,n,!1),Hi(t,e,o);r=e.stateNode,fA.current=e;var c=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=Va(e,t.child,null,o),e.child=Va(e,null,c,o)):Nn(t,e,c,o),e.memoizedState=r.state,i&&Uv(e,n,!0),e.child}function JE(t){var e=t.stateNode;e.pendingContext?Fv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Fv(t,e.context,!1),ig(t,e.containerInfo)}function ty(t,e,n,r,i){return Oa(),Xm(i),e.flags|=256,Nn(t,e,n,r),e.child}var zp={dehydrated:null,treeContext:null,retryLane:0};function Bp(t){return{baseLanes:t,cachePool:null,transitions:null}}function e1(t,e,n){var r=e.pendingProps,i=Ct.current,o=!1,l=(e.flags&128)!==0,c;if((c=l)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),gt(Ct,i&1),t===null)return Np(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,o?(r=e.mode,o=e.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Dd(l,r,0,null),t=_o(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Bp(n),e.memoizedState=zp,t):dg(e,l));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return pA(t,e,l,r,c,i,n);if(o){o=r.fallback,l=e.mode,i=t.child,c=i.sibling;var d={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=d,e.deletions=null):(r=Ds(i,d),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?o=Ds(c,o):(o=_o(o,l,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,l=t.child.memoizedState,l=l===null?Bp(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=zp,r}return o=t.child,t=o.sibling,r=Ds(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function dg(t,e){return e=Dd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Yc(t,e,n,r){return r!==null&&Xm(r),Va(e,t.child,null,n),t=dg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pA(t,e,n,r,i,o,l){if(n)return e.flags&256?(e.flags&=-257,r=Of(Error(oe(422))),Yc(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Dd({mode:"visible",children:r.children},i,0,null),o=_o(o,i,l,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Va(e,t.child,null,l),e.child.memoizedState=Bp(l),e.memoizedState=zp,o);if(!(e.mode&1))return Yc(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,o=Error(oe(419)),r=Of(o,r,void 0),Yc(t,e,l,r)}if(c=(l&t.childLanes)!==0,Hn||c){if(r=on,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,qi(t,i),qr(r,t,i,-1))}return vg(),r=Of(Error(oe(421))),Yc(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=xA.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,nr=ks(i.nextSibling),rr=e,St=!0,Ur=null,t!==null&&(wr[Er++]=Ri,wr[Er++]=ki,wr[Er++]=wo,Ri=t.id,ki=t.overflow,wo=e),e=dg(e,r.children),e.flags|=4096,e)}function ny(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Dp(t.return,e,n)}function Vf(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function t1(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Nn(t,e,r.children,n),r=Ct.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ny(t,n,e);else if(t.tag===19)ny(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(gt(Ct,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Kh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Vf(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Kh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Vf(e,!0,n,null,o);break;case"together":Vf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _h(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Hi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),To|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=Ds(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ds(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function mA(t,e,n){switch(e.tag){case 3:JE(e),Oa();break;case 5:xE(e);break;case 1:Zn(e.type)&&jh(e);break;case 4:ig(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;gt($h,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(gt(Ct,Ct.current&1),e.flags|=128,null):n&e.child.childLanes?e1(t,e,n):(gt(Ct,Ct.current&1),t=Hi(t,e,n),t!==null?t.sibling:null);gt(Ct,Ct.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return t1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),gt(Ct,Ct.current),r)break;return null;case 22:case 23:return e.lanes=0,YE(t,e,n)}return Hi(t,e,n)}var n1,jp,r1,i1;n1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jp=function(){};r1=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ho(li.current);var o=null;switch(n){case"input":i=cp(t,i),r=cp(t,r),o=[];break;case"select":i=kt({},i,{value:void 0}),r=kt({},r,{value:void 0}),o=[];break;case"textarea":i=fp(t,i),r=fp(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=zh)}mp(n,r);var l;n=null;for(p in i)if(!r.hasOwnProperty(p)&&i.hasOwnProperty(p)&&i[p]!=null)if(p==="style"){var c=i[p];for(l in c)c.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Eu.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in r){var d=r[p];if(c=i!=null?i[p]:void 0,r.hasOwnProperty(p)&&d!==c&&(d!=null||c!=null))if(p==="style")if(c){for(l in c)!c.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&c[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(p,n)),n=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(o=o||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Eu.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&vt("scroll",t),o||c===d||(o=[])):(o=o||[]).push(p,d))}n&&(o=o||[]).push("style",n);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};i1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Vl(t,e){if(!St)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function wn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function gA(t,e,n){var r=e.pendingProps;switch(Ym(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wn(e),null;case 1:return Zn(e.type)&&Bh(),wn(e),null;case 3:return r=e.stateNode,Fa(),Et(Wn),Et(An),og(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Gc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ur!==null&&(Qp(Ur),Ur=null))),jp(t,e),wn(e),null;case 5:sg(e);var i=ho(Nu.current);if(n=e.type,t!==null&&e.stateNode!=null)r1(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(oe(166));return wn(e),null}if(t=ho(li.current),Gc(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[ii]=e,r[Lu]=o,t=(e.mode&1)!==0,n){case"dialog":vt("cancel",r),vt("close",r);break;case"iframe":case"object":case"embed":vt("load",r);break;case"video":case"audio":for(i=0;i<Gl.length;i++)vt(Gl[i],r);break;case"source":vt("error",r);break;case"img":case"image":case"link":vt("error",r),vt("load",r);break;case"details":vt("toggle",r);break;case"input":hv(r,o),vt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},vt("invalid",r);break;case"textarea":fv(r,o),vt("invalid",r)}mp(n,o),i=null;for(var l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="children"?typeof c=="string"?r.textContent!==c&&(o.suppressHydrationWarning!==!0&&Kc(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&Kc(r.textContent,c,t),i=["children",""+c]):Eu.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&vt("scroll",r)}switch(n){case"input":zc(r),dv(r,o,!0);break;case"textarea":zc(r),pv(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=zh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[ii]=e,t[Lu]=r,n1(t,e,!1,!1),e.stateNode=t;e:{switch(l=gp(n,r),n){case"dialog":vt("cancel",t),vt("close",t),i=r;break;case"iframe":case"object":case"embed":vt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Gl.length;i++)vt(Gl[i],t);i=r;break;case"source":vt("error",t),i=r;break;case"img":case"image":case"link":vt("error",t),vt("load",t),i=r;break;case"details":vt("toggle",t),i=r;break;case"input":hv(t,r),i=cp(t,r),vt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=kt({},r,{value:void 0}),vt("invalid",t);break;case"textarea":fv(t,r),i=fp(t,r),vt("invalid",t);break;default:i=r}mp(n,i),c=i;for(o in c)if(c.hasOwnProperty(o)){var d=c[o];o==="style"?Mw(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Nw(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Tu(t,d):typeof d=="number"&&Tu(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Eu.hasOwnProperty(o)?d!=null&&o==="onScroll"&&vt("scroll",t):d!=null&&Om(t,o,d,l))}switch(n){case"input":zc(t),dv(t,r,!1);break;case"textarea":zc(t),pv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fs(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Sa(t,!!r.multiple,o,!1):r.defaultValue!=null&&Sa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=zh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wn(e),null;case 6:if(t&&e.stateNode!=null)i1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(oe(166));if(n=ho(Nu.current),ho(li.current),Gc(e)){if(r=e.stateNode,n=e.memoizedProps,r[ii]=e,(o=r.nodeValue!==n)&&(t=rr,t!==null))switch(t.tag){case 3:Kc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Kc(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ii]=e,e.stateNode=r}return wn(e),null;case 13:if(Et(Ct),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(St&&nr!==null&&e.mode&1&&!(e.flags&128))TE(),Oa(),e.flags|=98560,o=!1;else if(o=Gc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(oe(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(oe(317));o[ii]=e}else Oa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wn(e),o=!1}else Ur!==null&&(Qp(Ur),Ur=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ct.current&1?Jt===0&&(Jt=3):vg())),e.updateQueue!==null&&(e.flags|=4),wn(e),null);case 4:return Fa(),jp(t,e),t===null&&Ru(e.stateNode.containerInfo),wn(e),null;case 10:return tg(e.type._context),wn(e),null;case 17:return Zn(e.type)&&Bh(),wn(e),null;case 19:if(Et(Ct),o=e.memoizedState,o===null)return wn(e),null;if(r=(e.flags&128)!==0,l=o.rendering,l===null)if(r)Vl(o,!1);else{if(Jt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Kh(t),l!==null){for(e.flags|=128,Vl(o,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return gt(Ct,Ct.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ut()>za&&(e.flags|=128,r=!0,Vl(o,!1),e.lanes=4194304)}else{if(!r)if(t=Kh(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!St)return wn(e),null}else 2*Ut()-o.renderingStartTime>za&&n!==1073741824&&(e.flags|=128,r=!0,Vl(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ut(),e.sibling=null,n=Ct.current,gt(Ct,r?n&1|2:n&1),e):(wn(e),null);case 22:case 23:return _g(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?tr&1073741824&&(wn(e),e.subtreeFlags&6&&(e.flags|=8192)):wn(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function _A(t,e){switch(Ym(e),e.tag){case 1:return Zn(e.type)&&Bh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fa(),Et(Wn),Et(An),og(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return sg(e),null;case 13:if(Et(Ct),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));Oa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Et(Ct),null;case 4:return Fa(),null;case 10:return tg(e.type._context),null;case 22:case 23:return _g(),null;case 24:return null;default:return null}}var Xc=!1,Sn=!1,vA=typeof WeakSet=="function"?WeakSet:Set,ge=null;function _a(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Dt(t,e,r)}else n.current=null}function qp(t,e,n){try{n()}catch(r){Dt(t,e,r)}}var ry=!1;function yA(t,e){if(Ap=Vh,t=uE(),Gm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,c=-1,d=-1,p=0,g=0,y=t,E=null;t:for(;;){for(var k;y!==n||i!==0&&y.nodeType!==3||(c=l+i),y!==o||r!==0&&y.nodeType!==3||(d=l+r),y.nodeType===3&&(l+=y.nodeValue.length),(k=y.firstChild)!==null;)E=y,y=k;for(;;){if(y===t)break t;if(E===n&&++p===i&&(c=l),E===o&&++g===r&&(d=l),(k=y.nextSibling)!==null)break;y=E,E=y.parentNode}y=k}n=c===-1||d===-1?null:{start:c,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(xp={focusedElem:t,selectionRange:n},Vh=!1,ge=e;ge!==null;)if(e=ge,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ge=t;else for(;ge!==null;){e=ge;try{var F=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var V=F.memoizedProps,B=F.memoizedState,C=e.stateNode,S=C.getSnapshotBeforeUpdate(e.elementType===e.type?V:Or(e.type,V),B);C.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(Z){Dt(e,e.return,Z)}if(t=e.sibling,t!==null){t.return=e.return,ge=t;break}ge=e.return}return F=ry,ry=!1,F}function cu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&qp(e,n,o)}i=i.next}while(i!==r)}}function bd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Hp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function s1(t){var e=t.alternate;e!==null&&(t.alternate=null,s1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ii],delete e[Lu],delete e[kp],delete e[tA],delete e[nA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function o1(t){return t.tag===5||t.tag===3||t.tag===4}function iy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||o1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $p(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=zh));else if(r!==4&&(t=t.child,t!==null))for($p(t,e,n),t=t.sibling;t!==null;)$p(t,e,n),t=t.sibling}function Wp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Wp(t,e,n),t=t.sibling;t!==null;)Wp(t,e,n),t=t.sibling}var hn=null,Vr=!1;function ds(t,e,n){for(n=n.child;n!==null;)a1(t,e,n),n=n.sibling}function a1(t,e,n){if(ai&&typeof ai.onCommitFiberUnmount=="function")try{ai.onCommitFiberUnmount(Sd,n)}catch{}switch(n.tag){case 5:Sn||_a(n,e);case 6:var r=hn,i=Vr;hn=null,ds(t,e,n),hn=r,Vr=i,hn!==null&&(Vr?(t=hn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):hn.removeChild(n.stateNode));break;case 18:hn!==null&&(Vr?(t=hn,n=n.stateNode,t.nodeType===8?kf(t.parentNode,n):t.nodeType===1&&kf(t,n),Au(t)):kf(hn,n.stateNode));break;case 4:r=hn,i=Vr,hn=n.stateNode.containerInfo,Vr=!0,ds(t,e,n),hn=r,Vr=i;break;case 0:case 11:case 14:case 15:if(!Sn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&qp(n,e,l),i=i.next}while(i!==r)}ds(t,e,n);break;case 1:if(!Sn&&(_a(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Dt(n,e,c)}ds(t,e,n);break;case 21:ds(t,e,n);break;case 22:n.mode&1?(Sn=(r=Sn)||n.memoizedState!==null,ds(t,e,n),Sn=r):ds(t,e,n);break;default:ds(t,e,n)}}function sy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new vA),e.forEach(function(r){var i=CA.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Mr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,l=e,c=l;e:for(;c!==null;){switch(c.tag){case 5:hn=c.stateNode,Vr=!1;break e;case 3:hn=c.stateNode.containerInfo,Vr=!0;break e;case 4:hn=c.stateNode.containerInfo,Vr=!0;break e}c=c.return}if(hn===null)throw Error(oe(160));a1(o,l,i),hn=null,Vr=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(p){Dt(i,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)l1(e,t),e=e.sibling}function l1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mr(e,t),ti(t),r&4){try{cu(3,t,t.return),bd(3,t)}catch(V){Dt(t,t.return,V)}try{cu(5,t,t.return)}catch(V){Dt(t,t.return,V)}}break;case 1:Mr(e,t),ti(t),r&512&&n!==null&&_a(n,n.return);break;case 5:if(Mr(e,t),ti(t),r&512&&n!==null&&_a(n,n.return),t.flags&32){var i=t.stateNode;try{Tu(i,"")}catch(V){Dt(t,t.return,V)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,c=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&kw(i,o),gp(c,l);var p=gp(c,o);for(l=0;l<d.length;l+=2){var g=d[l],y=d[l+1];g==="style"?Mw(i,y):g==="dangerouslySetInnerHTML"?Nw(i,y):g==="children"?Tu(i,y):Om(i,g,y,p)}switch(c){case"input":hp(i,o);break;case"textarea":Lw(i,o);break;case"select":var E=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var k=o.value;k!=null?Sa(i,!!o.multiple,k,!1):E!==!!o.multiple&&(o.defaultValue!=null?Sa(i,!!o.multiple,o.defaultValue,!0):Sa(i,!!o.multiple,o.multiple?[]:"",!1))}i[Lu]=o}catch(V){Dt(t,t.return,V)}}break;case 6:if(Mr(e,t),ti(t),r&4){if(t.stateNode===null)throw Error(oe(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(V){Dt(t,t.return,V)}}break;case 3:if(Mr(e,t),ti(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Au(e.containerInfo)}catch(V){Dt(t,t.return,V)}break;case 4:Mr(e,t),ti(t);break;case 13:Mr(e,t),ti(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(mg=Ut())),r&4&&sy(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(Sn=(p=Sn)||g,Mr(e,t),Sn=p):Mr(e,t),ti(t),r&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!g&&t.mode&1)for(ge=t,g=t.child;g!==null;){for(y=ge=g;ge!==null;){switch(E=ge,k=E.child,E.tag){case 0:case 11:case 14:case 15:cu(4,E,E.return);break;case 1:_a(E,E.return);var F=E.stateNode;if(typeof F.componentWillUnmount=="function"){r=E,n=E.return;try{e=r,F.props=e.memoizedProps,F.state=e.memoizedState,F.componentWillUnmount()}catch(V){Dt(r,n,V)}}break;case 5:_a(E,E.return);break;case 22:if(E.memoizedState!==null){ay(y);continue}}k!==null?(k.return=E,ge=k):ay(y)}g=g.sibling}e:for(g=null,y=t;;){if(y.tag===5){if(g===null){g=y;try{i=y.stateNode,p?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=y.stateNode,d=y.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=Dw("display",l))}catch(V){Dt(t,t.return,V)}}}else if(y.tag===6){if(g===null)try{y.stateNode.nodeValue=p?"":y.memoizedProps}catch(V){Dt(t,t.return,V)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;g===y&&(g=null),y=y.return}g===y&&(g=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Mr(e,t),ti(t),r&4&&sy(t);break;case 21:break;default:Mr(e,t),ti(t)}}function ti(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(o1(n)){var r=n;break e}n=n.return}throw Error(oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Tu(i,""),r.flags&=-33);var o=iy(t);Wp(t,o,i);break;case 3:case 4:var l=r.stateNode.containerInfo,c=iy(t);$p(t,c,l);break;default:throw Error(oe(161))}}catch(d){Dt(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wA(t,e,n){ge=t,u1(t)}function u1(t,e,n){for(var r=(t.mode&1)!==0;ge!==null;){var i=ge,o=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||Xc;if(!l){var c=i.alternate,d=c!==null&&c.memoizedState!==null||Sn;c=Xc;var p=Sn;if(Xc=l,(Sn=d)&&!p)for(ge=i;ge!==null;)l=ge,d=l.child,l.tag===22&&l.memoizedState!==null?ly(i):d!==null?(d.return=l,ge=d):ly(i);for(;o!==null;)ge=o,u1(o),o=o.sibling;ge=i,Xc=c,Sn=p}oy(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ge=o):oy(t)}}function oy(t){for(;ge!==null;){var e=ge;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Sn||bd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Sn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Or(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Hv(e,o,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Hv(e,l,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var g=p.memoizedState;if(g!==null){var y=g.dehydrated;y!==null&&Au(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}Sn||e.flags&512&&Hp(e)}catch(E){Dt(e,e.return,E)}}if(e===t){ge=null;break}if(n=e.sibling,n!==null){n.return=e.return,ge=n;break}ge=e.return}}function ay(t){for(;ge!==null;){var e=ge;if(e===t){ge=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ge=n;break}ge=e.return}}function ly(t){for(;ge!==null;){var e=ge;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{bd(4,e)}catch(d){Dt(e,n,d)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(d){Dt(e,i,d)}}var o=e.return;try{Hp(e)}catch(d){Dt(e,o,d)}break;case 5:var l=e.return;try{Hp(e)}catch(d){Dt(e,l,d)}}}catch(d){Dt(e,e.return,d)}if(e===t){ge=null;break}var c=e.sibling;if(c!==null){c.return=e.return,ge=c;break}ge=e.return}}var EA=Math.ceil,Yh=Qi.ReactCurrentDispatcher,fg=Qi.ReactCurrentOwner,Pr=Qi.ReactCurrentBatchConfig,rt=0,on=null,Wt=null,pn=0,tr=0,va=$s(0),Jt=0,Vu=null,To=0,Nd=0,pg=0,hu=null,qn=null,mg=0,za=1/0,xi=null,Xh=!1,Zp=null,bs=null,Jc=!1,Ps=null,Jh=0,du=0,Kp=null,vh=-1,yh=0;function Mn(){return rt&6?Ut():vh!==-1?vh:vh=Ut()}function Ns(t){return t.mode&1?rt&2&&pn!==0?pn&-pn:iA.transition!==null?(yh===0&&(yh=Zw()),yh):(t=lt,t!==0||(t=window.event,t=t===void 0?16:eE(t.type)),t):1}function qr(t,e,n,r){if(50<du)throw du=0,Kp=null,Error(oe(185));ec(t,n,r),(!(rt&2)||t!==on)&&(t===on&&(!(rt&2)&&(Nd|=n),Jt===4&&vs(t,pn)),Kn(t,r),n===1&&rt===0&&!(e.mode&1)&&(za=Ut()+500,Rd&&Ws()))}function Kn(t,e){var n=t.callbackNode;iP(t,e);var r=Oh(t,t===on?pn:0);if(r===0)n!==null&&_v(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&_v(n),e===1)t.tag===0?rA(uy.bind(null,t)):yE(uy.bind(null,t)),JP(function(){!(rt&6)&&Ws()}),n=null;else{switch(Kw(r)){case 1:n=Bm;break;case 4:n=$w;break;case 16:n=Mh;break;case 536870912:n=Ww;break;default:n=Mh}n=_1(n,c1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function c1(t,e){if(vh=-1,yh=0,rt&6)throw Error(oe(327));var n=t.callbackNode;if(Ra()&&t.callbackNode!==n)return null;var r=Oh(t,t===on?pn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ed(t,r);else{e=r;var i=rt;rt|=2;var o=d1();(on!==t||pn!==e)&&(xi=null,za=Ut()+500,go(t,e));do try{SA();break}catch(c){h1(t,c)}while(!0);eg(),Yh.current=o,rt=i,Wt!==null?e=0:(on=null,pn=0,e=Jt)}if(e!==0){if(e===2&&(i=Ep(t),i!==0&&(r=i,e=Gp(t,i))),e===1)throw n=Vu,go(t,0),vs(t,r),Kn(t,Ut()),n;if(e===6)vs(t,r);else{if(i=t.current.alternate,!(r&30)&&!TA(i)&&(e=ed(t,r),e===2&&(o=Ep(t),o!==0&&(r=o,e=Gp(t,o))),e===1))throw n=Vu,go(t,0),vs(t,r),Kn(t,Ut()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(oe(345));case 2:ao(t,qn,xi);break;case 3:if(vs(t,r),(r&130023424)===r&&(e=mg+500-Ut(),10<e)){if(Oh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Mn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Rp(ao.bind(null,t,qn,xi),e);break}ao(t,qn,xi);break;case 4:if(vs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-jr(r);o=1<<l,l=e[l],l>i&&(i=l),r&=~o}if(r=i,r=Ut()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*EA(r/1960))-r,10<r){t.timeoutHandle=Rp(ao.bind(null,t,qn,xi),r);break}ao(t,qn,xi);break;case 5:ao(t,qn,xi);break;default:throw Error(oe(329))}}}return Kn(t,Ut()),t.callbackNode===n?c1.bind(null,t):null}function Gp(t,e){var n=hu;return t.current.memoizedState.isDehydrated&&(go(t,e).flags|=256),t=ed(t,e),t!==2&&(e=qn,qn=n,e!==null&&Qp(e)),t}function Qp(t){qn===null?qn=t:qn.push.apply(qn,t)}function TA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Hr(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vs(t,e){for(e&=~pg,e&=~Nd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-jr(e),r=1<<n;t[n]=-1,e&=~r}}function uy(t){if(rt&6)throw Error(oe(327));Ra();var e=Oh(t,0);if(!(e&1))return Kn(t,Ut()),null;var n=ed(t,e);if(t.tag!==0&&n===2){var r=Ep(t);r!==0&&(e=r,n=Gp(t,r))}if(n===1)throw n=Vu,go(t,0),vs(t,e),Kn(t,Ut()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ao(t,qn,xi),Kn(t,Ut()),null}function gg(t,e){var n=rt;rt|=1;try{return t(e)}finally{rt=n,rt===0&&(za=Ut()+500,Rd&&Ws())}}function Io(t){Ps!==null&&Ps.tag===0&&!(rt&6)&&Ra();var e=rt;rt|=1;var n=Pr.transition,r=lt;try{if(Pr.transition=null,lt=1,t)return t()}finally{lt=r,Pr.transition=n,rt=e,!(rt&6)&&Ws()}}function _g(){tr=va.current,Et(va)}function go(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,XP(n)),Wt!==null)for(n=Wt.return;n!==null;){var r=n;switch(Ym(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Bh();break;case 3:Fa(),Et(Wn),Et(An),og();break;case 5:sg(r);break;case 4:Fa();break;case 13:Et(Ct);break;case 19:Et(Ct);break;case 10:tg(r.type._context);break;case 22:case 23:_g()}n=n.return}if(on=t,Wt=t=Ds(t.current,null),pn=tr=e,Jt=0,Vu=null,pg=Nd=To=0,qn=hu=null,co!==null){for(e=0;e<co.length;e++)if(n=co[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var l=o.next;o.next=i,r.next=l}n.pending=r}co=null}return t}function h1(t,e){do{var n=Wt;try{if(eg(),mh.current=Qh,Gh){for(var r=Rt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Gh=!1}if(Eo=0,sn=Xt=Rt=null,uu=!1,Du=0,fg.current=null,n===null||n.return===null){Jt=1,Vu=e,Wt=null;break}e:{var o=t,l=n.return,c=n,d=e;if(e=pn,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,g=c,y=g.tag;if(!(g.mode&1)&&(y===0||y===11||y===15)){var E=g.alternate;E?(g.updateQueue=E.updateQueue,g.memoizedState=E.memoizedState,g.lanes=E.lanes):(g.updateQueue=null,g.memoizedState=null)}var k=Qv(l);if(k!==null){k.flags&=-257,Yv(k,l,c,o,e),k.mode&1&&Gv(o,p,e),e=k,d=p;var F=e.updateQueue;if(F===null){var V=new Set;V.add(d),e.updateQueue=V}else F.add(d);break e}else{if(!(e&1)){Gv(o,p,e),vg();break e}d=Error(oe(426))}}else if(St&&c.mode&1){var B=Qv(l);if(B!==null){!(B.flags&65536)&&(B.flags|=256),Yv(B,l,c,o,e),Xm(Ua(d,c));break e}}o=d=Ua(d,c),Jt!==4&&(Jt=2),hu===null?hu=[o]:hu.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var C=KE(o,d,e);qv(o,C);break e;case 1:c=d;var S=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof S.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(bs===null||!bs.has(b)))){o.flags|=65536,e&=-e,o.lanes|=e;var Z=GE(o,c,e);qv(o,Z);break e}}o=o.return}while(o!==null)}p1(n)}catch(J){e=J,Wt===n&&n!==null&&(Wt=n=n.return);continue}break}while(!0)}function d1(){var t=Yh.current;return Yh.current=Qh,t===null?Qh:t}function vg(){(Jt===0||Jt===3||Jt===2)&&(Jt=4),on===null||!(To&268435455)&&!(Nd&268435455)||vs(on,pn)}function ed(t,e){var n=rt;rt|=2;var r=d1();(on!==t||pn!==e)&&(xi=null,go(t,e));do try{IA();break}catch(i){h1(t,i)}while(!0);if(eg(),rt=n,Yh.current=r,Wt!==null)throw Error(oe(261));return on=null,pn=0,Jt}function IA(){for(;Wt!==null;)f1(Wt)}function SA(){for(;Wt!==null&&!GS();)f1(Wt)}function f1(t){var e=g1(t.alternate,t,tr);t.memoizedProps=t.pendingProps,e===null?p1(t):Wt=e,fg.current=null}function p1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=_A(n,e),n!==null){n.flags&=32767,Wt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Jt=6,Wt=null;return}}else if(n=gA(n,e,tr),n!==null){Wt=n;return}if(e=e.sibling,e!==null){Wt=e;return}Wt=e=t}while(e!==null);Jt===0&&(Jt=5)}function ao(t,e,n){var r=lt,i=Pr.transition;try{Pr.transition=null,lt=1,PA(t,e,n,r)}finally{Pr.transition=i,lt=r}return null}function PA(t,e,n,r){do Ra();while(Ps!==null);if(rt&6)throw Error(oe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(sP(t,o),t===on&&(Wt=on=null,pn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jc||(Jc=!0,_1(Mh,function(){return Ra(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Pr.transition,Pr.transition=null;var l=lt;lt=1;var c=rt;rt|=4,fg.current=null,yA(t,n),l1(n,t),$P(xp),Vh=!!Ap,xp=Ap=null,t.current=n,wA(n),QS(),rt=c,lt=l,Pr.transition=o}else t.current=n;if(Jc&&(Jc=!1,Ps=t,Jh=i),o=t.pendingLanes,o===0&&(bs=null),JS(n.stateNode),Kn(t,Ut()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Xh)throw Xh=!1,t=Zp,Zp=null,t;return Jh&1&&t.tag!==0&&Ra(),o=t.pendingLanes,o&1?t===Kp?du++:(du=0,Kp=t):du=0,Ws(),null}function Ra(){if(Ps!==null){var t=Kw(Jh),e=Pr.transition,n=lt;try{if(Pr.transition=null,lt=16>t?16:t,Ps===null)var r=!1;else{if(t=Ps,Ps=null,Jh=0,rt&6)throw Error(oe(331));var i=rt;for(rt|=4,ge=t.current;ge!==null;){var o=ge,l=o.child;if(ge.flags&16){var c=o.deletions;if(c!==null){for(var d=0;d<c.length;d++){var p=c[d];for(ge=p;ge!==null;){var g=ge;switch(g.tag){case 0:case 11:case 15:cu(8,g,o)}var y=g.child;if(y!==null)y.return=g,ge=y;else for(;ge!==null;){g=ge;var E=g.sibling,k=g.return;if(s1(g),g===p){ge=null;break}if(E!==null){E.return=k,ge=E;break}ge=k}}}var F=o.alternate;if(F!==null){var V=F.child;if(V!==null){F.child=null;do{var B=V.sibling;V.sibling=null,V=B}while(V!==null)}}ge=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,ge=l;else e:for(;ge!==null;){if(o=ge,o.flags&2048)switch(o.tag){case 0:case 11:case 15:cu(9,o,o.return)}var C=o.sibling;if(C!==null){C.return=o.return,ge=C;break e}ge=o.return}}var S=t.current;for(ge=S;ge!==null;){l=ge;var b=l.child;if(l.subtreeFlags&2064&&b!==null)b.return=l,ge=b;else e:for(l=S;ge!==null;){if(c=ge,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:bd(9,c)}}catch(J){Dt(c,c.return,J)}if(c===l){ge=null;break e}var Z=c.sibling;if(Z!==null){Z.return=c.return,ge=Z;break e}ge=c.return}}if(rt=i,Ws(),ai&&typeof ai.onPostCommitFiberRoot=="function")try{ai.onPostCommitFiberRoot(Sd,t)}catch{}r=!0}return r}finally{lt=n,Pr.transition=e}}return!1}function cy(t,e,n){e=Ua(n,e),e=KE(t,e,1),t=Ls(t,e,1),e=Mn(),t!==null&&(ec(t,1,e),Kn(t,e))}function Dt(t,e,n){if(t.tag===3)cy(t,t,n);else for(;e!==null;){if(e.tag===3){cy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(bs===null||!bs.has(r))){t=Ua(n,t),t=GE(e,t,1),e=Ls(e,t,1),t=Mn(),e!==null&&(ec(e,1,t),Kn(e,t));break}}e=e.return}}function AA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Mn(),t.pingedLanes|=t.suspendedLanes&n,on===t&&(pn&n)===n&&(Jt===4||Jt===3&&(pn&130023424)===pn&&500>Ut()-mg?go(t,0):pg|=n),Kn(t,e)}function m1(t,e){e===0&&(t.mode&1?(e=qc,qc<<=1,!(qc&130023424)&&(qc=4194304)):e=1);var n=Mn();t=qi(t,e),t!==null&&(ec(t,e,n),Kn(t,n))}function xA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),m1(t,n)}function CA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(oe(314))}r!==null&&r.delete(e),m1(t,n)}var g1;g1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wn.current)Hn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Hn=!1,mA(t,e,n);Hn=!!(t.flags&131072)}else Hn=!1,St&&e.flags&1048576&&wE(e,Hh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_h(t,e),t=e.pendingProps;var i=Ma(e,An.current);Ca(e,n),i=lg(null,e,r,t,i,n);var o=ug();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zn(r)?(o=!0,jh(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,rg(e),i.updater=Ld,e.stateNode=i,i._reactInternals=e,Op(e,r,t,n),e=Up(null,e,r,!0,o,n)):(e.tag=0,St&&o&&Qm(e),Nn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(_h(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=kA(r),t=Or(r,t),i){case 0:e=Fp(null,e,r,t,n);break e;case 1:e=ey(null,e,r,t,n);break e;case 11:e=Xv(null,e,r,t,n);break e;case 14:e=Jv(null,e,r,Or(r.type,t),n);break e}throw Error(oe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Or(r,i),Fp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Or(r,i),ey(t,e,r,i,n);case 3:e:{if(JE(e),t===null)throw Error(oe(387));r=e.pendingProps,o=e.memoizedState,i=o.element,AE(t,e),Zh(e,r,null,n);var l=e.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Ua(Error(oe(423)),e),e=ty(t,e,r,n,i);break e}else if(r!==i){i=Ua(Error(oe(424)),e),e=ty(t,e,r,n,i);break e}else for(nr=ks(e.stateNode.containerInfo.firstChild),rr=e,St=!0,Ur=null,n=SE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Oa(),r===i){e=Hi(t,e,n);break e}Nn(t,e,r,n)}e=e.child}return e;case 5:return xE(e),t===null&&Np(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,l=i.children,Cp(r,i)?l=null:o!==null&&Cp(r,o)&&(e.flags|=32),XE(t,e),Nn(t,e,l,n),e.child;case 6:return t===null&&Np(e),null;case 13:return e1(t,e,n);case 4:return ig(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Va(e,null,r,n):Nn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Or(r,i),Xv(t,e,r,i,n);case 7:return Nn(t,e,e.pendingProps,n),e.child;case 8:return Nn(t,e,e.pendingProps.children,n),e.child;case 12:return Nn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,l=i.value,gt($h,r._currentValue),r._currentValue=l,o!==null)if(Hr(o.value,l)){if(o.children===i.children&&!Wn.current){e=Hi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var c=o.dependencies;if(c!==null){l=o.child;for(var d=c.firstContext;d!==null;){if(d.context===r){if(o.tag===1){d=Mi(-1,n&-n),d.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var g=p.pending;g===null?d.next=d:(d.next=g.next,g.next=d),p.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),Dp(o.return,n,e),c.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(oe(341));l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),Dp(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Nn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ca(e,n),i=Ar(i),r=r(i),e.flags|=1,Nn(t,e,r,n),e.child;case 14:return r=e.type,i=Or(r,e.pendingProps),i=Or(r.type,i),Jv(t,e,r,i,n);case 15:return QE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Or(r,i),_h(t,e),e.tag=1,Zn(r)?(t=!0,jh(e)):t=!1,Ca(e,n),ZE(e,r,i),Op(e,r,i,n),Up(null,e,r,!0,t,n);case 19:return t1(t,e,n);case 22:return YE(t,e,n)}throw Error(oe(156,e.tag))};function _1(t,e){return Hw(t,e)}function RA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ir(t,e,n,r){return new RA(t,e,n,r)}function yg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kA(t){if(typeof t=="function")return yg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fm)return 11;if(t===Um)return 14}return 2}function Ds(t,e){var n=t.alternate;return n===null?(n=Ir(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function wh(t,e,n,r,i,o){var l=2;if(r=t,typeof t=="function")yg(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case la:return _o(n.children,i,o,e);case Vm:l=8,i|=8;break;case op:return t=Ir(12,n,e,i|2),t.elementType=op,t.lanes=o,t;case ap:return t=Ir(13,n,e,i),t.elementType=ap,t.lanes=o,t;case lp:return t=Ir(19,n,e,i),t.elementType=lp,t.lanes=o,t;case xw:return Dd(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Pw:l=10;break e;case Aw:l=9;break e;case Fm:l=11;break e;case Um:l=14;break e;case ms:l=16,r=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=Ir(l,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function _o(t,e,n,r){return t=Ir(7,t,r,e),t.lanes=n,t}function Dd(t,e,n,r){return t=Ir(22,t,r,e),t.elementType=xw,t.lanes=n,t.stateNode={isHidden:!1},t}function Ff(t,e,n){return t=Ir(6,t,null,e),t.lanes=n,t}function Uf(t,e,n){return e=Ir(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function LA(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yf(0),this.expirationTimes=yf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function wg(t,e,n,r,i,o,l,c,d){return t=new LA(t,e,n,c,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Ir(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rg(o),t}function bA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:aa,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function v1(t){if(!t)return Us;t=t._reactInternals;e:{if(bo(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if(Zn(n))return vE(t,n,e)}return e}function y1(t,e,n,r,i,o,l,c,d){return t=wg(n,r,!0,t,i,o,l,c,d),t.context=v1(null),n=t.current,r=Mn(),i=Ns(n),o=Mi(r,i),o.callback=e??null,Ls(n,o,i),t.current.lanes=i,ec(t,i,r),Kn(t,r),t}function Md(t,e,n,r){var i=e.current,o=Mn(),l=Ns(i);return n=v1(n),e.context===null?e.context=n:e.pendingContext=n,e=Mi(o,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ls(i,e,l),t!==null&&(qr(t,i,l,o),ph(t,i,l)),l}function td(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Eg(t,e){hy(t,e),(t=t.alternate)&&hy(t,e)}function NA(){return null}var w1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Tg(t){this._internalRoot=t}Od.prototype.render=Tg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));Md(t,e,null,null)};Od.prototype.unmount=Tg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Io(function(){Md(null,t,null,null)}),e[ji]=null}};function Od(t){this._internalRoot=t}Od.prototype.unstable_scheduleHydration=function(t){if(t){var e=Yw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_s.length&&e!==0&&e<_s[n].priority;n++);_s.splice(n,0,t),n===0&&Jw(t)}};function Ig(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dy(){}function DA(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var p=td(l);o.call(p)}}var l=y1(e,r,t,0,null,!1,!1,"",dy);return t._reactRootContainer=l,t[ji]=l.current,Ru(t.nodeType===8?t.parentNode:t),Io(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var p=td(d);c.call(p)}}var d=wg(t,0,!1,null,null,!1,!1,"",dy);return t._reactRootContainer=d,t[ji]=d.current,Ru(t.nodeType===8?t.parentNode:t),Io(function(){Md(e,d,n,r)}),d}function Fd(t,e,n,r,i){var o=n._reactRootContainer;if(o){var l=o;if(typeof i=="function"){var c=i;i=function(){var d=td(l);c.call(d)}}Md(e,l,t,i)}else l=DA(n,e,t,i,r);return td(l)}Gw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Kl(e.pendingLanes);n!==0&&(jm(e,n|1),Kn(e,Ut()),!(rt&6)&&(za=Ut()+500,Ws()))}break;case 13:Io(function(){var r=qi(t,1);if(r!==null){var i=Mn();qr(r,t,1,i)}}),Eg(t,1)}};qm=function(t){if(t.tag===13){var e=qi(t,134217728);if(e!==null){var n=Mn();qr(e,t,134217728,n)}Eg(t,134217728)}};Qw=function(t){if(t.tag===13){var e=Ns(t),n=qi(t,e);if(n!==null){var r=Mn();qr(n,t,e,r)}Eg(t,e)}};Yw=function(){return lt};Xw=function(t,e){var n=lt;try{return lt=t,e()}finally{lt=n}};vp=function(t,e,n){switch(e){case"input":if(hp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Cd(r);if(!i)throw Error(oe(90));Rw(r),hp(r,i)}}}break;case"textarea":Lw(t,n);break;case"select":e=n.value,e!=null&&Sa(t,!!n.multiple,e,!1)}};Fw=gg;Uw=Io;var MA={usingClientEntryPoint:!1,Events:[nc,da,Cd,Ow,Vw,gg]},Fl={findFiberByHostInstance:uo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OA={bundleType:Fl.bundleType,version:Fl.version,rendererPackageName:Fl.rendererPackageName,rendererConfig:Fl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jw(t),t===null?null:t.stateNode},findFiberByHostInstance:Fl.findFiberByHostInstance||NA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eh.isDisabled&&eh.supportsFiber)try{Sd=eh.inject(OA),ai=eh}catch{}}or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MA;or.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ig(e))throw Error(oe(200));return bA(t,e,null,n)};or.createRoot=function(t,e){if(!Ig(t))throw Error(oe(299));var n=!1,r="",i=w1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=wg(t,1,!1,null,null,n,!1,r,i),t[ji]=e.current,Ru(t.nodeType===8?t.parentNode:t),new Tg(e)};or.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=jw(e),t=t===null?null:t.stateNode,t};or.flushSync=function(t){return Io(t)};or.hydrate=function(t,e,n){if(!Vd(e))throw Error(oe(200));return Fd(null,t,e,!0,n)};or.hydrateRoot=function(t,e,n){if(!Ig(t))throw Error(oe(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",l=w1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=y1(e,null,t,1,n??null,i,!1,o,l),t[ji]=e.current,Ru(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Od(e)};or.render=function(t,e,n){if(!Vd(e))throw Error(oe(200));return Fd(null,t,e,!1,n)};or.unmountComponentAtNode=function(t){if(!Vd(t))throw Error(oe(40));return t._reactRootContainer?(Io(function(){Fd(null,null,t,!1,function(){t._reactRootContainer=null,t[ji]=null})}),!0):!1};or.unstable_batchedUpdates=gg;or.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Vd(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return Fd(t,e,n,!1,r)};or.version="18.3.1-next-f1338f8080-20240426";function E1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E1)}catch(t){console.error(t)}}E1(),Ew.exports=or;var Sg=Ew.exports;const VA=Rm(Sg),FA=uw({__proto__:null,default:VA},[Sg]);var fy=Sg;ip.createRoot=fy.createRoot,ip.hydrateRoot=fy.hydrateRoot;/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mt(){return Mt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mt.apply(this,arguments)}var Ht;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ht||(Ht={}));const py="popstate";function UA(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:l,hash:c}=r.location;return Fu("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Po(i)}return BA(e,n,null,t)}function Ye(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function So(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zA(){return Math.random().toString(36).substr(2,8)}function my(t,e){return{usr:t.state,key:t.key,idx:e}}function Fu(t,e,n,r){return n===void 0&&(n=null),Mt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Zs(e):e,{state:n,key:e&&e.key||r||zA()})}function Po(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Zs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function BA(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,c=Ht.Pop,d=null,p=g();p==null&&(p=0,l.replaceState(Mt({},l.state,{idx:p}),""));function g(){return(l.state||{idx:null}).idx}function y(){c=Ht.Pop;let B=g(),C=B==null?null:B-p;p=B,d&&d({action:c,location:V.location,delta:C})}function E(B,C){c=Ht.Push;let S=Fu(V.location,B,C);p=g()+1;let b=my(S,p),Z=V.createHref(S);try{l.pushState(b,"",Z)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;i.location.assign(Z)}o&&d&&d({action:c,location:V.location,delta:1})}function k(B,C){c=Ht.Replace;let S=Fu(V.location,B,C);p=g();let b=my(S,p),Z=V.createHref(S);l.replaceState(b,"",Z),o&&d&&d({action:c,location:V.location,delta:0})}function F(B){let C=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof B=="string"?B:Po(B);return Ye(C,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,C)}let V={get action(){return c},get location(){return t(i,l)},listen(B){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(py,y),d=B,()=>{i.removeEventListener(py,y),d=null}},createHref(B){return e(i,B)},createURL:F,encodeLocation(B){let C=F(B);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:E,replace:k,go(B){return l.go(B)}};return V}var Nt;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Nt||(Nt={}));const jA=new Set(["lazy","caseSensitive","path","id","index","children"]);function qA(t){return t.index===!0}function Yp(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,o)=>{let l=[...n,o],c=typeof i.id=="string"?i.id:l.join("-");if(Ye(i.index!==!0||!i.children,"Cannot specify children on an index route"),Ye(!r[c],'Found a route id collision on id "'+c+`".  Route id's must be globally unique within Data Router usages`),qA(i)){let d=Mt({},i,e(i),{id:c});return r[c]=d,d}else{let d=Mt({},i,e(i),{id:c,children:void 0});return r[c]=d,i.children&&(d.children=Yp(i.children,e,l,r)),d}})}function ya(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Zs(e):e,i=Ja(r.pathname||"/",n);if(i==null)return null;let o=T1(t);$A(o);let l=null;for(let c=0;l==null&&c<o.length;++c)l=ex(o[c],rx(i));return l}function HA(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function T1(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,l,c)=>{let d={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(Ye(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let p=Oi([r,d.relativePath]),g=n.concat(d);o.children&&o.children.length>0&&(Ye(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),T1(o.children,e,g,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:XA(p,o.index),routesMeta:g})};return t.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let d of I1(o.path))i(o,l,d)}),e}function I1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=I1(r.join("/")),c=[];return c.push(...l.map(d=>d===""?o:[o,d].join("/"))),i&&c.push(...l),c.map(d=>t.startsWith("/")&&d===""?"/":d)}function $A(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:JA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const WA=/^:[\w-]+$/,ZA=3,KA=2,GA=1,QA=10,YA=-2,gy=t=>t==="*";function XA(t,e){let n=t.split("/"),r=n.length;return n.some(gy)&&(r+=YA),e&&(r+=KA),n.filter(i=>!gy(i)).reduce((i,o)=>i+(WA.test(o)?ZA:o===""?GA:QA),r)}function JA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function ex(t,e){let{routesMeta:n}=t,r={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,p=i==="/"?e:e.slice(i.length)||"/",g=tx({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},p);if(!g)return null;Object.assign(r,g.params);let y=c.route;o.push({params:r,pathname:Oi([i,g.pathname]),pathnameBase:ax(Oi([i,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(i=Oi([i,g.pathnameBase]))}return o}function tx(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=nx(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((p,g,y)=>{let{paramName:E,isOptional:k}=g;if(E==="*"){let V=c[y]||"";l=o.slice(0,o.length-V.length).replace(/(.)\/+$/,"$1")}const F=c[y];return k&&!F?p[E]=void 0:p[E]=ix(F||"",E),p},{}),pathname:o,pathnameBase:l,pattern:t}}function nx(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),So(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function rx(t){try{return decodeURI(t)}catch(e){return So(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ix(t,e){try{return decodeURIComponent(t)}catch(n){return So(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Ja(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function sx(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Zs(t):t;return{pathname:n?n.startsWith("/")?n:ox(n,e):e,search:lx(r),hash:ux(i)}}function ox(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function zf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function S1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Pg(t,e){let n=S1(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ag(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Zs(t):(i=Mt({},t),Ye(!i.pathname||!i.pathname.includes("?"),zf("?","pathname","search",i)),Ye(!i.pathname||!i.pathname.includes("#"),zf("#","pathname","hash",i)),Ye(!i.search||!i.search.includes("#"),zf("#","search","hash",i)));let o=t===""||i.pathname==="",l=o?"/":i.pathname,c;if(l==null)c=n;else{let y=e.length-1;if(!r&&l.startsWith("..")){let E=l.split("/");for(;E[0]==="..";)E.shift(),y-=1;i.pathname=E.join("/")}c=y>=0?e[y]:"/"}let d=sx(i,c),p=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||g)&&(d.pathname+="/"),d}const Oi=t=>t.join("/").replace(/\/\/+/g,"/"),ax=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),lx=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ux=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class xg{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function P1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const A1=["post","put","patch","delete"],cx=new Set(A1),hx=["get",...A1],dx=new Set(hx),fx=new Set([301,302,303,307,308]),px=new Set([307,308]),Bf={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},mx={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ul={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},x1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gx=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),C1="remix-router-transitions";function _x(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Ye(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let j=t.detectErrorBoundary;i=$=>({hasErrorBoundary:j($)})}else i=gx;let o={},l=Yp(t.routes,i,void 0,o),c,d=t.basename||"/",p=Mt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},t.future),g=null,y=new Set,E=null,k=null,F=null,V=t.hydrationData!=null,B=ya(l,t.history.location,d),C=null;if(B==null){let j=yr(404,{pathname:t.history.location.pathname}),{matches:$,route:ee}=Sy(l);B=$,C={[ee.id]:j}}let S,b=B.some(j=>j.route.lazy),Z=B.some(j=>j.route.loader);if(b)S=!1;else if(!Z)S=!0;else if(p.v7_partialHydration){let j=t.hydrationData?t.hydrationData.loaderData:null,$=t.hydrationData?t.hydrationData.errors:null;S=B.every(ee=>ee.route.loader&&ee.route.loader.hydrate!==!0&&(j&&j[ee.route.id]!==void 0||$&&$[ee.route.id]!==void 0))}else S=t.hydrationData!=null;let J,z={historyAction:t.history.action,location:t.history.location,matches:B,initialized:S,navigation:Bf,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||C,fetchers:new Map,blockers:new Map},P=Ht.Pop,T=!1,A,R=!1,D=new Map,N=null,x=!1,Ie=!1,Je=[],We=[],Ae=new Map,Y=0,we=-1,re=new Map,Ee=new Set,Re=new Map,Ve=new Map,ze=new Set,be=new Map,Se=new Map,pt=!1;function vn(){if(g=t.history.listen(j=>{let{action:$,location:ee,delta:he}=j;if(pt){pt=!1;return}So(Se.size===0||he!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let _e=Fo({currentLocation:z.location,nextLocation:ee,historyAction:$});if(_e&&he!=null){pt=!0,t.history.go(he*-1),Fn(_e,{state:"blocked",location:ee,proceed(){Fn(_e,{state:"proceeding",proceed:void 0,reset:void 0,location:ee}),t.history.go(he)},reset(){let De=new Map(z.blockers);De.set(_e,Ul),_t({blockers:De})}});return}return Rn($,ee)}),n){Cx(e,D);let j=()=>Rx(e,D);e.addEventListener("pagehide",j),N=()=>e.removeEventListener("pagehide",j)}return z.initialized||Rn(Ht.Pop,z.location,{initialHydration:!0}),J}function pi(){g&&g(),N&&N(),y.clear(),A&&A.abort(),z.fetchers.forEach((j,$)=>He($)),z.blockers.forEach((j,$)=>Rr($))}function lr(j){return y.add(j),()=>y.delete(j)}function _t(j,$){$===void 0&&($={}),z=Mt({},z,j);let ee=[],he=[];p.v7_fetcherPersist&&z.fetchers.forEach((_e,De)=>{_e.state==="idle"&&(ze.has(De)?he.push(De):ee.push(De))}),[...y].forEach(_e=>_e(z,{deletedFetchers:he,unstable_viewTransitionOpts:$.viewTransitionOpts,unstable_flushSync:$.flushSync===!0})),p.v7_fetcherPersist&&(ee.forEach(_e=>z.fetchers.delete(_e)),he.forEach(_e=>He(_e)))}function an(j,$,ee){var he,_e;let{flushSync:De}=ee===void 0?{}:ee,xe=z.actionData!=null&&z.navigation.formMethod!=null&&Fr(z.navigation.formMethod)&&z.navigation.state==="loading"&&((he=j.state)==null?void 0:he._isRedirect)!==!0,me;$.actionData?Object.keys($.actionData).length>0?me=$.actionData:me=null:xe?me=z.actionData:me=null;let Te=$.loaderData?Iy(z.loaderData,$.loaderData,$.matches||[],$.errors):z.loaderData,Be=z.blockers;Be.size>0&&(Be=new Map(Be),Be.forEach((le,ht)=>Be.set(ht,Ul)));let mt=T===!0||z.navigation.formMethod!=null&&Fr(z.navigation.formMethod)&&((_e=j.state)==null?void 0:_e._isRedirect)!==!0;c&&(l=c,c=void 0),x||P===Ht.Pop||(P===Ht.Push?t.history.push(j,j.state):P===Ht.Replace&&t.history.replace(j,j.state));let Ce;if(P===Ht.Pop){let le=D.get(z.location.pathname);le&&le.has(j.pathname)?Ce={currentLocation:z.location,nextLocation:j}:D.has(j.pathname)&&(Ce={currentLocation:j,nextLocation:z.location})}else if(R){let le=D.get(z.location.pathname);le?le.add(j.pathname):(le=new Set([j.pathname]),D.set(z.location.pathname,le)),Ce={currentLocation:z.location,nextLocation:j}}_t(Mt({},$,{actionData:me,loaderData:Te,historyAction:P,location:j,initialized:!0,navigation:Bf,revalidation:"idle",restoreScrollPosition:Lr(j,$.matches||z.matches),preventScrollReset:mt,blockers:Be}),{viewTransitionOpts:Ce,flushSync:De===!0}),P=Ht.Pop,T=!1,R=!1,x=!1,Ie=!1,Je=[],We=[]}async function Gn(j,$){if(typeof j=="number"){t.history.go(j);return}let ee=Xp(z.location,z.matches,d,p.v7_prependBasename,j,p.v7_relativeSplatPath,$==null?void 0:$.fromRouteId,$==null?void 0:$.relative),{path:he,submission:_e,error:De}=_y(p.v7_normalizeFormMethod,!1,ee,$),xe=z.location,me=Fu(z.location,he,$&&$.state);me=Mt({},me,t.history.encodeLocation(me));let Te=$&&$.replace!=null?$.replace:void 0,Be=Ht.Push;Te===!0?Be=Ht.Replace:Te===!1||_e!=null&&Fr(_e.formMethod)&&_e.formAction===z.location.pathname+z.location.search&&(Be=Ht.Replace);let mt=$&&"preventScrollReset"in $?$.preventScrollReset===!0:void 0,Ce=($&&$.unstable_flushSync)===!0,le=Fo({currentLocation:xe,nextLocation:me,historyAction:Be});if(le){Fn(le,{state:"blocked",location:me,proceed(){Fn(le,{state:"proceeding",proceed:void 0,reset:void 0,location:me}),Gn(j,$)},reset(){let ht=new Map(z.blockers);ht.set(le,Ul),_t({blockers:ht})}});return}return await Rn(Be,me,{submission:_e,pendingError:De,preventScrollReset:mt,replace:$&&$.replace,enableViewTransition:$&&$.unstable_viewTransition,flushSync:Ce})}function Zr(){if(se(),_t({revalidation:"loading"}),z.navigation.state!=="submitting"){if(z.navigation.state==="idle"){Rn(z.historyAction,z.location,{startUninterruptedRevalidation:!0});return}Rn(P||z.historyAction,z.navigation.location,{overrideNavigation:z.navigation})}}async function Rn(j,$,ee){A&&A.abort(),A=null,P=j,x=(ee&&ee.startUninterruptedRevalidation)===!0,Xs(z.location,z.matches),T=(ee&&ee.preventScrollReset)===!0,R=(ee&&ee.enableViewTransition)===!0;let he=c||l,_e=ee&&ee.overrideNavigation,De=ya(he,$,d),xe=(ee&&ee.flushSync)===!0;if(!De){let ht=yr(404,{pathname:$.pathname}),{matches:un,route:Pt}=Sy(he);kr(),an($,{matches:un,loaderData:{},errors:{[Pt.id]:ht}},{flushSync:xe});return}if(z.initialized&&!Ie&&Tx(z.location,$)&&!(ee&&ee.submission&&Fr(ee.submission.formMethod))){an($,{matches:De},{flushSync:xe});return}A=new AbortController;let me=Bl(t.history,$,A.signal,ee&&ee.submission),Te,Be;if(ee&&ee.pendingError)Be={[fu(De).route.id]:ee.pendingError};else if(ee&&ee.submission&&Fr(ee.submission.formMethod)){let ht=await Ji(me,$,ee.submission,De,{replace:ee.replace,flushSync:xe});if(ht.shortCircuited)return;Te=ht.pendingActionData,Be=ht.pendingActionError,_e=jf($,ee.submission),xe=!1,me=new Request(me.url,{signal:me.signal})}let{shortCircuited:mt,loaderData:Ce,errors:le}=await es(me,$,De,_e,ee&&ee.submission,ee&&ee.fetcherSubmission,ee&&ee.replace,ee&&ee.initialHydration===!0,xe,Te,Be);mt||(A=null,an($,Mt({matches:De},Te?{actionData:Te}:{},{loaderData:Ce,errors:le})))}async function Ji(j,$,ee,he,_e){_e===void 0&&(_e={}),se();let De=Ax($,ee);_t({navigation:De},{flushSync:_e.flushSync===!0});let xe,me=em(he,$);if(!me.route.action&&!me.route.lazy)xe={type:Nt.error,error:yr(405,{method:j.method,pathname:$.pathname,routeId:me.route.id})};else if(xe=await zl("action",j,me,he,o,i,d,p.v7_relativeSplatPath),j.signal.aborted)return{shortCircuited:!0};if(po(xe)){let Te;return _e&&_e.replace!=null?Te=_e.replace:Te=xe.location===z.location.pathname+z.location.search,await ue(z,xe,{submission:ee,replace:Te}),{shortCircuited:!0}}if(wa(xe)){let Te=fu(he,me.route.id);return(_e&&_e.replace)!==!0&&(P=Ht.Push),{pendingActionData:{},pendingActionError:{[Te.route.id]:xe.error}}}if(fo(xe))throw yr(400,{type:"defer-action"});return{pendingActionData:{[me.route.id]:xe.data}}}async function es(j,$,ee,he,_e,De,xe,me,Te,Be,mt){let Ce=he||jf($,_e),le=_e||De||xy(Ce),ht=c||l,[un,Pt]=vy(t.history,z,ee,le,$,p.v7_partialHydration&&me===!0,Ie,Je,We,ze,Re,Ee,ht,d,Be,mt);if(kr(it=>!(ee&&ee.some(ot=>ot.route.id===it))||un&&un.some(ot=>ot.route.id===it)),we=++Y,un.length===0&&Pt.length===0){let it=Cr();return an($,Mt({matches:ee,loaderData:{},errors:mt||null},Be?{actionData:Be}:{},it?{fetchers:new Map(z.fetchers)}:{}),{flushSync:Te}),{shortCircuited:!0}}if(!x&&(!p.v7_partialHydration||!me)){Pt.forEach(ot=>{let cn=z.fetchers.get(ot.key),gi=jl(void 0,cn?cn.data:void 0);z.fetchers.set(ot.key,gi)});let it=Be||z.actionData;_t(Mt({navigation:Ce},it?Object.keys(it).length===0?{actionData:null}:{actionData:it}:{},Pt.length>0?{fetchers:new Map(z.fetchers)}:{}),{flushSync:Te})}Pt.forEach(it=>{Ae.has(it.key)&&kn(it.key),it.controller&&Ae.set(it.key,it.controller)});let Un=()=>Pt.forEach(it=>kn(it.key));A&&A.signal.addEventListener("abort",Un);let{results:Gr,loaderResults:Qn,fetcherResults:zt}=await ae(z.matches,ee,un,Pt,j);if(j.signal.aborted)return{shortCircuited:!0};A&&A.signal.removeEventListener("abort",Un),Pt.forEach(it=>Ae.delete(it.key));let Qt=Py(Gr);if(Qt){if(Qt.idx>=un.length){let it=Pt[Qt.idx-un.length].key;Ee.add(it)}return await ue(z,Qt.result,{replace:xe}),{shortCircuited:!0}}let{loaderData:ns,errors:rs}=Ty(z,ee,un,Qn,mt,Pt,zt,be);be.forEach((it,ot)=>{it.subscribe(cn=>{(cn||it.done)&&be.delete(ot)})});let mi=Cr(),hr=cr(we),Qr=mi||hr||Pt.length>0;return Mt({loaderData:ns,errors:rs},Qr?{fetchers:new Map(z.fetchers)}:{})}function U(j,$,ee,he){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Ae.has(j)&&kn(j);let _e=(he&&he.unstable_flushSync)===!0,De=c||l,xe=Xp(z.location,z.matches,d,p.v7_prependBasename,ee,p.v7_relativeSplatPath,$,he==null?void 0:he.relative),me=ya(De,xe,d);if(!me){$e(j,$,yr(404,{pathname:xe}),{flushSync:_e});return}let{path:Te,submission:Be,error:mt}=_y(p.v7_normalizeFormMethod,!0,xe,he);if(mt){$e(j,$,mt,{flushSync:_e});return}let Ce=em(me,Te);if(T=(he&&he.preventScrollReset)===!0,Be&&Fr(Be.formMethod)){W(j,$,Te,Ce,me,_e,Be);return}Re.set(j,{routeId:$,path:Te}),X(j,$,Te,Ce,me,_e,Be)}async function W(j,$,ee,he,_e,De,xe){if(se(),Re.delete(j),!he.route.action&&!he.route.lazy){let ot=yr(405,{method:xe.formMethod,pathname:ee,routeId:$});$e(j,$,ot,{flushSync:De});return}let me=z.fetchers.get(j);de(j,xx(xe,me),{flushSync:De});let Te=new AbortController,Be=Bl(t.history,ee,Te.signal,xe);Ae.set(j,Te);let mt=Y,Ce=await zl("action",Be,he,_e,o,i,d,p.v7_relativeSplatPath);if(Be.signal.aborted){Ae.get(j)===Te&&Ae.delete(j);return}if(p.v7_fetcherPersist&&ze.has(j)){if(po(Ce)||wa(Ce)){de(j,ps(void 0));return}}else{if(po(Ce))if(Ae.delete(j),we>mt){de(j,ps(void 0));return}else return Ee.add(j),de(j,jl(xe)),ue(z,Ce,{fetcherSubmission:xe});if(wa(Ce)){$e(j,$,Ce.error);return}}if(fo(Ce))throw yr(400,{type:"defer-action"});let le=z.navigation.location||z.location,ht=Bl(t.history,le,Te.signal),un=c||l,Pt=z.navigation.state!=="idle"?ya(un,z.navigation.location,d):z.matches;Ye(Pt,"Didn't find any matches after fetcher action");let Un=++Y;re.set(j,Un);let Gr=jl(xe,Ce.data);z.fetchers.set(j,Gr);let[Qn,zt]=vy(t.history,z,Pt,xe,le,!1,Ie,Je,We,ze,Re,Ee,un,d,{[he.route.id]:Ce.data},void 0);zt.filter(ot=>ot.key!==j).forEach(ot=>{let cn=ot.key,gi=z.fetchers.get(cn),Js=jl(void 0,gi?gi.data:void 0);z.fetchers.set(cn,Js),Ae.has(cn)&&kn(cn),ot.controller&&Ae.set(cn,ot.controller)}),_t({fetchers:new Map(z.fetchers)});let Qt=()=>zt.forEach(ot=>kn(ot.key));Te.signal.addEventListener("abort",Qt);let{results:ns,loaderResults:rs,fetcherResults:mi}=await ae(z.matches,Pt,Qn,zt,ht);if(Te.signal.aborted)return;Te.signal.removeEventListener("abort",Qt),re.delete(j),Ae.delete(j),zt.forEach(ot=>Ae.delete(ot.key));let hr=Py(ns);if(hr){if(hr.idx>=Qn.length){let ot=zt[hr.idx-Qn.length].key;Ee.add(ot)}return ue(z,hr.result)}let{loaderData:Qr,errors:it}=Ty(z,z.matches,Qn,rs,void 0,zt,mi,be);if(z.fetchers.has(j)){let ot=ps(Ce.data);z.fetchers.set(j,ot)}cr(Un),z.navigation.state==="loading"&&Un>we?(Ye(P,"Expected pending action"),A&&A.abort(),an(z.navigation.location,{matches:Pt,loaderData:Qr,errors:it,fetchers:new Map(z.fetchers)})):(_t({errors:it,loaderData:Iy(z.loaderData,Qr,Pt,it),fetchers:new Map(z.fetchers)}),Ie=!1)}async function X(j,$,ee,he,_e,De,xe){let me=z.fetchers.get(j);de(j,jl(xe,me?me.data:void 0),{flushSync:De});let Te=new AbortController,Be=Bl(t.history,ee,Te.signal);Ae.set(j,Te);let mt=Y,Ce=await zl("loader",Be,he,_e,o,i,d,p.v7_relativeSplatPath);if(fo(Ce)&&(Ce=await L1(Ce,Be.signal,!0)||Ce),Ae.get(j)===Te&&Ae.delete(j),!Be.signal.aborted){if(ze.has(j)){de(j,ps(void 0));return}if(po(Ce))if(we>mt){de(j,ps(void 0));return}else{Ee.add(j),await ue(z,Ce);return}if(wa(Ce)){$e(j,$,Ce.error);return}Ye(!fo(Ce),"Unhandled fetcher deferred data"),de(j,ps(Ce.data))}}async function ue(j,$,ee){let{submission:he,fetcherSubmission:_e,replace:De}=ee===void 0?{}:ee;$.revalidate&&(Ie=!0);let xe=Fu(j.location,$.location,{_isRedirect:!0});if(Ye(xe,"Expected a location on the redirect navigation"),n){let le=!1;if($.reloadDocument)le=!0;else if(x1.test($.location)){const ht=t.history.createURL($.location);le=ht.origin!==e.location.origin||Ja(ht.pathname,d)==null}if(le){De?e.location.replace($.location):e.location.assign($.location);return}}A=null;let me=De===!0?Ht.Replace:Ht.Push,{formMethod:Te,formAction:Be,formEncType:mt}=j.navigation;!he&&!_e&&Te&&Be&&mt&&(he=xy(j.navigation));let Ce=he||_e;if(px.has($.status)&&Ce&&Fr(Ce.formMethod))await Rn(me,xe,{submission:Mt({},Ce,{formAction:$.location}),preventScrollReset:T});else{let le=jf(xe,he);await Rn(me,xe,{overrideNavigation:le,fetcherSubmission:_e,preventScrollReset:T})}}async function ae(j,$,ee,he,_e){let De=await Promise.all([...ee.map(Te=>zl("loader",_e,Te,$,o,i,d,p.v7_relativeSplatPath)),...he.map(Te=>Te.matches&&Te.match&&Te.controller?zl("loader",Bl(t.history,Te.path,Te.controller.signal),Te.match,Te.matches,o,i,d,p.v7_relativeSplatPath):{type:Nt.error,error:yr(404,{pathname:Te.path})})]),xe=De.slice(0,ee.length),me=De.slice(ee.length);return await Promise.all([Ay(j,ee,xe,xe.map(()=>_e.signal),!1,z.loaderData),Ay(j,he.map(Te=>Te.match),me,he.map(Te=>Te.controller?Te.controller.signal:null),!0)]),{results:De,loaderResults:xe,fetcherResults:me}}function se(){Ie=!0,Je.push(...kr()),Re.forEach((j,$)=>{Ae.has($)&&(We.push($),kn($))})}function de(j,$,ee){ee===void 0&&(ee={}),z.fetchers.set(j,$),_t({fetchers:new Map(z.fetchers)},{flushSync:(ee&&ee.flushSync)===!0})}function $e(j,$,ee,he){he===void 0&&(he={});let _e=fu(z.matches,$);He(j),_t({errors:{[_e.route.id]:ee},fetchers:new Map(z.fetchers)},{flushSync:(he&&he.flushSync)===!0})}function qe(j){return p.v7_fetcherPersist&&(Ve.set(j,(Ve.get(j)||0)+1),ze.has(j)&&ze.delete(j)),z.fetchers.get(j)||mx}function He(j){let $=z.fetchers.get(j);Ae.has(j)&&!($&&$.state==="loading"&&re.has(j))&&kn(j),Re.delete(j),re.delete(j),Ee.delete(j),ze.delete(j),z.fetchers.delete(j)}function ln(j){if(p.v7_fetcherPersist){let $=(Ve.get(j)||0)-1;$<=0?(Ve.delete(j),ze.add(j)):Ve.set(j,$)}else He(j);_t({fetchers:new Map(z.fetchers)})}function kn(j){let $=Ae.get(j);Ye($,"Expected fetch controller: "+j),$.abort(),Ae.delete(j)}function ur(j){for(let $ of j){let ee=qe($),he=ps(ee.data);z.fetchers.set($,he)}}function Cr(){let j=[],$=!1;for(let ee of Ee){let he=z.fetchers.get(ee);Ye(he,"Expected fetcher: "+ee),he.state==="loading"&&(Ee.delete(ee),j.push(ee),$=!0)}return ur(j),$}function cr(j){let $=[];for(let[ee,he]of re)if(he<j){let _e=z.fetchers.get(ee);Ye(_e,"Expected fetcher: "+ee),_e.state==="loading"&&(kn(ee),re.delete(ee),$.push(ee))}return ur($),$.length>0}function Kr(j,$){let ee=z.blockers.get(j)||Ul;return Se.get(j)!==$&&Se.set(j,$),ee}function Rr(j){z.blockers.delete(j),Se.delete(j)}function Fn(j,$){let ee=z.blockers.get(j)||Ul;Ye(ee.state==="unblocked"&&$.state==="blocked"||ee.state==="blocked"&&$.state==="blocked"||ee.state==="blocked"&&$.state==="proceeding"||ee.state==="blocked"&&$.state==="unblocked"||ee.state==="proceeding"&&$.state==="unblocked","Invalid blocker state transition: "+ee.state+" -> "+$.state);let he=new Map(z.blockers);he.set(j,$),_t({blockers:he})}function Fo(j){let{currentLocation:$,nextLocation:ee,historyAction:he}=j;if(Se.size===0)return;Se.size>1&&So(!1,"A router only supports one blocker at a time");let _e=Array.from(Se.entries()),[De,xe]=_e[_e.length-1],me=z.blockers.get(De);if(!(me&&me.state==="proceeding")&&xe({currentLocation:$,nextLocation:ee,historyAction:he}))return De}function kr(j){let $=[];return be.forEach((ee,he)=>{(!j||j(he))&&(ee.cancel(),$.push(he),be.delete(he))}),$}function Qs(j,$,ee){if(E=j,F=$,k=ee||null,!V&&z.navigation===Bf){V=!0;let he=Lr(z.location,z.matches);he!=null&&_t({restoreScrollPosition:he})}return()=>{E=null,F=null,k=null}}function Ys(j,$){return k&&k(j,$.map(he=>HA(he,z.loaderData)))||j.key}function Xs(j,$){if(E&&F){let ee=Ys(j,$);E[ee]=F()}}function Lr(j,$){if(E){let ee=Ys(j,$),he=E[ee];if(typeof he=="number")return he}return null}function ts(j){o={},c=Yp(j,i,void 0,o)}return J={get basename(){return d},get future(){return p},get state(){return z},get routes(){return l},get window(){return e},initialize:vn,subscribe:lr,enableScrollRestoration:Qs,navigate:Gn,fetch:U,revalidate:Zr,createHref:j=>t.history.createHref(j),encodeLocation:j=>t.history.encodeLocation(j),getFetcher:qe,deleteFetcher:ln,dispose:pi,getBlocker:Kr,deleteBlocker:Rr,_internalFetchControllers:Ae,_internalActiveDeferreds:be,_internalSetRoutes:ts},J}function vx(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Xp(t,e,n,r,i,o,l,c){let d,p;if(l){d=[];for(let y of e)if(d.push(y),y.route.id===l){p=y;break}}else d=e,p=e[e.length-1];let g=Ag(i||".",Pg(d,o),Ja(t.pathname,n)||t.pathname,c==="path");return i==null&&(g.search=t.search,g.hash=t.hash),(i==null||i===""||i===".")&&p&&p.route.index&&!Cg(g.search)&&(g.search=g.search?g.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(g.pathname=g.pathname==="/"?n:Oi([n,g.pathname])),Po(g)}function _y(t,e,n,r){if(!r||!vx(r))return{path:n};if(r.formMethod&&!Px(r.formMethod))return{path:n,error:yr(405,{method:r.formMethod})};let i=()=>({path:n,error:yr(400,{type:"invalid-body"})}),o=r.formMethod||"get",l=t?o.toUpperCase():o.toLowerCase(),c=k1(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Fr(l))return i();let E=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((k,F)=>{let[V,B]=F;return""+k+V+"="+B+`
`},""):String(r.body);return{path:n,submission:{formMethod:l,formAction:c,formEncType:r.formEncType,formData:void 0,json:void 0,text:E}}}else if(r.formEncType==="application/json"){if(!Fr(l))return i();try{let E=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:l,formAction:c,formEncType:r.formEncType,formData:void 0,json:E,text:void 0}}}catch{return i()}}}Ye(typeof FormData=="function","FormData is not available in this environment");let d,p;if(r.formData)d=Jp(r.formData),p=r.formData;else if(r.body instanceof FormData)d=Jp(r.body),p=r.body;else if(r.body instanceof URLSearchParams)d=r.body,p=Ey(d);else if(r.body==null)d=new URLSearchParams,p=new FormData;else try{d=new URLSearchParams(r.body),p=Ey(d)}catch{return i()}let g={formMethod:l,formAction:c,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(Fr(g.formMethod))return{path:n,submission:g};let y=Zs(n);return e&&y.search&&Cg(y.search)&&d.append("index",""),y.search="?"+d,{path:Po(y),submission:g}}function yx(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function vy(t,e,n,r,i,o,l,c,d,p,g,y,E,k,F,V){let B=V?Object.values(V)[0]:F?Object.values(F)[0]:void 0,C=t.createURL(e.location),S=t.createURL(i),b=V?Object.keys(V)[0]:void 0,J=yx(n,b).filter((P,T)=>{let{route:A}=P;if(A.lazy)return!0;if(A.loader==null)return!1;if(o)return A.loader.hydrate?!0:e.loaderData[A.id]===void 0&&(!e.errors||e.errors[A.id]===void 0);if(wx(e.loaderData,e.matches[T],P)||c.some(N=>N===P.route.id))return!0;let R=e.matches[T],D=P;return yy(P,Mt({currentUrl:C,currentParams:R.params,nextUrl:S,nextParams:D.params},r,{actionResult:B,defaultShouldRevalidate:l||C.pathname+C.search===S.pathname+S.search||C.search!==S.search||R1(R,D)}))}),z=[];return g.forEach((P,T)=>{if(o||!n.some(x=>x.route.id===P.routeId)||p.has(T))return;let A=ya(E,P.path,k);if(!A){z.push({key:T,routeId:P.routeId,path:P.path,matches:null,match:null,controller:null});return}let R=e.fetchers.get(T),D=em(A,P.path),N=!1;y.has(T)?N=!1:d.includes(T)?N=!0:R&&R.state!=="idle"&&R.data===void 0?N=l:N=yy(D,Mt({currentUrl:C,currentParams:e.matches[e.matches.length-1].params,nextUrl:S,nextParams:n[n.length-1].params},r,{actionResult:B,defaultShouldRevalidate:l})),N&&z.push({key:T,routeId:P.routeId,path:P.path,matches:A,match:D,controller:new AbortController})}),[J,z]}function wx(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function R1(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function yy(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function wy(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Ye(i,"No route found in manifest");let o={};for(let l in r){let d=i[l]!==void 0&&l!=="hasErrorBoundary";So(!d,'Route "'+i.id+'" has a static property "'+l+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+l+'" will be ignored.')),!d&&!jA.has(l)&&(o[l]=r[l])}Object.assign(i,o),Object.assign(i,Mt({},e(i),{lazy:void 0}))}async function zl(t,e,n,r,i,o,l,c,d){d===void 0&&(d={});let p,g,y,E=V=>{let B,C=new Promise((S,b)=>B=b);return y=()=>B(),e.signal.addEventListener("abort",y),Promise.race([V({request:e,params:n.params,context:d.requestContext}),C])};try{let V=n.route[t];if(n.route.lazy)if(V){let B,C=await Promise.all([E(V).catch(S=>{B=S}),wy(n.route,o,i)]);if(B)throw B;g=C[0]}else if(await wy(n.route,o,i),V=n.route[t],V)g=await E(V);else if(t==="action"){let B=new URL(e.url),C=B.pathname+B.search;throw yr(405,{method:e.method,pathname:C,routeId:n.route.id})}else return{type:Nt.data,data:void 0};else if(V)g=await E(V);else{let B=new URL(e.url),C=B.pathname+B.search;throw yr(404,{pathname:C})}Ye(g!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(V){p=Nt.error,g=V}finally{y&&e.signal.removeEventListener("abort",y)}if(Sx(g)){let V=g.status;if(fx.has(V)){let C=g.headers.get("Location");if(Ye(C,"Redirects returned/thrown from loaders/actions must have a Location header"),!x1.test(C))C=Xp(new URL(e.url),r.slice(0,r.indexOf(n)+1),l,!0,C,c);else if(!d.isStaticRequest){let S=new URL(e.url),b=C.startsWith("//")?new URL(S.protocol+C):new URL(C),Z=Ja(b.pathname,l)!=null;b.origin===S.origin&&Z&&(C=b.pathname+b.search+b.hash)}if(d.isStaticRequest)throw g.headers.set("Location",C),g;return{type:Nt.redirect,status:V,location:C,revalidate:g.headers.get("X-Remix-Revalidate")!==null,reloadDocument:g.headers.get("X-Remix-Reload-Document")!==null}}if(d.isRouteRequest)throw{type:p===Nt.error?Nt.error:Nt.data,response:g};let B;try{let C=g.headers.get("Content-Type");C&&/\bapplication\/json\b/.test(C)?g.body==null?B=null:B=await g.json():B=await g.text()}catch(C){return{type:Nt.error,error:C}}return p===Nt.error?{type:p,error:new xg(V,g.statusText,B),headers:g.headers}:{type:Nt.data,data:B,statusCode:g.status,headers:g.headers}}if(p===Nt.error)return{type:p,error:g};if(Ix(g)){var k,F;return{type:Nt.deferred,deferredData:g,statusCode:(k=g.init)==null?void 0:k.status,headers:((F=g.init)==null?void 0:F.headers)&&new Headers(g.init.headers)}}return{type:Nt.data,data:g}}function Bl(t,e,n,r){let i=t.createURL(k1(e)).toString(),o={signal:n};if(r&&Fr(r.formMethod)){let{formMethod:l,formEncType:c}=r;o.method=l.toUpperCase(),c==="application/json"?(o.headers=new Headers({"Content-Type":c}),o.body=JSON.stringify(r.json)):c==="text/plain"?o.body=r.text:c==="application/x-www-form-urlencoded"&&r.formData?o.body=Jp(r.formData):o.body=r.formData}return new Request(i,o)}function Jp(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Ey(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function Ex(t,e,n,r,i){let o={},l=null,c,d=!1,p={};return n.forEach((g,y)=>{let E=e[y].route.id;if(Ye(!po(g),"Cannot handle redirect results in processLoaderData"),wa(g)){let k=fu(t,E),F=g.error;r&&(F=Object.values(r)[0],r=void 0),l=l||{},l[k.route.id]==null&&(l[k.route.id]=F),o[E]=void 0,d||(d=!0,c=P1(g.error)?g.error.status:500),g.headers&&(p[E]=g.headers)}else fo(g)?(i.set(E,g.deferredData),o[E]=g.deferredData.data):o[E]=g.data,g.statusCode!=null&&g.statusCode!==200&&!d&&(c=g.statusCode),g.headers&&(p[E]=g.headers)}),r&&(l=r,o[Object.keys(r)[0]]=void 0),{loaderData:o,errors:l,statusCode:c||200,loaderHeaders:p}}function Ty(t,e,n,r,i,o,l,c){let{loaderData:d,errors:p}=Ex(e,n,r,i,c);for(let g=0;g<o.length;g++){let{key:y,match:E,controller:k}=o[g];Ye(l!==void 0&&l[g]!==void 0,"Did not find corresponding fetcher result");let F=l[g];if(!(k&&k.signal.aborted))if(wa(F)){let V=fu(t.matches,E==null?void 0:E.route.id);p&&p[V.route.id]||(p=Mt({},p,{[V.route.id]:F.error})),t.fetchers.delete(y)}else if(po(F))Ye(!1,"Unhandled fetcher revalidation redirect");else if(fo(F))Ye(!1,"Unhandled fetcher deferred data");else{let V=ps(F.data);t.fetchers.set(y,V)}}return{loaderData:d,errors:p}}function Iy(t,e,n,r){let i=Mt({},e);for(let o of n){let l=o.route.id;if(e.hasOwnProperty(l)?e[l]!==void 0&&(i[l]=e[l]):t[l]!==void 0&&o.route.loader&&(i[l]=t[l]),r&&r.hasOwnProperty(l))break}return i}function fu(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Sy(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function yr(t,e){let{pathname:n,routeId:r,method:i,type:o}=e===void 0?{}:e,l="Unknown Server Error",c="Unknown @remix-run/router error";return t===400?(l="Bad Request",i&&n&&r?c="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":o==="defer-action"?c="defer() is not supported in actions":o==="invalid-body"&&(c="Unable to encode submission body")):t===403?(l="Forbidden",c='Route "'+r+'" does not match URL "'+n+'"'):t===404?(l="Not Found",c='No route matches URL "'+n+'"'):t===405&&(l="Method Not Allowed",i&&n&&r?c="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(c='Invalid request method "'+i.toUpperCase()+'"')),new xg(t||500,l,new Error(c),!0)}function Py(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(po(n))return{result:n,idx:e}}}function k1(t){let e=typeof t=="string"?Zs(t):t;return Po(Mt({},e,{hash:""}))}function Tx(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function fo(t){return t.type===Nt.deferred}function wa(t){return t.type===Nt.error}function po(t){return(t&&t.type)===Nt.redirect}function Ix(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function Sx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function Px(t){return dx.has(t.toLowerCase())}function Fr(t){return cx.has(t.toLowerCase())}async function Ay(t,e,n,r,i,o){for(let l=0;l<n.length;l++){let c=n[l],d=e[l];if(!d)continue;let p=t.find(y=>y.route.id===d.route.id),g=p!=null&&!R1(p,d)&&(o&&o[d.route.id])!==void 0;if(fo(c)&&(i||g)){let y=r[l];Ye(y,"Expected an AbortSignal for revalidating fetcher deferred result"),await L1(c,y,i).then(E=>{E&&(n[l]=E||n[l])})}}}async function L1(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Nt.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Nt.error,error:i}}return{type:Nt.data,data:t.deferredData.data}}}function Cg(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function em(t,e){let n=typeof e=="string"?Zs(e).search:e.search;if(t[t.length-1].route.index&&Cg(n||""))return t[t.length-1];let r=S1(t);return r[r.length-1]}function xy(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:o,json:l}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:e,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(l!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:l,text:void 0}}}function jf(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Ax(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function jl(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function xx(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function ps(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Cx(t,e){try{let n=t.sessionStorage.getItem(C1);if(n){let r=JSON.parse(n);for(let[i,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(i,new Set(o||[]))}}catch{}}function Rx(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(C1,JSON.stringify(n))}catch(r){So(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.21.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nd(){return nd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nd.apply(this,arguments)}const Ud=Q.createContext(null),b1=Q.createContext(null),No=Q.createContext(null),Rg=Q.createContext(null),Ks=Q.createContext({outlet:null,matches:[],isDataRoute:!1}),N1=Q.createContext(null);function kx(t,e){let{relative:n}=e===void 0?{}:e;ic()||Ye(!1);let{basename:r,navigator:i}=Q.useContext(No),{hash:o,pathname:l,search:c}=M1(t,{relative:n}),d=l;return r!=="/"&&(d=l==="/"?r:Oi([r,l])),i.createHref({pathname:d,search:c,hash:o})}function ic(){return Q.useContext(Rg)!=null}function zd(){return ic()||Ye(!1),Q.useContext(Rg).location}function D1(t){Q.useContext(No).static||Q.useLayoutEffect(t)}function Lx(){let{isDataRoute:t}=Q.useContext(Ks);return t?Hx():bx()}function bx(){ic()||Ye(!1);let t=Q.useContext(Ud),{basename:e,future:n,navigator:r}=Q.useContext(No),{matches:i}=Q.useContext(Ks),{pathname:o}=zd(),l=JSON.stringify(Pg(i,n.v7_relativeSplatPath)),c=Q.useRef(!1);return D1(()=>{c.current=!0}),Q.useCallback(function(p,g){if(g===void 0&&(g={}),!c.current)return;if(typeof p=="number"){r.go(p);return}let y=Ag(p,JSON.parse(l),o,g.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Oi([e,y.pathname])),(g.replace?r.replace:r.push)(y,g.state,g)},[e,r,l,o,t])}function Nx(){let{matches:t}=Q.useContext(Ks),e=t[t.length-1];return e?e.params:{}}function M1(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=Q.useContext(No),{matches:i}=Q.useContext(Ks),{pathname:o}=zd(),l=JSON.stringify(Pg(i,r.v7_relativeSplatPath));return Q.useMemo(()=>Ag(t,JSON.parse(l),o,n==="path"),[t,l,o,n])}function Dx(t,e,n,r){ic()||Ye(!1);let{navigator:i}=Q.useContext(No),{matches:o}=Q.useContext(Ks),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let p=zd(),g;g=p;let y=g.pathname||"/",E=d==="/"?y:y.slice(d.length)||"/",k=ya(t,{pathname:E});return Ux(k&&k.map(V=>Object.assign({},V,{params:Object.assign({},c,V.params),pathname:Oi([d,i.encodeLocation?i.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?d:Oi([d,i.encodeLocation?i.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),o,n,r)}function Mx(){let t=qx(),e=P1(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),n?Q.createElement("pre",{style:i},n):null,null)}const Ox=Q.createElement(Mx,null);class Vx extends Q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?Q.createElement(Ks.Provider,{value:this.props.routeContext},Q.createElement(N1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Fx(t){let{routeContext:e,match:n,children:r}=t,i=Q.useContext(Ud);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),Q.createElement(Ks.Provider,{value:e},r)}function Ux(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if((o=n)!=null&&o.errors)t=n.matches;else return null}let l=t,c=(i=n)==null?void 0:i.errors;if(c!=null){let g=l.findIndex(y=>y.route.id&&(c==null?void 0:c[y.route.id]));g>=0||Ye(!1),l=l.slice(0,Math.min(l.length,g+1))}let d=!1,p=-1;if(n&&r&&r.v7_partialHydration)for(let g=0;g<l.length;g++){let y=l[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=g),y.route.id){let{loaderData:E,errors:k}=n,F=y.route.loader&&E[y.route.id]===void 0&&(!k||k[y.route.id]===void 0);if(y.route.lazy||F){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((g,y,E)=>{let k,F=!1,V=null,B=null;n&&(k=c&&y.route.id?c[y.route.id]:void 0,V=y.route.errorElement||Ox,d&&(p<0&&E===0?(F=!0,B=null):p===E&&(F=!0,B=y.route.hydrateFallbackElement||null)));let C=e.concat(l.slice(0,E+1)),S=()=>{let b;return k?b=V:F?b=B:y.route.Component?b=Q.createElement(y.route.Component,null):y.route.element?b=y.route.element:b=g,Q.createElement(Fx,{match:y,routeContext:{outlet:g,matches:C,isDataRoute:n!=null},children:b})};return n&&(y.route.ErrorBoundary||y.route.errorElement||E===0)?Q.createElement(Vx,{location:n.location,revalidation:n.revalidation,component:V,error:k,children:S(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):S()},null)}var O1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(O1||{}),rd=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(rd||{});function zx(t){let e=Q.useContext(Ud);return e||Ye(!1),e}function Bx(t){let e=Q.useContext(b1);return e||Ye(!1),e}function jx(t){let e=Q.useContext(Ks);return e||Ye(!1),e}function V1(t){let e=jx(),n=e.matches[e.matches.length-1];return n.route.id||Ye(!1),n.route.id}function qx(){var t;let e=Q.useContext(N1),n=Bx(rd.UseRouteError),r=V1(rd.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Hx(){let{router:t}=zx(O1.UseNavigateStable),e=V1(rd.UseNavigateStable),n=Q.useRef(!1);return D1(()=>{n.current=!0}),Q.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,nd({fromRouteId:e},o)))},[t,e])}function $x(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ht.Pop,navigator:o,static:l=!1,future:c}=t;ic()&&Ye(!1);let d=e.replace(/^\/*/,"/"),p=Q.useMemo(()=>({basename:d,navigator:o,static:l,future:nd({v7_relativeSplatPath:!1},c)}),[d,c,o,l]);typeof r=="string"&&(r=Zs(r));let{pathname:g="/",search:y="",hash:E="",state:k=null,key:F="default"}=r,V=Q.useMemo(()=>{let B=Ja(g,d);return B==null?null:{location:{pathname:B,search:y,hash:E,state:k,key:F},navigationType:i}},[d,g,y,E,k,F,i]);return V==null?null:Q.createElement(No.Provider,{value:p},Q.createElement(Rg.Provider,{children:n,value:V}))}new Promise(()=>{});function Wx(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:Q.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:Q.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:Q.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.21.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uu(){return Uu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uu.apply(this,arguments)}function Zx(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Kx(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Gx(t,e){return t.button===0&&(!e||e==="_self")&&!Kx(t)}const Qx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];function Yx(t,e){return _x({basename:void 0,future:Uu({},void 0,{v7_prependBasename:!0}),history:UA({window:void 0}),hydrationData:Xx(),routes:t,mapRouteProperties:Wx,window:void 0}).initialize()}function Xx(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Uu({},e,{errors:Jx(e.errors)})),e}function Jx(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new xg(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let l=new o(i.message);l.stack="",n[r]=l}catch{}}if(n[r]==null){let o=new Error(i.message);o.stack="",n[r]=o}}else n[r]=i;return n}const eC=Q.createContext({isTransitioning:!1}),tC=Q.createContext(new Map),nC="startTransition",Cy=AS[nC],rC="flushSync",Ry=FA[rC];function iC(t){Cy?Cy(t):t()}function ql(t){Ry?Ry(t):t()}let sC=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function oC(t){let{fallbackElement:e,router:n,future:r}=t,[i,o]=Q.useState(n.state),[l,c]=Q.useState(),[d,p]=Q.useState({isTransitioning:!1}),[g,y]=Q.useState(),[E,k]=Q.useState(),[F,V]=Q.useState(),B=Q.useRef(new Map),{v7_startTransition:C}=r||{},S=Q.useCallback(P=>{C?iC(P):P()},[C]),b=Q.useCallback((P,T)=>{let{deletedFetchers:A,unstable_flushSync:R,unstable_viewTransitionOpts:D}=T;A.forEach(x=>B.current.delete(x)),P.fetchers.forEach((x,Ie)=>{x.data!==void 0&&B.current.set(Ie,x.data)});let N=n.window==null||typeof n.window.document.startViewTransition!="function";if(!D||N){R?ql(()=>o(P)):S(()=>o(P));return}if(R){ql(()=>{E&&(g&&g.resolve(),E.skipTransition()),p({isTransitioning:!0,flushSync:!0,currentLocation:D.currentLocation,nextLocation:D.nextLocation})});let x=n.window.document.startViewTransition(()=>{ql(()=>o(P))});x.finished.finally(()=>{ql(()=>{y(void 0),k(void 0),c(void 0),p({isTransitioning:!1})})}),ql(()=>k(x));return}E?(g&&g.resolve(),E.skipTransition(),V({state:P,currentLocation:D.currentLocation,nextLocation:D.nextLocation})):(c(P),p({isTransitioning:!0,flushSync:!1,currentLocation:D.currentLocation,nextLocation:D.nextLocation}))},[n.window,E,g,B,S]);Q.useLayoutEffect(()=>n.subscribe(b),[n,b]),Q.useEffect(()=>{d.isTransitioning&&!d.flushSync&&y(new sC)},[d]),Q.useEffect(()=>{if(g&&l&&n.window){let P=l,T=g.promise,A=n.window.document.startViewTransition(async()=>{S(()=>o(P)),await T});A.finished.finally(()=>{y(void 0),k(void 0),c(void 0),p({isTransitioning:!1})}),k(A)}},[S,l,g,n.window]),Q.useEffect(()=>{g&&l&&i.location.key===l.location.key&&g.resolve()},[g,E,i.location,l]),Q.useEffect(()=>{!d.isTransitioning&&F&&(c(F.state),p({isTransitioning:!0,flushSync:!1,currentLocation:F.currentLocation,nextLocation:F.nextLocation}),V(void 0))},[d.isTransitioning,F]),Q.useEffect(()=>{},[]);let Z=Q.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:P=>n.navigate(P),push:(P,T,A)=>n.navigate(P,{state:T,preventScrollReset:A==null?void 0:A.preventScrollReset}),replace:(P,T,A)=>n.navigate(P,{replace:!0,state:T,preventScrollReset:A==null?void 0:A.preventScrollReset})}),[n]),J=n.basename||"/",z=Q.useMemo(()=>({router:n,navigator:Z,static:!1,basename:J}),[n,Z,J]);return Q.createElement(Q.Fragment,null,Q.createElement(Ud.Provider,{value:z},Q.createElement(b1.Provider,{value:i},Q.createElement(tC.Provider,{value:B.current},Q.createElement(eC.Provider,{value:d},Q.createElement($x,{basename:J,location:i.location,navigationType:i.historyAction,navigator:Z,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?Q.createElement(aC,{routes:n.routes,future:n.future,state:i}):e))))),null)}function aC(t){let{routes:e,future:n,state:r}=t;return Dx(e,void 0,r,n)}const lC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tm=Q.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:l,state:c,target:d,to:p,preventScrollReset:g,unstable_viewTransition:y}=e,E=Zx(e,Qx),{basename:k}=Q.useContext(No),F,V=!1;if(typeof p=="string"&&uC.test(p)&&(F=p,lC))try{let b=new URL(window.location.href),Z=p.startsWith("//")?new URL(b.protocol+p):new URL(p),J=Ja(Z.pathname,k);Z.origin===b.origin&&J!=null?p=J+Z.search+Z.hash:V=!0}catch{}let B=kx(p,{relative:i}),C=cC(p,{replace:l,state:c,target:d,preventScrollReset:g,relative:i,unstable_viewTransition:y});function S(b){r&&r(b),b.defaultPrevented||C(b)}return Q.createElement("a",Uu({},E,{href:F||B,onClick:V||o?r:S,ref:n,target:d}))});var ky;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ky||(ky={}));var Ly;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ly||(Ly={}));function cC(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:l,unstable_viewTransition:c}=e===void 0?{}:e,d=Lx(),p=zd(),g=M1(t,{relative:l});return Q.useCallback(y=>{if(Gx(y,n)){y.preventDefault();let E=r!==void 0?r:Po(p)===Po(g);d(t,{replace:E,state:i,preventScrollReset:o,relative:l,unstable_viewTransition:c})}},[p,d,g,r,i,n,t,o,l,c])}var F1={exports:{}},hC="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",dC=hC,fC=dC;function U1(){}function z1(){}z1.resetWarningCache=U1;var pC=function(){function t(r,i,o,l,c,d){if(d!==fC){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:z1,resetWarningCache:U1};return n.PropTypes=n,n};F1.exports=pC();var Sr=F1.exports;const $t=Rm(Sr);function Ql({image:t,text:e}){return M.jsxs("div",{className:"feature",children:[M.jsx("img",{src:t}),M.jsx("p",{children:e})]})}Ql.propTypes={image:$t.any,text:$t.string};const mC="/assets/StreetSmart-GWJqceuO.png",gC="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='40px'%20viewBox='0%20-960%20960%20960'%20width='40px'%20fill='%23000000'%3e%3cpath%20d='M277.69-100v-43.85q-23.75%200-40.72-16.94Q220-177.74%20220-201.54v-440.77q0-23.5%2017.1-40.59%2017.09-17.1%2040.59-17.1h104.23v-112.31q0-12.46%209.35-22%209.35-9.53%2022.19-9.53h133.08q12.84%200%2022.38%209.53%209.54%209.54%209.54%2022V-700h103.85q23.5%200%2040.59%2017.1%2017.1%2017.09%2017.1%2040.59v440.77q0%2023.8-17.1%2040.75-17.09%2016.94-40.59%2016.94V-100h-45.39v-43.85H323.08V-100h-45.39Zm149.62-600h105.77v-98.46H427.31V-700ZM480-476.15q56.41%200%20111.4-13%2054.98-13%20103.21-42.85v-110.31q0-5.38-3.46-8.84t-8.84-3.46H277.69q-5.38%200-8.84%203.46t-3.46%208.84V-532q48.23%2029.85%20103.21%2042.85%2054.99%2013%20111.4%2013Zm-22.69%2089.23v-40.62q-51.39-2.61-99.77-15.92-48.39-13.31-92.15-39.31v281.23q0%205.39%203.46%208.85t8.84%203.46h404.62q5.38%200%208.84-3.46t3.46-8.85v-281.23q-43.76%2026-92.15%2039.31-48.38%2013.31-99.77%2015.92v40.62h-45.38Zm22.69%200Zm0-89.23Zm0-6.62Z'/%3e%3c/svg%3e",_C="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23000000'%3e%3cpath%20d='M483-120q-75%200-141-28.5T226.5-226q-49.5-49-78-115T120-482q0-75%2028.5-140t78-113.5Q276-784%20342-812t141-28q80%200%20151.5%2035T758-709v-106h60v208H609v-60h105q-44-51-103.5-82T483-780q-125%200-214%2085.5T180-485q0%20127%2088%20216t215%2089q125%200%20211-88t86-213h60q0%20150-104%20255.5T483-120Zm122-197L451-469v-214h60v189l137%20134-43%2043Z'/%3e%3c/svg%3e",vC="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23000000'%3e%3cpath%20d='M69.23-69.23%20135.08-300q-19.62-42.23-29.58-86.72-9.96-44.49-9.96-91.05%200-79.46%2029.92-148.81%2029.92-69.35%2082.02-121.46%2052.1-52.11%20121.43-82.03Q398.25-860%20477.7-860q79.45%200%20148.82%2029.92%2069.37%2029.92%20121.49%2082.02%2052.12%2052.1%2082.06%20121.44Q860-557.29%20860-477.84t-29.93%20148.82q-29.92%2069.37-82.03%20121.49-52.11%2052.12-121.46%2082.06-69.35%2029.93-148.81%2029.93-46.56%200-91.05-9.96-44.49-9.96-86.72-29.58L69.23-69.23Zm69.08-69.08%20135.31-38q16-4.61%2029.42-3.5%2013.42%201.12%2028.81%207.5%2034.84%2014.39%2071.5%2022.89t74.37%208.5q140.36%200%20238.63-98.19%2098.26-98.19%2098.26-238.58%200-140.39-98.18-238.66-98.19-98.26-238.58-98.26-140.39%200-238.66%2097.98-98.27%2097.98-98.27%20239.16%200%2037.93%206.27%2074.97t25.12%2070.65q7%2013.32%207.5%2028.59.5%2015.28-3.5%2029.64l-38%20135.31Zm316.77-188.84h45.38v-125.08h126.08v-45.38H500.46v-125.7h-45.38v125.7H329.39v45.38h125.69v125.08Zm21.69-149.62Z'/%3e%3c/svg%3e",yC="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23000000'%3e%3cpath%20d='M183.87-140q-18.8%200-31.33-12.43Q140-164.85%20140-183.49v-116.56q0-15.52%209.99-27.77%209.99-12.26%2025.81-16l101.66-21.76q13.85-2.03%2026.55%201.81%2012.71%203.85%2022.5%2014.44l90.44%2092.43q46.38-25.38%2086.84-55.92%2040.47-30.54%2076.36-67.1%2034.21-33.98%2063.61-72.22%2029.39-38.24%2054.68-82.48l-93.72-91.25q-8.67-8.16-11.85-20.13-3.18-11.97-1-27.52l23.54-110.68q3.98-15.62%2015.04-25.71Q641.52-820%20656.87-820h119.64q18.64%200%2031.06%2012.54Q820-794.93%20820-776.13q0%20108.62-53.32%20221.8T616.29-343.9q-97.06%2097.26-210.43%20150.58Q292.49-140%20183.87-140Zm538.95-440.97q22.59-52.23%2034.3-97.85%2011.7-45.62%2012.47-85.54%200-2.31-1.54-3.85-1.54-1.53-3.85-1.53h-94.25q-3.08%200-5.13%201.53-2.05%201.54-2.56%204.62l-20.57%2097.23q-.51%202.31.07%205%20.57%202.69%202.24%204.23l78.82%2076.16ZM369.54-233.13l-76.98-79.64q-1.92-1.92-3.65-2.5-1.73-.58-4.04.19l-88.46%2018.11q-3.08.51-4.62%202.56-1.53%202.05-1.53%205.13v93.48q0%202.31%201.53%203.85%201.54%201.54%203.85%201.54%2039.44-1.44%2086.24-12.27%2046.81-10.83%2087.66-30.45Zm353.28-347.84ZM369.54-233.13Z'/%3e%3c/svg%3e";var by={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},wC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],l=t[n++],c=t[n++],d=((i&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},kg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],l=i+1<t.length,c=l?t[i+1]:0,d=i+2<t.length,p=d?t[i+2]:0,g=o>>2,y=(o&3)<<4|c>>4;let E=(c&15)<<2|p>>6,k=p&63;d||(k=64,l||(E=64)),r.push(n[g],n[y],n[E],n[k])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(B1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):wC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const p=i<t.length?n[t.charAt(i)]:64;++i;const y=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||c==null||p==null||y==null)throw new EC;const E=o<<2|c>>4;if(r.push(E),p!==64){const k=c<<4&240|p>>2;if(r.push(k),y!==64){const F=p<<6&192|y;r.push(F)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class EC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TC=function(t){const e=B1(t);return kg.encodeByteArray(e,!0)},id=function(t){return TC(t).replace(/\./g,"")},j1=function(t){try{return kg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=()=>q1().__FIREBASE_DEFAULTS__,SC=()=>{if(typeof process>"u"||typeof by>"u")return;const t=by.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},PC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&j1(t[1]);return e&&JSON.parse(e)},Bd=()=>{try{return IC()||SC()||PC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},H1=t=>{var e,n;return(n=(e=Bd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},AC=t=>{const e=H1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$1=()=>{var t;return(t=Bd())===null||t===void 0?void 0:t.config},W1=t=>{var e;return(e=Bd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[id(JSON.stringify(n)),id(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xn())}function RC(){var t;const e=(t=Bd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function LC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bC(){const t=xn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function NC(){return!RC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lg(){try{return typeof indexedDB=="object"}catch{return!1}}function DC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="FirebaseError";class Yi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=MC,Object.setPrototypeOf(this,Yi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,el.prototype.create)}}class el{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?OC(o,r):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new Yi(i,c,r)}}function OC(t,e){return t.replace(VC,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const VC=/\{\$([^}]+)}/g;function FC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function sd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],l=e[i];if(Ny(o)&&Ny(l)){if(!sd(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ny(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Yl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Xl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function UC(t,e){const n=new zC(t,e);return n.subscribe.bind(n)}class zC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");BC(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=qf),i.error===void 0&&(i.error=qf),i.complete===void 0&&(i.complete=qf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function qf(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=1e3,HC=2,$C=4*60*60*1e3,WC=.5;function ZC(t,e=qC,n=HC){const r=e*Math.pow(n,t),i=Math.round(WC*r*(Math.random()-.5)*2);return Math.min($C,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(t){return t&&t._delegate?t._delegate:t}class $i{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new zu;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QC(e))try{this.getOrInitializeService({instanceIdentifier:lo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=lo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=lo){return this.instances.has(e)}getOptions(e=lo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:GC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=lo){return this.component?this.component.multipleInstances?e:lo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GC(t){return t===lo?void 0:t}function QC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new KC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(et||(et={}));const XC={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},JC=et.INFO,eR={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},tR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=eR[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jd{constructor(e){this.name=e,this._logLevel=JC,this._logHandler=tR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const nR=(t,e)=>e.some(n=>t instanceof n);let Dy,My;function rR(){return Dy||(Dy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iR(){return My||(My=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Z1=new WeakMap,nm=new WeakMap,K1=new WeakMap,Hf=new WeakMap,bg=new WeakMap;function sR(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Ms(t.result)),i()},l=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&Z1.set(n,t)}).catch(()=>{}),bg.set(e,t),e}function oR(t){if(nm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),i()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});nm.set(t,e)}let rm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return nm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||K1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ms(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function aR(t){rm=t(rm)}function lR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call($f(this),e,...n);return K1.set(r,e.sort?e.sort():[e]),Ms(r)}:iR().includes(t)?function(...e){return t.apply($f(this),e),Ms(Z1.get(this))}:function(...e){return Ms(t.apply($f(this),e))}}function uR(t){return typeof t=="function"?lR(t):(t instanceof IDBTransaction&&oR(t),nR(t,rR())?new Proxy(t,rm):t)}function Ms(t){if(t instanceof IDBRequest)return sR(t);if(Hf.has(t))return Hf.get(t);const e=uR(t);return e!==t&&(Hf.set(t,e),bg.set(e,t)),e}const $f=t=>bg.get(t);function cR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(t,e),c=Ms(l);return r&&l.addEventListener("upgradeneeded",d=>{r(Ms(l.result),d.oldVersion,d.newVersion,Ms(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{o&&d.addEventListener("close",()=>o()),i&&d.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}const hR=["get","getKey","getAll","getAllKeys","count"],dR=["put","add","delete","clear"],Wf=new Map;function Oy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wf.get(e))return Wf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=dR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||hR.includes(n)))return;const o=async function(l,...c){const d=this.transaction(l,i?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(c.shift())),(await Promise.all([p[n](...c),i&&d.done]))[0]};return Wf.set(e,o),o}aR(t=>({...t,get:(e,n,r)=>Oy(e,n)||t.get(e,n,r),has:(e,n)=>!!Oy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function pR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const im="@firebase/app",Vy="0.10.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi=new jd("@firebase/app"),mR="@firebase/app-compat",gR="@firebase/analytics-compat",_R="@firebase/analytics",vR="@firebase/app-check-compat",yR="@firebase/app-check",wR="@firebase/auth",ER="@firebase/auth-compat",TR="@firebase/database",IR="@firebase/database-compat",SR="@firebase/functions",PR="@firebase/functions-compat",AR="@firebase/installations",xR="@firebase/installations-compat",CR="@firebase/messaging",RR="@firebase/messaging-compat",kR="@firebase/performance",LR="@firebase/performance-compat",bR="@firebase/remote-config",NR="@firebase/remote-config-compat",DR="@firebase/storage",MR="@firebase/storage-compat",OR="@firebase/firestore",VR="@firebase/vertexai-preview",FR="@firebase/firestore-compat",UR="firebase",zR="10.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="[DEFAULT]",BR={[im]:"fire-core",[mR]:"fire-core-compat",[_R]:"fire-analytics",[gR]:"fire-analytics-compat",[yR]:"fire-app-check",[vR]:"fire-app-check-compat",[wR]:"fire-auth",[ER]:"fire-auth-compat",[TR]:"fire-rtdb",[IR]:"fire-rtdb-compat",[SR]:"fire-fn",[PR]:"fire-fn-compat",[AR]:"fire-iid",[xR]:"fire-iid-compat",[CR]:"fire-fcm",[RR]:"fire-fcm-compat",[kR]:"fire-perf",[LR]:"fire-perf-compat",[bR]:"fire-rc",[NR]:"fire-rc-compat",[DR]:"fire-gcs",[MR]:"fire-gcs-compat",[OR]:"fire-fst",[FR]:"fire-fst-compat",[VR]:"fire-vertex","fire-js":"fire-js",[UR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od=new Map,jR=new Map,om=new Map;function Fy(t,e){try{t.container.addComponent(e)}catch(n){Wi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function zs(t){const e=t.name;if(om.has(e))return Wi.debug(`There were multiple attempts to register component ${e}.`),!1;om.set(e,t);for(const n of od.values())Fy(n,t);for(const n of jR.values())Fy(n,t);return!0}function oc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function si(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Os=new el("app","Firebase",qR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $i("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Os.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=zR;function G1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:sm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Os.create("bad-app-name",{appName:String(i)});if(n||(n=$1()),!n)throw Os.create("no-options");const o=od.get(i);if(o){if(sd(n,o.options)&&sd(r,o.config))return o;throw Os.create("duplicate-app",{appName:i})}const l=new YC(i);for(const d of om.values())l.addComponent(d);const c=new HR(n,r,l);return od.set(i,c),c}function Ng(t=sm){const e=od.get(t);if(!e&&t===sm&&$1())return G1();if(!e)throw Os.create("no-app",{appName:t});return e}function Vi(t,e,n){var r;let i=(r=BR[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wi.warn(c.join(" "));return}zs(new $i(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="firebase-heartbeat-database",WR=1,Bu="firebase-heartbeat-store";let Zf=null;function Q1(){return Zf||(Zf=cR($R,WR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Os.create("idb-open",{originalErrorMessage:t.message})})),Zf}async function ZR(t){try{const n=(await Q1()).transaction(Bu),r=await n.objectStore(Bu).get(Y1(t));return await n.done,r}catch(e){if(e instanceof Yi)Wi.warn(e.message);else{const n=Os.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wi.warn(n.message)}}}async function Uy(t,e){try{const r=(await Q1()).transaction(Bu,"readwrite");await r.objectStore(Bu).put(e,Y1(t)),await r.done}catch(n){if(n instanceof Yi)Wi.warn(n.message);else{const r=Os.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Wi.warn(r.message)}}}function Y1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=1024,GR=30*24*60*60*1e3;class QR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new XR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=zy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const c=new Date(l.date).valueOf();return Date.now()-c<=GR}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Wi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zy(),{heartbeatsToSend:r,unsentEntries:i}=YR(this._heartbeatsCache.heartbeats),o=id(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Wi.warn(n),""}}}function zy(){return new Date().toISOString().substring(0,10)}function YR(t,e=KR){const n=[];let r=t.slice();for(const i of t){const o=n.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),By(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),By(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class XR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Lg()?DC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ZR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Uy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Uy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function By(t){return id(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(t){zs(new $i("platform-logger",e=>new fR(e),"PRIVATE")),zs(new $i("heartbeat",e=>new QR(e),"PRIVATE")),Vi(im,Vy,t),Vi(im,Vy,"esm2017"),Vi("fire-js","")}JR("");var jy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vo,X1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,T){function A(){}A.prototype=T.prototype,P.D=T.prototype,P.prototype=new A,P.prototype.constructor=P,P.C=function(R,D,N){for(var x=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)x[Ie-2]=arguments[Ie];return T.prototype[D].apply(R,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,T,A){A||(A=0);var R=Array(16);if(typeof T=="string")for(var D=0;16>D;++D)R[D]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(D=0;16>D;++D)R[D]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=P.g[0],A=P.g[1],D=P.g[2];var N=P.g[3],x=T+(N^A&(D^N))+R[0]+3614090360&4294967295;T=A+(x<<7&4294967295|x>>>25),x=N+(D^T&(A^D))+R[1]+3905402710&4294967295,N=T+(x<<12&4294967295|x>>>20),x=D+(A^N&(T^A))+R[2]+606105819&4294967295,D=N+(x<<17&4294967295|x>>>15),x=A+(T^D&(N^T))+R[3]+3250441966&4294967295,A=D+(x<<22&4294967295|x>>>10),x=T+(N^A&(D^N))+R[4]+4118548399&4294967295,T=A+(x<<7&4294967295|x>>>25),x=N+(D^T&(A^D))+R[5]+1200080426&4294967295,N=T+(x<<12&4294967295|x>>>20),x=D+(A^N&(T^A))+R[6]+2821735955&4294967295,D=N+(x<<17&4294967295|x>>>15),x=A+(T^D&(N^T))+R[7]+4249261313&4294967295,A=D+(x<<22&4294967295|x>>>10),x=T+(N^A&(D^N))+R[8]+1770035416&4294967295,T=A+(x<<7&4294967295|x>>>25),x=N+(D^T&(A^D))+R[9]+2336552879&4294967295,N=T+(x<<12&4294967295|x>>>20),x=D+(A^N&(T^A))+R[10]+4294925233&4294967295,D=N+(x<<17&4294967295|x>>>15),x=A+(T^D&(N^T))+R[11]+2304563134&4294967295,A=D+(x<<22&4294967295|x>>>10),x=T+(N^A&(D^N))+R[12]+1804603682&4294967295,T=A+(x<<7&4294967295|x>>>25),x=N+(D^T&(A^D))+R[13]+4254626195&4294967295,N=T+(x<<12&4294967295|x>>>20),x=D+(A^N&(T^A))+R[14]+2792965006&4294967295,D=N+(x<<17&4294967295|x>>>15),x=A+(T^D&(N^T))+R[15]+1236535329&4294967295,A=D+(x<<22&4294967295|x>>>10),x=T+(D^N&(A^D))+R[1]+4129170786&4294967295,T=A+(x<<5&4294967295|x>>>27),x=N+(A^D&(T^A))+R[6]+3225465664&4294967295,N=T+(x<<9&4294967295|x>>>23),x=D+(T^A&(N^T))+R[11]+643717713&4294967295,D=N+(x<<14&4294967295|x>>>18),x=A+(N^T&(D^N))+R[0]+3921069994&4294967295,A=D+(x<<20&4294967295|x>>>12),x=T+(D^N&(A^D))+R[5]+3593408605&4294967295,T=A+(x<<5&4294967295|x>>>27),x=N+(A^D&(T^A))+R[10]+38016083&4294967295,N=T+(x<<9&4294967295|x>>>23),x=D+(T^A&(N^T))+R[15]+3634488961&4294967295,D=N+(x<<14&4294967295|x>>>18),x=A+(N^T&(D^N))+R[4]+3889429448&4294967295,A=D+(x<<20&4294967295|x>>>12),x=T+(D^N&(A^D))+R[9]+568446438&4294967295,T=A+(x<<5&4294967295|x>>>27),x=N+(A^D&(T^A))+R[14]+3275163606&4294967295,N=T+(x<<9&4294967295|x>>>23),x=D+(T^A&(N^T))+R[3]+4107603335&4294967295,D=N+(x<<14&4294967295|x>>>18),x=A+(N^T&(D^N))+R[8]+1163531501&4294967295,A=D+(x<<20&4294967295|x>>>12),x=T+(D^N&(A^D))+R[13]+2850285829&4294967295,T=A+(x<<5&4294967295|x>>>27),x=N+(A^D&(T^A))+R[2]+4243563512&4294967295,N=T+(x<<9&4294967295|x>>>23),x=D+(T^A&(N^T))+R[7]+1735328473&4294967295,D=N+(x<<14&4294967295|x>>>18),x=A+(N^T&(D^N))+R[12]+2368359562&4294967295,A=D+(x<<20&4294967295|x>>>12),x=T+(A^D^N)+R[5]+4294588738&4294967295,T=A+(x<<4&4294967295|x>>>28),x=N+(T^A^D)+R[8]+2272392833&4294967295,N=T+(x<<11&4294967295|x>>>21),x=D+(N^T^A)+R[11]+1839030562&4294967295,D=N+(x<<16&4294967295|x>>>16),x=A+(D^N^T)+R[14]+4259657740&4294967295,A=D+(x<<23&4294967295|x>>>9),x=T+(A^D^N)+R[1]+2763975236&4294967295,T=A+(x<<4&4294967295|x>>>28),x=N+(T^A^D)+R[4]+1272893353&4294967295,N=T+(x<<11&4294967295|x>>>21),x=D+(N^T^A)+R[7]+4139469664&4294967295,D=N+(x<<16&4294967295|x>>>16),x=A+(D^N^T)+R[10]+3200236656&4294967295,A=D+(x<<23&4294967295|x>>>9),x=T+(A^D^N)+R[13]+681279174&4294967295,T=A+(x<<4&4294967295|x>>>28),x=N+(T^A^D)+R[0]+3936430074&4294967295,N=T+(x<<11&4294967295|x>>>21),x=D+(N^T^A)+R[3]+3572445317&4294967295,D=N+(x<<16&4294967295|x>>>16),x=A+(D^N^T)+R[6]+76029189&4294967295,A=D+(x<<23&4294967295|x>>>9),x=T+(A^D^N)+R[9]+3654602809&4294967295,T=A+(x<<4&4294967295|x>>>28),x=N+(T^A^D)+R[12]+3873151461&4294967295,N=T+(x<<11&4294967295|x>>>21),x=D+(N^T^A)+R[15]+530742520&4294967295,D=N+(x<<16&4294967295|x>>>16),x=A+(D^N^T)+R[2]+3299628645&4294967295,A=D+(x<<23&4294967295|x>>>9),x=T+(D^(A|~N))+R[0]+4096336452&4294967295,T=A+(x<<6&4294967295|x>>>26),x=N+(A^(T|~D))+R[7]+1126891415&4294967295,N=T+(x<<10&4294967295|x>>>22),x=D+(T^(N|~A))+R[14]+2878612391&4294967295,D=N+(x<<15&4294967295|x>>>17),x=A+(N^(D|~T))+R[5]+4237533241&4294967295,A=D+(x<<21&4294967295|x>>>11),x=T+(D^(A|~N))+R[12]+1700485571&4294967295,T=A+(x<<6&4294967295|x>>>26),x=N+(A^(T|~D))+R[3]+2399980690&4294967295,N=T+(x<<10&4294967295|x>>>22),x=D+(T^(N|~A))+R[10]+4293915773&4294967295,D=N+(x<<15&4294967295|x>>>17),x=A+(N^(D|~T))+R[1]+2240044497&4294967295,A=D+(x<<21&4294967295|x>>>11),x=T+(D^(A|~N))+R[8]+1873313359&4294967295,T=A+(x<<6&4294967295|x>>>26),x=N+(A^(T|~D))+R[15]+4264355552&4294967295,N=T+(x<<10&4294967295|x>>>22),x=D+(T^(N|~A))+R[6]+2734768916&4294967295,D=N+(x<<15&4294967295|x>>>17),x=A+(N^(D|~T))+R[13]+1309151649&4294967295,A=D+(x<<21&4294967295|x>>>11),x=T+(D^(A|~N))+R[4]+4149444226&4294967295,T=A+(x<<6&4294967295|x>>>26),x=N+(A^(T|~D))+R[11]+3174756917&4294967295,N=T+(x<<10&4294967295|x>>>22),x=D+(T^(N|~A))+R[2]+718787259&4294967295,D=N+(x<<15&4294967295|x>>>17),x=A+(N^(D|~T))+R[9]+3951481745&4294967295,P.g[0]=P.g[0]+T&4294967295,P.g[1]=P.g[1]+(D+(x<<21&4294967295|x>>>11))&4294967295,P.g[2]=P.g[2]+D&4294967295,P.g[3]=P.g[3]+N&4294967295}r.prototype.u=function(P,T){T===void 0&&(T=P.length);for(var A=T-this.blockSize,R=this.B,D=this.h,N=0;N<T;){if(D==0)for(;N<=A;)i(this,P,N),N+=this.blockSize;if(typeof P=="string"){for(;N<T;)if(R[D++]=P.charCodeAt(N++),D==this.blockSize){i(this,R),D=0;break}}else for(;N<T;)if(R[D++]=P[N++],D==this.blockSize){i(this,R),D=0;break}}this.h=D,this.o+=T},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var T=1;T<P.length-8;++T)P[T]=0;var A=8*this.o;for(T=P.length-8;T<P.length;++T)P[T]=A&255,A/=256;for(this.u(P),P=Array(16),T=A=0;4>T;++T)for(var R=0;32>R;R+=8)P[A++]=this.g[T]>>>R&255;return P};function o(P,T){var A=c;return Object.prototype.hasOwnProperty.call(A,P)?A[P]:A[P]=T(P)}function l(P,T){this.h=T;for(var A=[],R=!0,D=P.length-1;0<=D;D--){var N=P[D]|0;R&&N==T||(A[D]=N,R=!1)}this.g=A}var c={};function d(P){return-128<=P&&128>P?o(P,function(T){return new l([T|0],0>T?-1:0)}):new l([P|0],0>P?-1:0)}function p(P){if(isNaN(P)||!isFinite(P))return y;if(0>P)return B(p(-P));for(var T=[],A=1,R=0;P>=A;R++)T[R]=P/A|0,A*=4294967296;return new l(T,0)}function g(P,T){if(P.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(P.charAt(0)=="-")return B(g(P.substring(1),T));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=p(Math.pow(T,8)),R=y,D=0;D<P.length;D+=8){var N=Math.min(8,P.length-D),x=parseInt(P.substring(D,D+N),T);8>N?(N=p(Math.pow(T,N)),R=R.j(N).add(p(x))):(R=R.j(A),R=R.add(p(x)))}return R}var y=d(0),E=d(1),k=d(16777216);t=l.prototype,t.m=function(){if(V(this))return-B(this).m();for(var P=0,T=1,A=0;A<this.g.length;A++){var R=this.i(A);P+=(0<=R?R:4294967296+R)*T,T*=4294967296}return P},t.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(F(this))return"0";if(V(this))return"-"+B(this).toString(P);for(var T=p(Math.pow(P,6)),A=this,R="";;){var D=Z(A,T).g;A=C(A,D.j(T));var N=((0<A.g.length?A.g[0]:A.h)>>>0).toString(P);if(A=D,F(A))return N+R;for(;6>N.length;)N="0"+N;R=N+R}},t.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function F(P){if(P.h!=0)return!1;for(var T=0;T<P.g.length;T++)if(P.g[T]!=0)return!1;return!0}function V(P){return P.h==-1}t.l=function(P){return P=C(this,P),V(P)?-1:F(P)?0:1};function B(P){for(var T=P.g.length,A=[],R=0;R<T;R++)A[R]=~P.g[R];return new l(A,~P.h).add(E)}t.abs=function(){return V(this)?B(this):this},t.add=function(P){for(var T=Math.max(this.g.length,P.g.length),A=[],R=0,D=0;D<=T;D++){var N=R+(this.i(D)&65535)+(P.i(D)&65535),x=(N>>>16)+(this.i(D)>>>16)+(P.i(D)>>>16);R=x>>>16,N&=65535,x&=65535,A[D]=x<<16|N}return new l(A,A[A.length-1]&-2147483648?-1:0)};function C(P,T){return P.add(B(T))}t.j=function(P){if(F(this)||F(P))return y;if(V(this))return V(P)?B(this).j(B(P)):B(B(this).j(P));if(V(P))return B(this.j(B(P)));if(0>this.l(k)&&0>P.l(k))return p(this.m()*P.m());for(var T=this.g.length+P.g.length,A=[],R=0;R<2*T;R++)A[R]=0;for(R=0;R<this.g.length;R++)for(var D=0;D<P.g.length;D++){var N=this.i(R)>>>16,x=this.i(R)&65535,Ie=P.i(D)>>>16,Je=P.i(D)&65535;A[2*R+2*D]+=x*Je,S(A,2*R+2*D),A[2*R+2*D+1]+=N*Je,S(A,2*R+2*D+1),A[2*R+2*D+1]+=x*Ie,S(A,2*R+2*D+1),A[2*R+2*D+2]+=N*Ie,S(A,2*R+2*D+2)}for(R=0;R<T;R++)A[R]=A[2*R+1]<<16|A[2*R];for(R=T;R<2*T;R++)A[R]=0;return new l(A,0)};function S(P,T){for(;(P[T]&65535)!=P[T];)P[T+1]+=P[T]>>>16,P[T]&=65535,T++}function b(P,T){this.g=P,this.h=T}function Z(P,T){if(F(T))throw Error("division by zero");if(F(P))return new b(y,y);if(V(P))return T=Z(B(P),T),new b(B(T.g),B(T.h));if(V(T))return T=Z(P,B(T)),new b(B(T.g),T.h);if(30<P.g.length){if(V(P)||V(T))throw Error("slowDivide_ only works with positive integers.");for(var A=E,R=T;0>=R.l(P);)A=J(A),R=J(R);var D=z(A,1),N=z(R,1);for(R=z(R,2),A=z(A,2);!F(R);){var x=N.add(R);0>=x.l(P)&&(D=D.add(A),N=x),R=z(R,1),A=z(A,1)}return T=C(P,D.j(T)),new b(D,T)}for(D=y;0<=P.l(T);){for(A=Math.max(1,Math.floor(P.m()/T.m())),R=Math.ceil(Math.log(A)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),N=p(A),x=N.j(T);V(x)||0<x.l(P);)A-=R,N=p(A),x=N.j(T);F(N)&&(N=E),D=D.add(N),P=C(P,x)}return new b(D,P)}t.A=function(P){return Z(this,P).h},t.and=function(P){for(var T=Math.max(this.g.length,P.g.length),A=[],R=0;R<T;R++)A[R]=this.i(R)&P.i(R);return new l(A,this.h&P.h)},t.or=function(P){for(var T=Math.max(this.g.length,P.g.length),A=[],R=0;R<T;R++)A[R]=this.i(R)|P.i(R);return new l(A,this.h|P.h)},t.xor=function(P){for(var T=Math.max(this.g.length,P.g.length),A=[],R=0;R<T;R++)A[R]=this.i(R)^P.i(R);return new l(A,this.h^P.h)};function J(P){for(var T=P.g.length+1,A=[],R=0;R<T;R++)A[R]=P.i(R)<<1|P.i(R-1)>>>31;return new l(A,P.h)}function z(P,T){var A=T>>5;T%=32;for(var R=P.g.length-A,D=[],N=0;N<R;N++)D[N]=0<T?P.i(N+A)>>>T|P.i(N+A+1)<<32-T:P.i(N+A);return new l(D,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,X1=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=g,vo=l}).apply(typeof jy<"u"?jy:typeof self<"u"?self:typeof window<"u"?window:{});var th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var J1,eT,Jl,tT,Eh,am,nT,rT,iT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof th=="object"&&th];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function i(u,m){if(m)e:{var v=r;u=u.split(".");for(var I=0;I<u.length-1;I++){var q=u[I];if(!(q in v))break e;v=v[q]}u=u[u.length-1],I=v[u],m=m(I),m!=I&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function o(u,m){u instanceof String&&(u+="");var v=0,I=!1,q={next:function(){if(!I&&v<u.length){var G=v++;return{value:m(G,u[G]),done:!1}}return I=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}i("Array.prototype.values",function(u){return u||function(){return o(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function p(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function g(u,m,v){return u.call.apply(u.bind,arguments)}function y(u,m,v){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,I),u.apply(m,q)}}return function(){return u.apply(m,arguments)}}function E(u,m,v){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:y,E.apply(null,arguments)}function k(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function F(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(I,q,G){for(var ce=Array(arguments.length-2),at=2;at<arguments.length;at++)ce[at-2]=arguments[at];return m.prototype[q].apply(I,ce)}}function V(u){const m=u.length;if(0<m){const v=Array(m);for(let I=0;I<m;I++)v[I]=u[I];return v}return[]}function B(u,m){for(let v=1;v<arguments.length;v++){const I=arguments[v];if(d(I)){const q=u.length||0,G=I.length||0;u.length=q+G;for(let ce=0;ce<G;ce++)u[q+ce]=I[ce]}else u.push(I)}}class C{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function S(u){return/^[\s\xa0]*$/.test(u)}function b(){var u=c.navigator;return u&&(u=u.userAgent)?u:""}function Z(u){return Z[" "](u),u}Z[" "]=function(){};var J=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function z(u,m,v){for(const I in u)m.call(v,u[I],I,u)}function P(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function T(u){const m={};for(const v in u)m[v]=u[v];return m}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(u,m){let v,I;for(let q=1;q<arguments.length;q++){I=arguments[q];for(v in I)u[v]=I[v];for(let G=0;G<A.length;G++)v=A[G],Object.prototype.hasOwnProperty.call(I,v)&&(u[v]=I[v])}}function D(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function N(u){c.setTimeout(()=>{throw u},0)}function x(){var u=we;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Ie{constructor(){this.h=this.g=null}add(m,v){const I=Je.get();I.set(m,v),this.h?this.h.next=I:this.g=I,this.h=I}}var Je=new C(()=>new We,u=>u.reset());class We{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,Y=!1,we=new Ie,re=()=>{const u=c.Promise.resolve(void 0);Ae=()=>{u.then(Ee)}};var Ee=()=>{for(var u;u=x();){try{u.h.call(u.g)}catch(v){N(v)}var m=Je;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}Y=!1};function Re(){this.s=this.s,this.C=this.C}Re.prototype.s=!1,Re.prototype.ma=function(){this.s||(this.s=!0,this.N())},Re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ve(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}Ve.prototype.h=function(){this.defaultPrevented=!0};var ze=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};c.addEventListener("test",v,m),c.removeEventListener("test",v,m)}catch{}return u}();function be(u,m){if(Ve.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(J){e:{try{Z(m.nodeName);var q=!0;break e}catch{}q=!1}q||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Se[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&be.aa.h.call(this)}}F(be,Ve);var Se={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var pt="closure_listenable_"+(1e6*Math.random()|0),vn=0;function pi(u,m,v,I,q){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!I,this.ha=q,this.key=++vn,this.da=this.fa=!1}function lr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function _t(u){this.src=u,this.g={},this.h=0}_t.prototype.add=function(u,m,v,I,q){var G=u.toString();u=this.g[G],u||(u=this.g[G]=[],this.h++);var ce=Gn(u,m,I,q);return-1<ce?(m=u[ce],v||(m.fa=!1)):(m=new pi(m,this.src,G,!!I,q),m.fa=v,u.push(m)),m};function an(u,m){var v=m.type;if(v in u.g){var I=u.g[v],q=Array.prototype.indexOf.call(I,m,void 0),G;(G=0<=q)&&Array.prototype.splice.call(I,q,1),G&&(lr(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Gn(u,m,v,I){for(var q=0;q<u.length;++q){var G=u[q];if(!G.da&&G.listener==m&&G.capture==!!v&&G.ha==I)return q}return-1}var Zr="closure_lm_"+(1e6*Math.random()|0),Rn={};function Ji(u,m,v,I,q){if(Array.isArray(m)){for(var G=0;G<m.length;G++)Ji(u,m[G],v,I,q);return null}return v=$e(v),u&&u[pt]?u.K(m,v,p(I)?!!I.capture:!!I,q):es(u,m,v,!1,I,q)}function es(u,m,v,I,q,G){if(!m)throw Error("Invalid event type");var ce=p(q)?!!q.capture:!!q,at=se(u);if(at||(u[Zr]=at=new _t(u)),v=at.add(m,v,I,ce,G),v.proxy)return v;if(I=U(),v.proxy=I,I.src=u,I.listener=v,u.addEventListener)ze||(q=ce),q===void 0&&(q=!1),u.addEventListener(m.toString(),I,q);else if(u.attachEvent)u.attachEvent(ue(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function U(){function u(v){return m.call(u.src,u.listener,v)}const m=ae;return u}function W(u,m,v,I,q){if(Array.isArray(m))for(var G=0;G<m.length;G++)W(u,m[G],v,I,q);else I=p(I)?!!I.capture:!!I,v=$e(v),u&&u[pt]?(u=u.i,m=String(m).toString(),m in u.g&&(G=u.g[m],v=Gn(G,v,I,q),-1<v&&(lr(G[v]),Array.prototype.splice.call(G,v,1),G.length==0&&(delete u.g[m],u.h--)))):u&&(u=se(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Gn(m,v,I,q)),(v=-1<u?m[u]:null)&&X(v))}function X(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[pt])an(m.i,u);else{var v=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(v,I,u.capture):m.detachEvent?m.detachEvent(ue(v),I):m.addListener&&m.removeListener&&m.removeListener(I),(v=se(m))?(an(v,u),v.h==0&&(v.src=null,m[Zr]=null)):lr(u)}}}function ue(u){return u in Rn?Rn[u]:Rn[u]="on"+u}function ae(u,m){if(u.da)u=!0;else{m=new be(m,this);var v=u.listener,I=u.ha||u.src;u.fa&&X(u),u=v.call(I,m)}return u}function se(u){return u=u[Zr],u instanceof _t?u:null}var de="__closure_events_fn_"+(1e9*Math.random()>>>0);function $e(u){return typeof u=="function"?u:(u[de]||(u[de]=function(m){return u.handleEvent(m)}),u[de])}function qe(){Re.call(this),this.i=new _t(this),this.M=this,this.F=null}F(qe,Re),qe.prototype[pt]=!0,qe.prototype.removeEventListener=function(u,m,v,I){W(this,u,m,v,I)};function He(u,m){var v,I=u.F;if(I)for(v=[];I;I=I.F)v.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new Ve(m,u);else if(m instanceof Ve)m.target=m.target||u;else{var q=m;m=new Ve(I,u),R(m,q)}if(q=!0,v)for(var G=v.length-1;0<=G;G--){var ce=m.g=v[G];q=ln(ce,I,!0,m)&&q}if(ce=m.g=u,q=ln(ce,I,!0,m)&&q,q=ln(ce,I,!1,m)&&q,v)for(G=0;G<v.length;G++)ce=m.g=v[G],q=ln(ce,I,!1,m)&&q}qe.prototype.N=function(){if(qe.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],I=0;I<v.length;I++)lr(v[I]);delete u.g[m],u.h--}}this.F=null},qe.prototype.K=function(u,m,v,I){return this.i.add(String(u),m,!1,v,I)},qe.prototype.L=function(u,m,v,I){return this.i.add(String(u),m,!0,v,I)};function ln(u,m,v,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var q=!0,G=0;G<m.length;++G){var ce=m[G];if(ce&&!ce.da&&ce.capture==v){var at=ce.listener,Bt=ce.ha||ce.src;ce.fa&&an(u.i,ce),q=at.call(Bt,I)!==!1&&q}}return q&&!I.defaultPrevented}function kn(u,m,v){if(typeof u=="function")v&&(u=E(u,v));else if(u&&typeof u.handleEvent=="function")u=E(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:c.setTimeout(u,m||0)}function ur(u){u.g=kn(()=>{u.g=null,u.i&&(u.i=!1,ur(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Cr extends Re{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ur(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cr(u){Re.call(this),this.h=u,this.g={}}F(cr,Re);var Kr=[];function Rr(u){z(u.g,function(m,v){this.g.hasOwnProperty(v)&&X(m)},u),u.g={}}cr.prototype.N=function(){cr.aa.N.call(this),Rr(this)},cr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fn=c.JSON.stringify,Fo=c.JSON.parse,kr=class{stringify(u){return c.JSON.stringify(u,void 0)}parse(u){return c.JSON.parse(u,void 0)}};function Qs(){}Qs.prototype.h=null;function Ys(u){return u.h||(u.h=u.i())}function Xs(){}var Lr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ts(){Ve.call(this,"d")}F(ts,Ve);function j(){Ve.call(this,"c")}F(j,Ve);var $={},ee=null;function he(){return ee=ee||new qe}$.La="serverreachability";function _e(u){Ve.call(this,$.La,u)}F(_e,Ve);function De(u){const m=he();He(m,new _e(m))}$.STAT_EVENT="statevent";function xe(u,m){Ve.call(this,$.STAT_EVENT,u),this.stat=m}F(xe,Ve);function me(u){const m=he();He(m,new xe(m,u))}$.Ma="timingevent";function Te(u,m){Ve.call(this,$.Ma,u),this.size=m}F(Te,Ve);function Be(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){u()},m)}function mt(){this.g=!0}mt.prototype.xa=function(){this.g=!1};function Ce(u,m,v,I,q,G){u.info(function(){if(u.g)if(G)for(var ce="",at=G.split("&"),Bt=0;Bt<at.length;Bt++){var tt=at[Bt].split("=");if(1<tt.length){var ct=tt[0];tt=tt[1];var xt=ct.split("_");ce=2<=xt.length&&xt[1]=="type"?ce+(ct+"="+tt+"&"):ce+(ct+"=redacted&")}}else ce=null;else ce=G;return"XMLHTTP REQ ("+I+") [attempt "+q+"]: "+m+`
`+v+`
`+ce})}function le(u,m,v,I,q,G,ce){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+q+"]: "+m+`
`+v+`
`+G+" "+ce})}function ht(u,m,v,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Pt(u,v)+(I?" "+I:"")})}function un(u,m){u.info(function(){return"TIMEOUT: "+m})}mt.prototype.info=function(){};function Pt(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var I=v[u];if(!(2>I.length)){var q=I[1];if(Array.isArray(q)&&!(1>q.length)){var G=q[0];if(G!="noop"&&G!="stop"&&G!="close")for(var ce=1;ce<q.length;ce++)q[ce]=""}}}}return Fn(v)}catch{return m}}var Un={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qn;function zt(){}F(zt,Qs),zt.prototype.g=function(){return new XMLHttpRequest},zt.prototype.i=function(){return{}},Qn=new zt;function Qt(u,m,v,I){this.j=u,this.i=m,this.l=v,this.R=I||1,this.U=new cr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ns}function ns(){this.i=null,this.g="",this.h=!1}var rs={},mi={};function hr(u,m,v){u.L=1,u.v=fr(bt(m)),u.m=v,u.P=!0,Qr(u,null)}function Qr(u,m){u.F=Date.now(),cn(u),u.A=bt(u.v);var v=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),vc(v.i,"t",I),u.C=0,v=u.j.J,u.h=new ns,u.g=Pc(u.j,v?m:null,!u.m),0<u.O&&(u.M=new Cr(E(u.Y,u,u.g),u.O)),m=u.U,v=u.g,I=u.ca;var q="readystatechange";Array.isArray(q)||(q&&(Kr[0]=q.toString()),q=Kr);for(var G=0;G<q.length;G++){var ce=Ji(v,q[G],I||m.handleEvent,!1,m.h||m);if(!ce)break;m.g[ce.key]=ce}m=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),De(),Ce(u.i,u.u,u.A,u.l,u.R,u.m)}Qt.prototype.ca=function(u){u=u.target;const m=this.M;m&&Ln(u)==3?m.j():this.Y(u)},Qt.prototype.Y=function(u){try{if(u==this.g)e:{const xt=Ln(this.g);var m=this.g.Ba();const cs=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||Tl(this.g)))){this.J||xt!=4||m==7||(m==8||0>=cs?De(3):De(2)),Js(this);var v=this.g.Z();this.X=v;t:if(it(this)){var I=Tl(this.g);u="";var q=I.length,G=Ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_i(this),eo(this);var ce="";break t}this.h.i=new c.TextDecoder}for(m=0;m<q;m++)this.h.h=!0,u+=this.h.i.decode(I[m],{stream:!(G&&m==q-1)});I.length=0,this.h.g+=u,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=v==200,le(this.i,this.u,this.A,this.l,this.R,xt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var at,Bt=this.g;if((at=Bt.g?Bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(at)){var tt=at;break t}}tt=null}if(v=tt)ht(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,to(this,v);else{this.o=!1,this.s=3,me(12),_i(this),eo(this);break e}}if(this.P){v=!0;let Ot;for(;!this.J&&this.C<ce.length;)if(Ot=ot(this,ce),Ot==mi){xt==4&&(this.s=4,me(14),v=!1),ht(this.i,this.l,null,"[Incomplete Response]");break}else if(Ot==rs){this.s=4,me(15),ht(this.i,this.l,ce,"[Invalid Chunk]"),v=!1;break}else ht(this.i,this.l,Ot,null),to(this,Ot);if(it(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||ce.length!=0||this.h.h||(this.s=1,me(16),v=!1),this.o=this.o&&v,!v)ht(this.i,this.l,ce,"[Invalid Chunked Response]"),_i(this),eo(this);else if(0<ce.length&&!this.W){this.W=!0;var ct=this.j;ct.g==this&&ct.ba&&!ct.M&&(ct.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Zo(ct),ct.M=!0,me(11))}}else ht(this.i,this.l,ce,null),to(this,ce);xt==4&&_i(this),this.o&&!this.J&&(xt==4?Sl(this.j,this):(this.o=!1,cn(this)))}else af(this.g),v==400&&0<ce.indexOf("Unknown SID")?(this.s=3,me(12)):(this.s=0,me(13)),_i(this),eo(this)}}}catch{}finally{}};function it(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ot(u,m){var v=u.C,I=m.indexOf(`
`,v);return I==-1?mi:(v=Number(m.substring(v,I)),isNaN(v)?rs:(I+=1,I+v>m.length?mi:(m=m.slice(I,I+v),u.C=I+v,m)))}Qt.prototype.cancel=function(){this.J=!0,_i(this)};function cn(u){u.S=Date.now()+u.I,gi(u,u.I)}function gi(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Be(E(u.ba,u),m)}function Js(u){u.B&&(c.clearTimeout(u.B),u.B=null)}Qt.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(un(this.i,this.A),this.L!=2&&(De(),me(17)),_i(this),this.s=2,eo(this)):gi(this,this.S-u)};function eo(u){u.j.G==0||u.J||Sl(u.j,u)}function _i(u){Js(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Rr(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function to(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||Qe(v.h,u))){if(!u.K&&Qe(v.h,u)&&v.G==3){try{var I=v.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var q=I;if(q[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Go(v),$o(v);else break e;Wo(v),me(18)}}else v.za=q[1],0<v.za-v.T&&37500>q[2]&&v.F&&v.v==0&&!v.C&&(v.C=Be(E(v.Za,v),6e3));if(1>=is(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Ti(v,11)}else if((u.K||v.g==u)&&Go(v),!S(m))for(q=v.Da.g.parse(m),m=0;m<q.length;m++){let tt=q[m];if(v.T=tt[0],tt=tt[1],v.G==2)if(tt[0]=="c"){v.K=tt[1],v.ia=tt[2];const ct=tt[3];ct!=null&&(v.la=ct,v.j.info("VER="+v.la));const xt=tt[4];xt!=null&&(v.Aa=xt,v.j.info("SVER="+v.Aa));const cs=tt[5];cs!=null&&typeof cs=="number"&&0<cs&&(I=1.5*cs,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const Ot=u.g;if(Ot){const Yo=Ot.g?Ot.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yo){var G=I.h;G.g||Yo.indexOf("spdy")==-1&&Yo.indexOf("quic")==-1&&Yo.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(dt(G,G.h),G.h=null))}if(I.D){const Jr=Ot.g?Ot.g.getResponseHeader("X-HTTP-Session-Id"):null;Jr&&(I.ya=Jr,Me(I.I,I.D,Jr))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var ce=u;if(I.qa=Qo(I,I.J?I.ia:null,I.W),ce.K){ro(I.h,ce);var at=ce,Bt=I.L;Bt&&(at.I=Bt),at.B&&(Js(at),cn(at)),I.g=ce}else Dr(I);0<v.i.length&&us(v)}else tt[0]!="stop"&&tt[0]!="close"||Ti(v,7);else v.G==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?Ti(v,7):Ho(v):tt[0]!="noop"&&v.l&&v.l.ta(tt),v.v=0)}}De(4)}catch{}}var no=class{constructor(u,m){this.g=u,this.map=m}};function ll(u){this.l=u||10,c.PerformanceNavigationTiming?(u=c.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ul(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function is(u){return u.h?1:u.g?u.g.size:0}function Qe(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function dt(u,m){u.g?u.g.add(m):u.h=m}function ro(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}ll.prototype.cancel=function(){if(this.i=vi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function vi(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return V(u.i)}function ss(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(d(u)){for(var m=[],v=u.length,I=0;I<v;I++)m.push(u[I]);return m}m=[],v=0;for(I in u)m[v++]=u[I];return m}function cl(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(d(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const I in u)m[v++]=I;return m}}}function je(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(d(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=cl(u),I=ss(u),q=I.length,G=0;G<q;G++)m.call(void 0,I[G],v&&v[G],u)}var Tt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hl(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var I=u[v].indexOf("="),q=null;if(0<=I){var G=u[v].substring(0,I);q=u[v].substring(I+1)}else G=u[v];m(G,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function dr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof dr){this.h=u.h,Uo(this,u.j),this.o=u.o,this.g=u.g,yi(this,u.s),this.l=u.l;var m=u.i,v=new wi;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Yr(this,v),this.m=u.m}else u&&(m=String(u).match(Tt))?(this.h=!1,Uo(this,m[1]||"",!0),this.o=br(m[2]||""),this.g=br(m[3]||"",!0),yi(this,m[4]),this.l=br(m[5]||"",!0),Yr(this,m[6]||"",!0),this.m=br(m[7]||"")):(this.h=!1,this.i=new wi(null,this.h))}dr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Nr(m,os,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Nr(m,os,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Nr(v,v.charAt(0)=="/"?pl:fl,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Nr(v,ml)),u.join("")};function bt(u){return new dr(u)}function Uo(u,m,v){u.j=v?br(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function yi(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Yr(u,m,v){m instanceof wi?(u.i=m,pr(u.i,u.h)):(v||(m=Nr(m,zo)),u.i=new wi(m,u.h))}function Me(u,m,v){u.i.set(m,v)}function fr(u){return Me(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function br(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Nr(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,dl),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function dl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var os=/[#\/\?@]/g,fl=/[#\?:]/g,pl=/[#\?]/g,zo=/[#\?@]/g,ml=/#/g;function wi(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Yn(u){u.g||(u.g=new Map,u.h=0,u.i&&hl(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}t=wi.prototype,t.add=function(u,m){Yn(this),this.i=null,u=ke(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function gl(u,m){Yn(u),m=ke(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Bo(u,m){return Yn(u),m=ke(u,m),u.g.has(m)}t.forEach=function(u,m){Yn(this),this.g.forEach(function(v,I){v.forEach(function(q){u.call(m,q,I,this)},this)},this)},t.na=function(){Yn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let I=0;I<m.length;I++){const q=u[I];for(let G=0;G<q.length;G++)v.push(m[I])}return v},t.V=function(u){Yn(this);let m=[];if(typeof u=="string")Bo(this,u)&&(m=m.concat(this.g.get(ke(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},t.set=function(u,m){return Yn(this),this.i=null,u=ke(this,u),Bo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function vc(u,m,v){gl(u,m),0<v.length&&(u.i=null,u.g.set(ke(u,m),V(v)),u.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var I=m[v];const G=encodeURIComponent(String(I)),ce=this.V(I);for(I=0;I<ce.length;I++){var q=G;ce[I]!==""&&(q+="="+encodeURIComponent(String(ce[I]))),u.push(q)}}return this.i=u.join("&")};function ke(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function pr(u,m){m&&!u.j&&(Yn(u),u.i=null,u.g.forEach(function(v,I){var q=I.toLowerCase();I!=q&&(gl(this,I),vc(this,q,v))},u)),u.j=m}function ut(u,m){const v=new mt;if(c.Image){const I=new Image;I.onload=k(mr,v,"TestLoadImage: loaded",!0,m,I),I.onerror=k(mr,v,"TestLoadImage: error",!1,m,I),I.onabort=k(mr,v,"TestLoadImage: abort",!1,m,I),I.ontimeout=k(mr,v,"TestLoadImage: timeout",!1,m,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function yc(u,m){const v=new mt,I=new AbortController,q=setTimeout(()=>{I.abort(),mr(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(G=>{clearTimeout(q),G.ok?mr(v,"TestPingServer: ok",!0,m):mr(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(q),mr(v,"TestPingServer: error",!1,m)})}function mr(u,m,v,I,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),I(v)}catch{}}function _l(){this.g=new kr}function vl(u,m,v){const I=v||"";try{je(u,function(q,G){let ce=q;p(q)&&(ce=Fn(q)),m.push(I+G+"="+encodeURIComponent(ce))})}catch(q){throw m.push(I+"type="+encodeURIComponent("_badmap")),q}}function Xn(u){this.l=u.Ub||null,this.j=u.eb||!1}F(Xn,Qs),Xn.prototype.g=function(){return new as(this.l,this.j)},Xn.prototype.i=function(u){return function(){return u}}({});function as(u,m){qe.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}F(as,qe),t=as.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Jn(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||c).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,At(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Jn(this)),this.g&&(this.readyState=3,Jn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ls(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ls(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?At(this):Jn(this),this.readyState==3&&ls(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,At(this))},t.Qa=function(u){this.g&&(this.response=u,At(this))},t.ga=function(){this.g&&At(this)};function At(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Jn(u)}t.setRequestHeader=function(u,m){this.u.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Jn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(as.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function yl(u){let m="";return z(u,function(v,I){m+=I,m+=":",m+=v,m+=`\r
`}),m}function jo(u,m,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=yl(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):Me(u,m,v))}function It(u){qe.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}F(It,qe);var wc=/^https?$/i,wl=["POST","PUT"];t=It.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,m,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qn.g(),this.v=this.o?Ys(this.o):Ys(Qn),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(G){Ec(this,G);return}if(u=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var q in I)v.set(q,I[q]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const G of I.keys())v.set(G,I.get(G));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(G=>G.toLowerCase()=="content-type"),q=c.FormData&&u instanceof c.FormData,!(0<=Array.prototype.indexOf.call(wl,m,void 0))||I||q||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ce]of v)this.g.setRequestHeader(G,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zn(this),this.u=!0,this.g.send(u),this.u=!1}catch(G){Ec(this,G)}};function Ec(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,El(u),qo(u)}function El(u){u.A||(u.A=!0,He(u,"complete"),He(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,He(this,"complete"),He(this,"abort"),qo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qo(this,!0)),It.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ke(this):this.bb())},t.bb=function(){Ke(this)};function Ke(u){if(u.h&&typeof l<"u"&&(!u.v[1]||Ln(u)!=4||u.Z()!=2)){if(u.u&&Ln(u)==4)kn(u.Ea,0,u);else if(He(u,"readystatechange"),Ln(u)==4){u.h=!1;try{const ce=u.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var I;if(I=ce===0){var q=String(u.D).match(Tt)[1]||null;!q&&c.self&&c.self.location&&(q=c.self.location.protocol.slice(0,-1)),I=!wc.test(q?q.toLowerCase():"")}v=I}if(v)He(u,"complete"),He(u,"success");else{u.m=6;try{var G=2<Ln(u)?u.g.statusText:""}catch{G=""}u.l=G+" ["+u.Z()+"]",El(u)}}finally{qo(u)}}}}function qo(u,m){if(u.g){zn(u);const v=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||He(u,"ready");try{v.onreadystatechange=I}catch{}}}function zn(u){u.I&&(c.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Ln(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Ln(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Fo(m)}};function Tl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function af(u){const m={};u=(u.g&&2<=Ln(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(S(u[I]))continue;var v=D(u[I]);const q=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const G=m[q]||[];m[q]=G,G.push(v)}P(m,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ei(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function Tc(u){this.Aa=0,this.i=[],this.j=new mt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ei("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ei("baseRetryDelayMs",5e3,u),this.cb=Ei("retryDelaySeedMs",1e4,u),this.Wa=Ei("forwardChannelMaxRetries",2,u),this.wa=Ei("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ll(u&&u.concurrentRequestLimit),this.Da=new _l,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Tc.prototype,t.la=8,t.G=1,t.connect=function(u,m,v,I){me(0),this.W=u,this.H=m||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=Qo(this,null,this.W),us(this)};function Ho(u){if(Ic(u),u.G==3){var m=u.U++,v=bt(u.I);if(Me(v,"SID",u.K),Me(v,"RID",m),Me(v,"TYPE","terminate"),io(u,v),m=new Qt(u,u.j,m),m.L=2,m.v=fr(bt(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&c.Image&&(new Image().src=m.v,v=!0),v||(m.g=Pc(m.j,null),m.g.ea(m.v)),m.F=Date.now(),cn(m)}Sc(u)}function $o(u){u.g&&(Zo(u),u.g.cancel(),u.g=null)}function Ic(u){$o(u),u.u&&(c.clearTimeout(u.u),u.u=null),Go(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&c.clearTimeout(u.s),u.s=null)}function us(u){if(!ul(u.h)&&!u.s){u.s=!0;var m=u.Ga;Ae||re(),Y||(Ae(),Y=!0),we.add(m,u),u.B=0}}function lf(u,m){return is(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Be(E(u.Ga,u,m),Pl(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const q=new Qt(this,this.j,u);let G=this.o;if(this.S&&(G?(G=T(G),R(G,this.S)):G=this.S),this.m!==null||this.O||(q.H=G,G=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Il(this,q,m),v=bt(this.I),Me(v,"RID",u),Me(v,"CVER",22),this.D&&Me(v,"X-HTTP-Session-Id",this.D),io(this,v),G&&(this.O?m="headers="+encodeURIComponent(String(yl(G)))+"&"+m:this.m&&jo(v,this.m,G)),dt(this.h,q),this.Ua&&Me(v,"TYPE","init"),this.P?(Me(v,"$req",m),Me(v,"SID","null"),q.T=!0,hr(q,v,null)):hr(q,v,m),this.G=2}}else this.G==3&&(u?er(this,u):this.i.length==0||ul(this.h)||er(this))};function er(u,m){var v;m?v=m.l:v=u.U++;const I=bt(u.I);Me(I,"SID",u.K),Me(I,"RID",v),Me(I,"AID",u.T),io(u,I),u.m&&u.o&&jo(I,u.m,u.o),v=new Qt(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Il(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),dt(u.h,v),hr(v,I,m)}function io(u,m){u.H&&z(u.H,function(v,I){Me(m,I,v)}),u.l&&je({},function(v,I){Me(m,I,v)})}function Il(u,m,v){v=Math.min(u.i.length,v);var I=u.l?E(u.l.Na,u.l,u):null;e:{var q=u.i;let G=-1;for(;;){const ce=["count="+v];G==-1?0<v?(G=q[0].g,ce.push("ofs="+G)):G=0:ce.push("ofs="+G);let at=!0;for(let Bt=0;Bt<v;Bt++){let tt=q[Bt].g;const ct=q[Bt].map;if(tt-=G,0>tt)G=Math.max(0,q[Bt].g-100),at=!1;else try{vl(ct,ce,"req"+tt+"_")}catch{I&&I(ct)}}if(at){I=ce.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,I}function Dr(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Ae||re(),Y||(Ae(),Y=!0),we.add(m,u),u.v=0}}function Wo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Be(E(u.Fa,u),Pl(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Ko(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Be(E(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,me(10),$o(this),Ko(this))};function Zo(u){u.A!=null&&(c.clearTimeout(u.A),u.A=null)}function Ko(u){u.g=new Qt(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=bt(u.qa);Me(m,"RID","rpc"),Me(m,"SID",u.K),Me(m,"AID",u.T),Me(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Me(m,"TO",u.ja),Me(m,"TYPE","xmlhttp"),io(u,m),u.m&&u.o&&jo(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=fr(bt(m)),v.m=null,v.P=!0,Qr(v,u)}t.Za=function(){this.C!=null&&(this.C=null,$o(this),Wo(this),me(19))};function Go(u){u.C!=null&&(c.clearTimeout(u.C),u.C=null)}function Sl(u,m){var v=null;if(u.g==m){Go(u),Zo(u),u.g=null;var I=2}else if(Qe(u.h,m))v=m.D,ro(u.h,m),I=1;else return;if(u.G!=0){if(m.o)if(I==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var q=u.B;I=he(),He(I,new Te(I,v)),us(u)}else Dr(u);else if(q=m.s,q==3||q==0&&0<m.X||!(I==1&&lf(u,m)||I==2&&Wo(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),q){case 1:Ti(u,5);break;case 4:Ti(u,10);break;case 3:Ti(u,6);break;default:Ti(u,2)}}}function Pl(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function Ti(u,m){if(u.j.info("Error code "+m),m==2){var v=E(u.fb,u),I=u.Xa;const q=!I;I=new dr(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Uo(I,"https"),fr(I),q?ut(I.toString(),v):yc(I.toString(),v)}else me(2);u.G=0,u.l&&u.l.sa(m),Sc(u),Ic(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),me(2)):(this.j.info("Failed to ping google.com"),me(1))};function Sc(u){if(u.G=0,u.ka=[],u.l){const m=vi(u.h);(m.length!=0||u.i.length!=0)&&(B(u.ka,m),B(u.ka,u.i),u.h.i.length=0,V(u.i),u.i.length=0),u.l.ra()}}function Qo(u,m,v){var I=v instanceof dr?bt(v):new dr(v);if(I.g!="")m&&(I.g=m+"."+I.g),yi(I,I.s);else{var q=c.location;I=q.protocol,m=m?m+"."+q.hostname:q.hostname,q=+q.port;var G=new dr(null);I&&Uo(G,I),m&&(G.g=m),q&&yi(G,q),v&&(G.l=v),I=G}return v=u.D,m=u.ya,v&&m&&Me(I,v,m),Me(I,"VER",u.la),io(u,I),I}function Pc(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new It(new Xn({eb:v})):new It(u.pa),m.Ha(u.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Al(){}t=Al.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function so(){}so.prototype.g=function(u,m){return new tn(u,m)};function tn(u,m){qe.call(this),this.g=new Tc(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!S(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!S(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new gr(this)}F(tn,qe),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){Ho(this.g)},tn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=Fn(u),u=v);m.i.push(new no(m.Ya++,u)),m.G==3&&us(m)},tn.prototype.N=function(){this.g.l=null,delete this.j,Ho(this.g),delete this.g,tn.aa.N.call(this)};function Xr(u){ts.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}F(Xr,ts);function Ac(){j.call(this),this.status=1}F(Ac,j);function gr(u){this.g=u}F(gr,Al),gr.prototype.ua=function(){He(this.g,"a")},gr.prototype.ta=function(u){He(this.g,new Xr(u))},gr.prototype.sa=function(u){He(this.g,new Ac)},gr.prototype.ra=function(){He(this.g,"b")},so.prototype.createWebChannel=so.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,iT=function(){return new so},rT=function(){return he()},nT=$,am={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Un.NO_ERROR=0,Un.TIMEOUT=8,Un.HTTP_ERROR=6,Eh=Un,Gr.COMPLETE="complete",tT=Gr,Xs.EventType=Lr,Lr.OPEN="a",Lr.CLOSE="b",Lr.ERROR="c",Lr.MESSAGE="d",qe.prototype.listen=qe.prototype.K,Jl=Xs,eT=Xn,It.prototype.listenOnce=It.prototype.L,It.prototype.getLastError=It.prototype.Ka,It.prototype.getLastErrorCode=It.prototype.Ba,It.prototype.getStatus=It.prototype.Z,It.prototype.getResponseJson=It.prototype.Oa,It.prototype.getResponseText=It.prototype.oa,It.prototype.send=It.prototype.ea,It.prototype.setWithCredentials=It.prototype.Ha,J1=It}).apply(typeof th<"u"?th:typeof self<"u"?self:typeof window<"u"?window:{});const qy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}In.UNAUTHENTICATED=new In(null),In.GOOGLE_CREDENTIALS=new In("google-credentials-uid"),In.FIRST_PARTY=new In("first-party-uid"),In.MOCK_USER=new In("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nl="10.13.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=new jd("@firebase/firestore");function Hl(){return Ao.logLevel}function ye(t,...e){if(Ao.logLevel<=et.DEBUG){const n=e.map(Dg);Ao.debug(`Firestore (${nl}): ${t}`,...n)}}function Zi(t,...e){if(Ao.logLevel<=et.ERROR){const n=e.map(Dg);Ao.error(`Firestore (${nl}): ${t}`,...n)}}function Ba(t,...e){if(Ao.logLevel<=et.WARN){const n=e.map(Dg);Ao.warn(`Firestore (${nl}): ${t}`,...n)}}function Dg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(t="Unexpected state"){const e=`FIRESTORE (${nl}) INTERNAL ASSERTION FAILED: `+t;throw Zi(e),new Error(e)}function ft(t,e){t||Oe()}function Ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Yi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ek{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(In.UNAUTHENTICATED))}shutdown(){}}class tk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class nk{constructor(e){this.t=e,this.currentUser=In.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let o=new Fi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Fi,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},c=d=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),l()};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Fi)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ft(typeof r.accessToken=="string"),new sT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string"),new In(e)}}class rk{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=In.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ik{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new rk(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(In.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ok{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=o=>{o.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,ye("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ft(typeof n.token=="string"),this.R=n.token,new sk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=ak(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function st(t,e){return t<e?-1:t>e?1:0}function ja(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new pe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kt.fromMillis(Date.now())}static fromDate(e){return Kt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Kt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new Kt(0,0))}static max(){return new Fe(new Kt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n,r){n===void 0?n=0:n>e.length&&Oe(),r===void 0?r=e.length-n:r>e.length-n&&Oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ju.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ju?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),l=n.get(i);if(o<l)return-1;if(o>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class wt extends ju{construct(e,n,r){return new wt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new wt(n)}static emptyPath(){return new wt([])}}const lk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends ju{construct(e,n,r){return new fn(e,n,r)}static isValidIdentifier(e){return lk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new fn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new pe(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new pe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new pe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else c==="`"?(l=!l,i++):c!=="."||l?(r+=c,i++):(o(),i++)}if(o(),l)throw new pe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fn(n)}static emptyPath(){return new fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(wt.fromString(e))}static fromName(e){return new Pe(wt.fromString(e).popFirst(5))}static empty(){return new Pe(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return wt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new wt(e.slice()))}}function uk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Fe.fromTimestamp(r===1e9?new Kt(n+1,0):new Kt(n,r));return new Bs(i,Pe.empty(),e)}function ck(t){return new Bs(t.readTime,t.key,-1)}class Bs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Bs(Fe.min(),Pe.empty(),-1)}static max(){return new Bs(Fe.max(),Pe.empty(),-1)}}function hk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Pe.comparator(t.documentKey,e.documentKey),n!==0?n:st(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(t){if(t.code!==te.FAILED_PRECONDITION||t.message!==dk)throw t;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ie((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ie?n:ie.resolve(n)}catch(n){return ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ie.reject(n)}static resolve(e){return new ie((n,r)=>{n(e)})}static reject(e){return new ie((n,r)=>{r(e)})}static waitFor(e){return new ie((n,r)=>{let i=0,o=0,l=!1;e.forEach(c=>{++i,c.next(()=>{++o,l&&o===i&&n()},d=>r(d))}),l=!0,o===i&&n()})}static or(e){let n=ie.resolve(!1);for(const r of e)n=n.next(i=>i?ie.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new ie((r,i)=>{const o=e.length,l=new Array(o);let c=0;for(let d=0;d<o;d++){const p=d;n(e[p]).next(g=>{l[p]=g,++c,c===o&&r(l)},g=>i(g))}})}static doWhile(e,n){return new ie((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function pk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function lc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Mg.oe=-1;function qd(t){return t==null}function ad(t){return t===0&&1/t==-1/0}function mk(t){return typeof t=="number"&&Number.isInteger(t)&&!ad(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function rl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function aT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n){this.comparator=e,this.root=n||dn.EMPTY}insert(e,n){return new Lt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nh(this.root,e,this.comparator,!1)}getReverseIterator(){return new nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nh(this.root,e,this.comparator,!0)}}class nh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??dn.RED,this.left=i??dn.EMPTY,this.right=o??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new dn(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return dn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Oe();const e=this.left.check();if(e!==this.right.check())throw Oe();return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe()}get value(){throw Oe()}get color(){throw Oe()}get left(){throw Oe()}get right(){throw Oe()}copy(e,n,r,i,o){return this}insert(e,n,r){return new dn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $y(this.data.getIterator())}getIteratorFrom(e){return new $y(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof mn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new mn(this.comparator);return n.data=e,n}}class $y{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.fields=e,e.sort(fn.comparator)}static empty(){return new Br([])}unionWith(e){let n=new mn(fn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Br(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ja(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new lT("Invalid base64 string: "+o):o}}(e);return new _n(n)}static fromUint8Array(e){const n=function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o}(e);return new _n(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_n.EMPTY_BYTE_STRING=new _n("");const gk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function js(t){if(ft(!!t),typeof t=="string"){let e=0;const n=gk.exec(t);if(ft(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ft(t.seconds),nanos:Ft(t.nanos)}}function Ft(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xo(t){return typeof t=="string"?_n.fromBase64String(t):_n.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Vg(t){const e=t.mapValue.fields.__previous_value__;return Og(e)?Vg(e):e}function qu(t){const e=js(t.mapValue.fields.__local_write_time__.timestampValue);return new Kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,n,r,i,o,l,c,d,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=p}}class Hu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Hu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Hu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Co(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Og(t)?4:yk(t)?9007199254740991:vk(t)?10:11:Oe()}function fi(t,e){if(t===e)return!0;const n=Co(t);if(n!==Co(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qu(t).isEqual(qu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=js(i.timestampValue),c=js(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return xo(i.bytesValue).isEqual(xo(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ft(i.geoPointValue.latitude)===Ft(o.geoPointValue.latitude)&&Ft(i.geoPointValue.longitude)===Ft(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ft(i.integerValue)===Ft(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=Ft(i.doubleValue),c=Ft(o.doubleValue);return l===c?ad(l)===ad(c):isNaN(l)&&isNaN(c)}return!1}(t,e);case 9:return ja(t.arrayValue.values||[],e.arrayValue.values||[],fi);case 10:case 11:return function(i,o){const l=i.mapValue.fields||{},c=o.mapValue.fields||{};if(Hy(l)!==Hy(c))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(c[d]===void 0||!fi(l[d],c[d])))return!1;return!0}(t,e);default:return Oe()}}function $u(t,e){return(t.values||[]).find(n=>fi(n,e))!==void 0}function qa(t,e){if(t===e)return 0;const n=Co(t),r=Co(e);if(n!==r)return st(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return st(t.booleanValue,e.booleanValue);case 2:return function(o,l){const c=Ft(o.integerValue||o.doubleValue),d=Ft(l.integerValue||l.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(t,e);case 3:return Wy(t.timestampValue,e.timestampValue);case 4:return Wy(qu(t),qu(e));case 5:return st(t.stringValue,e.stringValue);case 6:return function(o,l){const c=xo(o),d=xo(l);return c.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const c=o.split("/"),d=l.split("/");for(let p=0;p<c.length&&p<d.length;p++){const g=st(c[p],d[p]);if(g!==0)return g}return st(c.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const c=st(Ft(o.latitude),Ft(l.latitude));return c!==0?c:st(Ft(o.longitude),Ft(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Zy(t.arrayValue,e.arrayValue);case 10:return function(o,l){var c,d,p,g;const y=o.fields||{},E=l.fields||{},k=(c=y.value)===null||c===void 0?void 0:c.arrayValue,F=(d=E.value)===null||d===void 0?void 0:d.arrayValue,V=st(((p=k==null?void 0:k.values)===null||p===void 0?void 0:p.length)||0,((g=F==null?void 0:F.values)===null||g===void 0?void 0:g.length)||0);return V!==0?V:Zy(k,F)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===rh.mapValue&&l===rh.mapValue)return 0;if(o===rh.mapValue)return 1;if(l===rh.mapValue)return-1;const c=o.fields||{},d=Object.keys(c),p=l.fields||{},g=Object.keys(p);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const E=st(d[y],g[y]);if(E!==0)return E;const k=qa(c[d[y]],p[g[y]]);if(k!==0)return k}return st(d.length,g.length)}(t.mapValue,e.mapValue);default:throw Oe()}}function Wy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return st(t,e);const n=js(t),r=js(e),i=st(n.seconds,r.seconds);return i!==0?i:st(n.nanos,r.nanos)}function Zy(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=qa(n[i],r[i]);if(o)return o}return st(n.length,r.length)}function Ha(t){return lm(t)}function lm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=js(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return xo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Pe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=lm(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const l of r)o?o=!1:i+=",",i+=`${l}:${lm(n.fields[l])}`;return i+"}"}(t.mapValue):Oe()}function Ky(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function um(t){return!!t&&"integerValue"in t}function Fg(t){return!!t&&"arrayValue"in t}function Gy(t){return!!t&&"nullValue"in t}function Qy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Th(t){return!!t&&"mapValue"in t}function vk(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function pu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return rl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=pu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function yk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.value=e}static empty(){return new Tr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Th(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pu(n)}setAll(e){let n=fn.emptyPath(),r={},i=[];e.forEach((l,c)=>{if(!n.isImmediateParentOf(c)){const d=this.getFieldsMap(n);this.applyChanges(d,r,i),r={},i=[],n=c.popLast()}l?r[c.lastSegment()]=pu(l):i.push(c.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Th(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Th(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){rl(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Tr(pu(this.value))}}function uT(t){const e=[];return rl(t.fields,(n,r)=>{const i=new fn([n]);if(Th(r)){const o=uT(r.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new Br(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n,r,i,o,l,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new Pn(e,0,Fe.min(),Fe.min(),Fe.min(),Tr.empty(),0)}static newFoundDocument(e,n,r,i){return new Pn(e,1,n,Fe.min(),r,i,0)}static newNoDocument(e,n){return new Pn(e,2,n,Fe.min(),Fe.min(),Tr.empty(),0)}static newUnknownDocument(e,n){return new Pn(e,3,n,Fe.min(),Fe.min(),Tr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n){this.position=e,this.inclusive=n}}function Yy(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],l=t.position[i];if(o.field.isKeyField()?r=Pe.comparator(Pe.fromName(l.referenceValue),n.key):r=qa(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Xy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!fi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,n="asc"){this.field=e,this.dir=n}}function wk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{}class Zt extends cT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Tk(e,n,r):n==="array-contains"?new Pk(e,r):n==="in"?new Ak(e,r):n==="not-in"?new xk(e,r):n==="array-contains-any"?new Ck(e,r):new Zt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Ik(e,r):new Sk(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(qa(n,this.value)):n!==null&&Co(this.value)===Co(n)&&this.matchesComparison(qa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $r extends cT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new $r(e,n)}matches(e){return hT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function hT(t){return t.op==="and"}function dT(t){return Ek(t)&&hT(t)}function Ek(t){for(const e of t.filters)if(e instanceof $r)return!1;return!0}function cm(t){if(t instanceof Zt)return t.field.canonicalString()+t.op.toString()+Ha(t.value);if(dT(t))return t.filters.map(e=>cm(e)).join(",");{const e=t.filters.map(n=>cm(n)).join(",");return`${t.op}(${e})`}}function fT(t,e){return t instanceof Zt?function(r,i){return i instanceof Zt&&r.op===i.op&&r.field.isEqual(i.field)&&fi(r.value,i.value)}(t,e):t instanceof $r?function(r,i){return i instanceof $r&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,l,c)=>o&&fT(l,i.filters[c]),!0):!1}(t,e):void Oe()}function pT(t){return t instanceof Zt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ha(n.value)}`}(t):t instanceof $r?function(n){return n.op.toString()+" {"+n.getFilters().map(pT).join(" ,")+"}"}(t):"Filter"}class Tk extends Zt{constructor(e,n,r){super(e,n,r),this.key=Pe.fromName(r.referenceValue)}matches(e){const n=Pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Ik extends Zt{constructor(e,n){super(e,"in",n),this.keys=mT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Sk extends Zt{constructor(e,n){super(e,"not-in",n),this.keys=mT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function mT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Pe.fromName(r.referenceValue))}class Pk extends Zt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fg(n)&&$u(n.arrayValue,this.value)}}class Ak extends Zt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$u(this.value.arrayValue,n)}}class xk extends Zt{constructor(e,n){super(e,"not-in",n)}matches(e){if($u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!$u(this.value.arrayValue,n)}}class Ck extends Zt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>$u(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,n=null,r=[],i=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=c,this.ue=null}}function Jy(t,e=null,n=[],r=[],i=null,o=null,l=null){return new Rk(t,e,n,r,i,o,l)}function Ug(t){const e=Ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>cm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),qd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ha(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ha(r)).join(",")),e.ue=n}return e.ue}function zg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!wk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!fT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Xy(t.startAt,e.startAt)&&Xy(t.endAt,e.endAt)}function hm(t){return Pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n=null,r=[],i=[],o=null,l="F",c=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function kk(t,e,n,r,i,o,l,c){return new il(t,e,n,r,i,o,l,c)}function Bg(t){return new il(t)}function e0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gT(t){return t.collectionGroup!==null}function mu(t){const e=Ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new mn(fn.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(c=c.add(p.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Wu(o,r))}),n.has(fn.keyField().canonicalString())||e.ce.push(new Wu(fn.keyField(),r))}return e.ce}function ui(t){const e=Ue(t);return e.le||(e.le=Lk(e,mu(t))),e.le}function Lk(t,e){if(t.limitType==="F")return Jy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Wu(i.field,o)});const n=t.endAt?new ld(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ld(t.startAt.position,t.startAt.inclusive):null;return Jy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function dm(t,e){const n=t.filters.concat([e]);return new il(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function fm(t,e,n){return new il(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hd(t,e){return zg(ui(t),ui(e))&&t.limitType===e.limitType}function _T(t){return`${Ug(ui(t))}|lt:${t.limitType}`}function ia(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>pT(i)).join(", ")}]`),qd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ha(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ha(i)).join(",")),`Target(${r})`}(ui(t))}; limitType=${t.limitType})`}function $d(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Pe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of mu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(l,c,d){const p=Yy(l,c,d);return l.inclusive?p<=0:p<0}(r.startAt,mu(r),i)||r.endAt&&!function(l,c,d){const p=Yy(l,c,d);return l.inclusive?p>=0:p>0}(r.endAt,mu(r),i))}(t,e)}function bk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vT(t){return(e,n)=>{let r=!1;for(const i of mu(t)){const o=Nk(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Nk(t,e,n){const r=t.field.isKeyField()?Pe.comparator(e.key,n.key):function(o,l,c){const d=l.data.field(o),p=c.data.field(o);return d!==null&&p!==null?qa(d,p):Oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){rl(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return aT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=new Lt(Pe.comparator);function Ki(){return Dk}const yT=new Lt(Pe.comparator);function eu(...t){let e=yT;for(const n of t)e=e.insert(n.key,n);return e}function wT(t){let e=yT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function mo(){return gu()}function ET(){return gu()}function gu(){return new sl(t=>t.toString(),(t,e)=>t.isEqual(e))}const Mk=new Lt(Pe.comparator),Ok=new mn(Pe.comparator);function Xe(...t){let e=Ok;for(const n of t)e=e.add(n);return e}const Vk=new mn(st);function Fk(){return Vk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ad(e)?"-0":e}}function TT(t){return{integerValue:""+t}}function Uk(t,e){return mk(e)?TT(e):jg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(){this._=void 0}}function zk(t,e,n){return t instanceof ud?function(i,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Og(o)&&(o=Vg(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}}(n,e):t instanceof Zu?ST(t,e):t instanceof Ku?PT(t,e):function(i,o){const l=IT(i,o),c=t0(l)+t0(i.Pe);return um(l)&&um(i.Pe)?TT(c):jg(i.serializer,c)}(t,e)}function Bk(t,e,n){return t instanceof Zu?ST(t,e):t instanceof Ku?PT(t,e):n}function IT(t,e){return t instanceof cd?function(r){return um(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class ud extends Wd{}class Zu extends Wd{constructor(e){super(),this.elements=e}}function ST(t,e){const n=AT(e);for(const r of t.elements)n.some(i=>fi(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ku extends Wd{constructor(e){super(),this.elements=e}}function PT(t,e){let n=AT(e);for(const r of t.elements)n=n.filter(i=>!fi(i,r));return{arrayValue:{values:n}}}class cd extends Wd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function t0(t){return Ft(t.integerValue||t.doubleValue)}function AT(t){return Fg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function jk(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Zu&&i instanceof Zu||r instanceof Ku&&i instanceof Ku?ja(r.elements,i.elements,fi):r instanceof cd&&i instanceof cd?fi(r.Pe,i.Pe):r instanceof ud&&i instanceof ud}(t.transform,e.transform)}class qk{constructor(e,n){this.version=e,this.transformResults=n}}class Ui{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ui}static exists(e){return new Ui(void 0,e)}static updateTime(e){return new Ui(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ih(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Zd{}function xT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new RT(t.key,Ui.none()):new uc(t.key,t.data,Ui.none());{const n=t.data,r=Tr.empty();let i=new mn(fn.comparator);for(let o of e.fields)if(!i.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),i=i.add(o)}return new Do(t.key,r,new Br(i.toArray()),Ui.none())}}function Hk(t,e,n){t instanceof uc?function(i,o,l){const c=i.value.clone(),d=r0(i.fieldTransforms,o,l.transformResults);c.setAll(d),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Do?function(i,o,l){if(!Ih(i.precondition,o))return void o.convertToUnknownDocument(l.version);const c=r0(i.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(CT(i)),d.setAll(c),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function _u(t,e,n,r){return t instanceof uc?function(o,l,c,d){if(!Ih(o.precondition,l))return c;const p=o.value.clone(),g=i0(o.fieldTransforms,d,l);return p.setAll(g),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(t,e,n,r):t instanceof Do?function(o,l,c,d){if(!Ih(o.precondition,l))return c;const p=i0(o.fieldTransforms,d,l),g=l.data;return g.setAll(CT(o)),g.setAll(p),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(o,l,c){return Ih(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(t,e,n)}function $k(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=IT(r.transform,i||null);o!=null&&(n===null&&(n=Tr.empty()),n.set(r.field,o))}return n||null}function n0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ja(r,i,(o,l)=>jk(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class uc extends Zd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Do extends Zd{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function CT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function r0(t,e,n){const r=new Map;ft(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],l=o.transform,c=e.data.field(o.field);r.set(o.field,Bk(l,c,n[i]))}return r}function i0(t,e,n){const r=new Map;for(const i of t){const o=i.transform,l=n.data.field(i.field);r.set(i.field,zk(o,l,e))}return r}class RT extends Zd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Wk extends Zd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Hk(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_u(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_u(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ET();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=n.has(i.key)?null:c;const d=xT(l,c);d!==null&&r.set(i.key,d),l.isValidDocument()||l.convertToNoDocument(Fe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Xe())}isEqual(e){return this.batchId===e.batchId&&ja(this.mutations,e.mutations,(n,r)=>n0(n,r))&&ja(this.baseMutations,e.baseMutations,(n,r)=>n0(n,r))}}class qg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ft(e.mutations.length===r.length);let i=function(){return Mk}();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new qg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,nt;function Qk(t){switch(t){default:return Oe();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0}}function kT(t){if(t===void 0)return Zi("GRPC error has no .code"),te.UNKNOWN;switch(t){case qt.OK:return te.OK;case qt.CANCELLED:return te.CANCELLED;case qt.UNKNOWN:return te.UNKNOWN;case qt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case qt.INTERNAL:return te.INTERNAL;case qt.UNAVAILABLE:return te.UNAVAILABLE;case qt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case qt.NOT_FOUND:return te.NOT_FOUND;case qt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case qt.ABORTED:return te.ABORTED;case qt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case qt.DATA_LOSS:return te.DATA_LOSS;default:return Oe()}}(nt=qt||(qt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk=new vo([4294967295,4294967295],0);function s0(t){const e=Yk().encode(t),n=new X1;return n.update(e),new Uint8Array(n.digest())}function o0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new vo([n,r],0),new vo([i,o],0)]}class Hg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new tu(`Invalid padding: ${n}`);if(r<0)throw new tu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new tu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new tu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=vo.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(vo.fromNumber(r)));return i.compare(Xk)===1&&(i=new vo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=s0(e),[r,i]=o0(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(r,i,o);if(!this.de(l))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Hg(o,i,n);return r.forEach(c=>l.insert(c)),l}insert(e){if(this.Ie===0)return;const n=s0(e),[r,i]=o0(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(r,i,o);this.Ae(l)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,cc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Kd(Fe.min(),i,new Lt(st),Ki(),Xe())}}class cc{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new cc(r,n,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class LT{constructor(e,n){this.targetId=e,this.me=n}}class bT{constructor(e,n,r=_n.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class a0{constructor(){this.fe=0,this.ge=u0(),this.pe=_n.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Xe(),n=Xe(),r=Xe();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Oe()}}),new cc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=u0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ft(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Jk{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ki(),this.qe=l0(),this.Qe=new Lt(st)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const o=i.target;if(hm(o))if(r===0){const l=new Pe(o.path);this.Ue(n,l,Pn.newNoDocument(l,Fe.min()))}else ft(r===1);else{const l=this.Ye(n);if(l!==r){const c=this.Ze(e),d=c?this.Xe(c,e,l):1;if(d!==0){this.je(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,p)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let l,c;try{l=xo(r).toUint8Array()}catch(d){if(d instanceof lT)return Ba("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new Hg(l,i,o)}catch(d){return Ba(d instanceof tu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const l=this.Le.tt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,o,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((o,l)=>{const c=this.Je(l);if(c){if(o.current&&hm(c.target)){const d=new Pe(c.target.path);this.ke.get(d)!==null||this.it(l,d)||this.Ue(l,d,Pn.newNoDocument(d,e))}o.be&&(n.set(l,o.ve()),o.Ce())}});let r=Xe();this.qe.forEach((o,l)=>{let c=!0;l.forEachWhile(d=>{const p=this.Je(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ke.forEach((o,l)=>l.setReadTime(e));const i=new Kd(e,n,this.Qe,this.ke,r);return this.ke=Ki(),this.qe=l0(),this.Qe=new Lt(st),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new a0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new mn(st),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ye("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new a0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function l0(){return new Lt(Pe.comparator)}function u0(){return new Lt(Pe.comparator)}const eL={asc:"ASCENDING",desc:"DESCENDING"},tL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nL={and:"AND",or:"OR"};class rL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function pm(t,e){return t.useProto3Json||qd(e)?e:{value:e}}function hd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function iL(t,e){return hd(t,e.toTimestamp())}function ci(t){return ft(!!t),Fe.fromTimestamp(function(n){const r=js(n);return new Kt(r.seconds,r.nanos)}(t))}function $g(t,e){return mm(t,e).canonicalString()}function mm(t,e){const n=function(i){return new wt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function DT(t){const e=wt.fromString(t);return ft(UT(e)),e}function gm(t,e){return $g(t.databaseId,e.path)}function Kf(t,e){const n=DT(e);if(n.get(1)!==t.databaseId.projectId)throw new pe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new pe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Pe(OT(n))}function MT(t,e){return $g(t.databaseId,e)}function sL(t){const e=DT(t);return e.length===4?wt.emptyPath():OT(e)}function _m(t){return new wt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function OT(t){return ft(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function c0(t,e,n){return{name:gm(t,e),fields:n.value.mapValue.fields}}function oL(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(p,g){return p.useProto3Json?(ft(g===void 0||typeof g=="string"),_n.fromBase64String(g||"")):(ft(g===void 0||g instanceof Buffer||g instanceof Uint8Array),_n.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(p){const g=p.code===void 0?te.UNKNOWN:kT(p.code);return new pe(g,p.message||"")}(l);n=new bT(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Kf(t,r.document.name),o=ci(r.document.updateTime),l=r.document.createTime?ci(r.document.createTime):Fe.min(),c=new Tr({mapValue:{fields:r.document.fields}}),d=Pn.newFoundDocument(i,o,l,c),p=r.targetIds||[],g=r.removedTargetIds||[];n=new Sh(p,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Kf(t,r.document),o=r.readTime?ci(r.readTime):Fe.min(),l=Pn.newNoDocument(i,o),c=r.removedTargetIds||[];n=new Sh([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Kf(t,r.document),o=r.removedTargetIds||[];n=new Sh([],o,i,null)}else{if(!("filter"in e))return Oe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,l=new Gk(i,o),c=r.targetId;n=new LT(c,l)}}return n}function aL(t,e){let n;if(e instanceof uc)n={update:c0(t,e.key,e.value)};else if(e instanceof RT)n={delete:gm(t,e.key)};else if(e instanceof Do)n={update:c0(t,e.key,e.data),updateMask:gL(e.fieldMask)};else{if(!(e instanceof Wk))return Oe();n={verify:gm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const c=l.transform;if(c instanceof ud)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Zu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ku)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof cd)return{fieldPath:l.field.canonicalString(),increment:c.Pe};throw Oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:iL(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Oe()}(t,e.precondition)),n}function lL(t,e){return t&&t.length>0?(ft(e!==void 0),t.map(n=>function(i,o){let l=i.updateTime?ci(i.updateTime):ci(o);return l.isEqual(Fe.min())&&(l=ci(o)),new qk(l,i.transformResults||[])}(n,e))):[]}function uL(t,e){return{documents:[MT(t,e.path)]}}function cL(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=MT(t,i);const o=function(p){if(p.length!==0)return FT($r.create(p,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(p){if(p.length!==0)return p.map(g=>function(E){return{field:sa(E.field),direction:fL(E.dir)}}(g))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const c=pm(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{_t:n,parent:i}}function hL(t){let e=sL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ft(r===1);const g=n.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=function(y){const E=VT(y);return E instanceof $r&&dT(E)?E.getFilters():[E]}(n.where));let l=[];n.orderBy&&(l=function(y){return y.map(E=>function(F){return new Wu(oa(F.field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(F.direction))}(E))}(n.orderBy));let c=null;n.limit&&(c=function(y){let E;return E=typeof y=="object"?y.value:y,qd(E)?null:E}(n.limit));let d=null;n.startAt&&(d=function(y){const E=!!y.before,k=y.values||[];return new ld(k,E)}(n.startAt));let p=null;return n.endAt&&(p=function(y){const E=!y.before,k=y.values||[];return new ld(k,E)}(n.endAt)),kk(e,i,l,o,c,"F",d,p)}function dL(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function VT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=oa(n.unaryFilter.field);return Zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=oa(n.unaryFilter.field);return Zt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=oa(n.unaryFilter.field);return Zt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=oa(n.unaryFilter.field);return Zt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Oe()}}(t):t.fieldFilter!==void 0?function(n){return Zt.create(oa(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $r.create(n.compositeFilter.filters.map(r=>VT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Oe()}}(n.compositeFilter.op))}(t):Oe()}function fL(t){return eL[t]}function pL(t){return tL[t]}function mL(t){return nL[t]}function sa(t){return{fieldPath:t.canonicalString()}}function oa(t){return fn.fromServerFormat(t.fieldPath)}function FT(t){return t instanceof Zt?function(n){if(n.op==="=="){if(Qy(n.value))return{unaryFilter:{field:sa(n.field),op:"IS_NAN"}};if(Gy(n.value))return{unaryFilter:{field:sa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Qy(n.value))return{unaryFilter:{field:sa(n.field),op:"IS_NOT_NAN"}};if(Gy(n.value))return{unaryFilter:{field:sa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sa(n.field),op:pL(n.op),value:n.value}}}(t):t instanceof $r?function(n){const r=n.getFilters().map(i=>FT(i));return r.length===1?r[0]:{compositeFilter:{op:mL(n.op),filters:r}}}(t):Oe()}function gL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function UT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n,r,i,o=Fe.min(),l=Fe.min(),c=_n.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new As(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e){this.ct=e}}function vL(t){const e=hL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?fm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(){this.un=new wL}addToCollectionParentIndex(e,n){return this.un.add(n),ie.resolve()}getCollectionParents(e,n){return ie.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ie.resolve()}deleteFieldIndex(e,n){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,n){return ie.resolve()}getDocumentsMatchingTarget(e,n){return ie.resolve(null)}getIndexType(e,n){return ie.resolve(0)}getFieldIndexes(e,n){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,n){return ie.resolve(Bs.min())}getMinOffsetFromCollectionGroup(e,n){return ie.resolve(Bs.min())}updateCollectionGroup(e,n,r){return ie.resolve()}updateIndexEntries(e,n){return ie.resolve()}}class wL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new mn(wt.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mn(wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new $a(0)}static kn(){return new $a(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(){this.changes=new sl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ie.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&_u(r.mutation,i,Br.empty(),Kt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Xe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Xe()){const i=mo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let l=eu();return o.forEach((c,d)=>{l=l.insert(c,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=mo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Xe()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,c)=>{n.set(l,c)})})}computeViews(e,n,r,i){let o=Ki();const l=gu(),c=function(){return gu()}();return n.forEach((d,p)=>{const g=r.get(p.key);i.has(p.key)&&(g===void 0||g.mutation instanceof Do)?o=o.insert(p.key,p):g!==void 0?(l.set(p.key,g.mutation.getFieldMask()),_u(g.mutation,p,g.mutation.getFieldMask(),Kt.now())):l.set(p.key,Br.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((p,g)=>l.set(p,g)),n.forEach((p,g)=>{var y;return c.set(p,new TL(g,(y=l.get(p))!==null&&y!==void 0?y:null))}),c))}recalculateAndSaveOverlays(e,n){const r=gu();let i=new Lt((l,c)=>l-c),o=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const c of l)c.keys().forEach(d=>{const p=n.get(d);if(p===null)return;let g=r.get(d)||Br.empty();g=c.applyToLocalView(p,g),r.set(d,g);const y=(i.get(c.batchId)||Xe()).add(d);i=i.insert(c.batchId,y)})}).next(()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),p=d.key,g=d.value,y=ET();g.forEach(E=>{if(!o.has(E)){const k=xT(n.get(E),r.get(E));k!==null&&y.set(E,k),o=o.add(E)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,y))}return ie.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(l){return Pe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):ie.resolve(mo());let c=-1,d=o;return l.next(p=>ie.forEach(p,(g,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(g)?ie.resolve():this.remoteDocumentCache.getEntry(e,g).next(E=>{d=d.insert(g,E)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,d,p,Xe())).next(g=>({batchId:c,changes:wT(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Pe(n)).next(r=>{let i=eu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let l=eu();return this.indexManager.getCollectionParents(e,o).next(c=>ie.forEach(c,d=>{const p=function(y,E){return new il(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next(g=>{g.forEach((y,E)=>{l=l.insert(y,E)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(l=>{o.forEach((d,p)=>{const g=p.getKey();l.get(g)===null&&(l=l.insert(g,Pn.newInvalidDocument(g)))});let c=eu();return l.forEach((d,p)=>{const g=o.get(d);g!==void 0&&_u(g.mutation,p,Br.empty(),Kt.now()),$d(n,p)&&(c=c.insert(d,p))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ie.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ci(i.createTime)}}(n)),ie.resolve()}getNamedQuery(e,n){return ie.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:vL(i.bundledQuery),readTime:ci(i.readTime)}}(n)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(){this.overlays=new Lt(Pe.comparator),this.Ir=new Map}getOverlay(e,n){return ie.resolve(this.overlays.get(n))}getOverlays(e,n){const r=mo();return ie.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),ie.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),ie.resolve()}getOverlaysForCollection(e,n,r){const i=mo(),o=n.length+1,l=new Pe(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const d=c.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>r&&i.set(d.getKey(),d)}return ie.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Lt((p,g)=>p-g);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let g=o.get(p.largestBatchId);g===null&&(g=mo(),o=o.insert(p.largestBatchId,g)),g.set(p.getKey(),p)}}const c=mo(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,g)=>c.set(p,g)),!(c.size()>=i)););return ie.resolve(c)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Kk(n,r));let o=this.Ir.get(n);o===void 0&&(o=Xe(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(){this.sessionToken=_n.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(){this.Tr=new mn(rn.Er),this.dr=new mn(rn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new rn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new rn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Pe(new wt([])),r=new rn(n,e),i=new rn(n,e+1),o=[];return this.dr.forEachInRange([r,i],l=>{this.Vr(l),o.push(l.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Pe(new wt([])),r=new rn(n,e),i=new rn(n,e+1);let o=Xe();return this.dr.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new rn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Pe.comparator(e.key,n.key)||st(e.wr,n.wr)}static Ar(e,n){return st(e.wr,n.wr)||Pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new mn(rn.Er)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Zk(o,n,r,i);this.mutationQueue.push(l);for(const c of i)this.br=this.br.add(new rn(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ie.resolve(l)}lookupMutationBatch(e,n){return ie.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),o=i<0?0:i;return ie.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rn(n,0),i=new rn(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],l=>{const c=this.Dr(l.wr);o.push(c)}),ie.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new mn(st);return n.forEach(i=>{const o=new rn(i,0),l=new rn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],c=>{r=r.add(c.wr)})}),ie.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Pe.isDocumentKey(o)||(o=o.child(""));const l=new rn(new Pe(o),0);let c=new mn(st);return this.br.forEachWhile(d=>{const p=d.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(c=c.add(d.wr)),!0)},l),ie.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ft(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ie.forEach(n.mutations,i=>{const o=new rn(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new rn(n,0),i=this.br.firstAfterOrEqual(r);return ie.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e){this.Mr=e,this.docs=function(){return new Lt(Pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,l=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ie.resolve(r?r.document.mutableCopy():Pn.newInvalidDocument(n))}getEntries(e,n){let r=Ki();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Pn.newInvalidDocument(i))}),ie.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Ki();const l=n.path,c=new Pe(l.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:p,value:{document:g}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||hk(ck(g),r)<=0||(i.has(g.key)||$d(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return ie.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Oe()}Or(e,n){return ie.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new RL(this)}getSize(e){return ie.resolve(this.size)}}class RL extends EL{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),ie.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.persistence=e,this.Nr=new sl(n=>Ug(n),zg),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Wg,this.targetCount=0,this.kr=$a.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),ie.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new $a(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ie.resolve()}updateTargetData(e,n){return this.Kn(n),ie.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Nr.forEach((l,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),ie.waitFor(o).next(()=>i)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return ie.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),ie.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),ie.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ie.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return ie.resolve(r)}containsKey(e,n){return ie.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Mg(0),this.Kr=!1,this.Kr=!0,this.$r=new AL,this.referenceDelegate=e(this),this.Ur=new kL(this),this.indexManager=new yL,this.remoteDocumentCache=function(i){return new CL(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new _L(n),this.Gr=new SL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new PL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new xL(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ye("MemoryPersistence","Starting transaction:",e);const i=new bL(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return ie.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class bL extends fk{constructor(e){super(),this.currentSequenceNumber=e}}class Zg{constructor(e){this.persistence=e,this.Jr=new Wg,this.Yr=null}static Zr(e){return new Zg(e)}get Xr(){if(this.Yr)return this.Yr;throw Oe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),ie.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ie.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Xr,r=>{const i=Pe.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,Fe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ie.or([()=>ie.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Xe(),i=Xe();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Kg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return NC()?8:pk(xn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Yi(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new NL;return this.Xi(e,n,l).next(c=>{if(o.result=c,this.zi)return this.es(e,n,l,c.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Hl()<=et.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",ia(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ie.resolve()):(Hl()<=et.DEBUG&&ye("QueryEngine","Query:",ia(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Hl()<=et.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",ia(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ui(n))):ie.resolve())}Yi(e,n){if(e0(n))return ie.resolve(null);let r=ui(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=fm(n,null,"F"),r=ui(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Xe(...o);return this.Ji.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(d=>{const p=this.ts(n,c);return this.ns(n,p,l,d.readTime)?this.Yi(e,fm(n,null,"F")):this.rs(e,p,n,d)}))})))}Zi(e,n,r,i){return e0(n)||i.isEqual(Fe.min())?ie.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const l=this.ts(n,o);return this.ns(n,l,r,i)?ie.resolve(null):(Hl()<=et.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ia(n)),this.rs(e,l,n,uk(i,-1)).next(c=>c))})}ts(e,n){let r=new mn(vT(e));return n.forEach((i,o)=>{$d(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return Hl()<=et.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",ia(n)),this.Ji.getDocumentsMatchingQuery(e,n,Bs.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Lt(st),this._s=new sl(o=>Ug(o),zg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IL(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function OL(t,e,n,r){return new ML(t,e,n,r)}async function zT(t,e){const n=Ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],c=[];let d=Xe();for(const p of i){l.push(p.batchId);for(const g of p.mutations)d=d.add(g.key)}for(const p of o){c.push(p.batchId);for(const g of p.mutations)d=d.add(g.key)}return n.localDocuments.getDocuments(r,d).next(p=>({hs:p,removedBatchIds:l,addedBatchIds:c}))})})}function VL(t,e){const n=Ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,d,p,g){const y=p.batch,E=y.keys();let k=ie.resolve();return E.forEach(F=>{k=k.next(()=>g.getEntry(d,F)).next(V=>{const B=p.docVersions.get(F);ft(B!==null),V.version.compareTo(B)<0&&(y.applyToRemoteDocument(V,p),V.isValidDocument()&&(V.setReadTime(p.commitVersion),g.addEntry(V)))})}),k.next(()=>c.mutationQueue.removeMutationBatch(d,y))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let d=Xe();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(d=d.add(c.batch.mutations[p].key));return d}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function BT(t){const e=Ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function FL(t,e){const n=Ue(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const c=[];e.targetChanges.forEach((g,y)=>{const E=i.get(y);if(!E)return;c.push(n.Ur.removeMatchingKeys(o,g.removedDocuments,y).next(()=>n.Ur.addMatchingKeys(o,g.addedDocuments,y)));let k=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?k=k.withResumeToken(_n.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):g.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(g.resumeToken,r)),i=i.insert(y,k),function(V,B,C){return V.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(E,k,g)&&c.push(n.Ur.updateTargetData(o,k))});let d=Ki(),p=Xe();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))}),c.push(UL(o,l,e.documentUpdates).next(g=>{d=g.Ps,p=g.Is})),!r.isEqual(Fe.min())){const g=n.Ur.getLastRemoteSnapshotVersion(o).next(y=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(g)}return ie.waitFor(c).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,p)).next(()=>d)}).then(o=>(n.os=i,o))}function UL(t,e,n){let r=Xe(),i=Xe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let l=Ki();return n.forEach((c,d)=>{const p=o.get(c);d.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(Fe.min())?(e.removeEntry(c,d.readTime),l=l.insert(c,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(c,d)):ye("LocalStore","Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",d.version)}),{Ps:l,Is:i}})}function zL(t,e){const n=Ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function BL(t,e){const n=Ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,ie.resolve(i)):n.Ur.allocateTargetId(r).next(l=>(i=new As(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function vm(t,e,n){const r=Ue(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!lc(l))throw l;ye("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function h0(t,e,n){const r=Ue(t);let i=Fe.min(),o=Xe();return r.persistence.runTransaction("Execute query","readwrite",l=>function(d,p,g){const y=Ue(d),E=y._s.get(g);return E!==void 0?ie.resolve(y.os.get(E)):y.Ur.getTargetData(p,g)}(r,l,ui(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(l,c.targetId).next(d=>{o=d})}).next(()=>r.ss.getDocumentsMatchingQuery(l,e,n?i:Fe.min(),n?o:Xe())).next(c=>(jL(r,bk(e),c),{documents:c,Ts:o})))}function jL(t,e,n){let r=t.us.get(e)||Fe.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}class d0{constructor(){this.activeTargetIds=Fk()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qL{constructor(){this.so=new d0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new d0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ye("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ye("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ih=null;function Gf(){return ih===null?ih=function(){return 268435456+Math.round(2147483648*Math.random())}():ih++,"0x"+ih.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class ZL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,l){const c=Gf(),d=this.xo(n,r.toUriEncodedString());ye("RestConnection",`Sending RPC '${n}' ${c}:`,d,i);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,o,l),this.No(n,d,p,i).then(g=>(ye("RestConnection",`Received RPC '${n}' ${c}: `,g),g),g=>{throw Ba("RestConnection",`RPC '${n}' ${c} failed with error: `,g,"url: ",d,"request:",i),g})}Lo(n,r,i,o,l,c){return this.Mo(n,r,i,o,l)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,l)=>n[l]=o),i&&i.headers.forEach((o,l)=>n[l]=o)}xo(n,r){const i=$L[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const o=Gf();return new Promise((l,c)=>{const d=new J1;d.setWithCredentials(!0),d.listenOnce(tT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Eh.NO_ERROR:const g=d.getResponseJson();ye(En,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),l(g);break;case Eh.TIMEOUT:ye(En,`RPC '${e}' ${o} timed out`),c(new pe(te.DEADLINE_EXCEEDED,"Request time out"));break;case Eh.HTTP_ERROR:const y=d.getStatus();if(ye(En,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);const k=E==null?void 0:E.error;if(k&&k.status&&k.message){const F=function(B){const C=B.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(C)>=0?C:te.UNKNOWN}(k.status);c(new pe(F,k.message))}else c(new pe(te.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new pe(te.UNAVAILABLE,"Connection failed."));break;default:Oe()}}finally{ye(En,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(i);ye(En,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",p,r,15)})}Bo(e,n,r){const i=Gf(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=iT(),c=rT(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.xmlHttpFactory=new eT({})),this.Oo(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const g=o.join("");ye(En,`Creating RPC '${e}' stream ${i}: ${g}`,d);const y=l.createWebChannel(g,d);let E=!1,k=!1;const F=new WL({Io:B=>{k?ye(En,`Not sending because RPC '${e}' stream ${i} is closed:`,B):(E||(ye(En,`Opening RPC '${e}' stream ${i} transport.`),y.open(),E=!0),ye(En,`RPC '${e}' stream ${i} sending:`,B),y.send(B))},To:()=>y.close()}),V=(B,C,S)=>{B.listen(C,b=>{try{S(b)}catch(Z){setTimeout(()=>{throw Z},0)}})};return V(y,Jl.EventType.OPEN,()=>{k||(ye(En,`RPC '${e}' stream ${i} transport opened.`),F.yo())}),V(y,Jl.EventType.CLOSE,()=>{k||(k=!0,ye(En,`RPC '${e}' stream ${i} transport closed`),F.So())}),V(y,Jl.EventType.ERROR,B=>{k||(k=!0,Ba(En,`RPC '${e}' stream ${i} transport errored:`,B),F.So(new pe(te.UNAVAILABLE,"The operation could not be completed")))}),V(y,Jl.EventType.MESSAGE,B=>{var C;if(!k){const S=B.data[0];ft(!!S);const b=S,Z=b.error||((C=b[0])===null||C===void 0?void 0:C.error);if(Z){ye(En,`RPC '${e}' stream ${i} received error:`,Z);const J=Z.status;let z=function(A){const R=qt[A];if(R!==void 0)return kT(R)}(J),P=Z.message;z===void 0&&(z=te.INTERNAL,P="Unknown error status: "+J+" with message "+Z.message),k=!0,F.So(new pe(z,P)),y.close()}else ye(En,`RPC '${e}' stream ${i} received:`,S),F.bo(S)}}),V(c,nT.STAT_EVENT,B=>{B.stat===am.PROXY?ye(En,`RPC '${e}' stream ${i} detected buffering proxy`):B.stat===am.NOPROXY&&ye(En,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{F.wo()},0),F}}function Qf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(t){return new rL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ye("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,n,r,i,o,l,c,d){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new jT(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(Zi(n.toString()),Zi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new pe(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ye("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ye("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KL extends qT{constructor(e,n,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,l),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=oL(this.serializer,e),r=function(o){if(!("targetChange"in o))return Fe.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Fe.min():l.readTime?ci(l.readTime):Fe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=_m(this.serializer),n.addTarget=function(o,l){let c;const d=l.target;if(c=hm(d)?{documents:uL(o,d)}:{query:cL(o,d)._t},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=NT(o,l.resumeToken);const p=pm(o,l.expectedCount);p!==null&&(c.expectedCount=p)}else if(l.snapshotVersion.compareTo(Fe.min())>0){c.readTime=hd(o,l.snapshotVersion.toTimestamp());const p=pm(o,l.expectedCount);p!==null&&(c.expectedCount=p)}return c}(this.serializer,e);const r=dL(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=_m(this.serializer),n.removeTarget=e,this.a_(n)}}class GL extends qT{constructor(e,n,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ft(!!e.streamToken),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ft(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=lL(e.writeResults,e.commitTime),r=ci(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=_m(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>aL(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new pe(te.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Mo(e,mm(n,r),i,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pe(te.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Lo(e,mm(n,r),i,l,c,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(te.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class YL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Zi(n),this.D_=!1):ye("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(l=>{r.enqueueAndForget(async()=>{Mo(this)&&(ye("RemoteStore","Restarting streams for network reachability change."),await async function(d){const p=Ue(d);p.L_.add(4),await hc(p),p.q_.set("Unknown"),p.L_.delete(4),await Qd(p)}(this))})}),this.q_=new YL(r,i)}}async function Qd(t){if(Mo(t))for(const e of t.B_)await e(!0)}async function hc(t){for(const e of t.B_)await e(!1)}function HT(t,e){const n=Ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Xg(n)?Yg(n):ol(n).r_()&&Qg(n,e))}function Gg(t,e){const n=Ue(t),r=ol(n);n.N_.delete(e),r.r_()&&$T(n,e),n.N_.size===0&&(r.r_()?r.o_():Mo(n)&&n.q_.set("Unknown"))}function Qg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ol(t).A_(e)}function $T(t,e){t.Q_.xe(e),ol(t).R_(e)}function Yg(t){t.Q_=new Jk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ol(t).start(),t.q_.v_()}function Xg(t){return Mo(t)&&!ol(t).n_()&&t.N_.size>0}function Mo(t){return Ue(t).L_.size===0}function WT(t){t.Q_=void 0}async function JL(t){t.q_.set("Online")}async function eb(t){t.N_.forEach((e,n)=>{Qg(t,e)})}async function tb(t,e){WT(t),Xg(t)?(t.q_.M_(e),Yg(t)):t.q_.set("Unknown")}async function nb(t,e,n){if(t.q_.set("Online"),e instanceof bT&&e.state===2&&e.cause)try{await async function(i,o){const l=o.cause;for(const c of o.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,l),i.N_.delete(c),i.Q_.removeTarget(c))}(t,e)}catch(r){ye("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dd(t,r)}else if(e instanceof Sh?t.Q_.Ke(e):e instanceof LT?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Fe.min()))try{const r=await BT(t.localStore);n.compareTo(r)>=0&&await function(o,l){const c=o.Q_.rt(l);return c.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.N_.get(p);g&&o.N_.set(p,g.withResumeToken(d.resumeToken,l))}}),c.targetMismatches.forEach((d,p)=>{const g=o.N_.get(d);if(!g)return;o.N_.set(d,g.withResumeToken(_n.EMPTY_BYTE_STRING,g.snapshotVersion)),$T(o,d);const y=new As(g.target,d,p,g.sequenceNumber);Qg(o,y)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){ye("RemoteStore","Failed to raise snapshot:",r),await dd(t,r)}}async function dd(t,e,n){if(!lc(e))throw e;t.L_.add(1),await hc(t),t.q_.set("Offline"),n||(n=()=>BT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ye("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Qd(t)})}function ZT(t,e){return e().catch(n=>dd(t,n,e))}async function Yd(t){const e=Ue(t),n=qs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;rb(e);)try{const i=await zL(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,ib(e,i)}catch(i){await dd(e,i)}KT(e)&&GT(e)}function rb(t){return Mo(t)&&t.O_.length<10}function ib(t,e){t.O_.push(e);const n=qs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function KT(t){return Mo(t)&&!qs(t).n_()&&t.O_.length>0}function GT(t){qs(t).start()}async function sb(t){qs(t).p_()}async function ob(t){const e=qs(t);for(const n of t.O_)e.m_(n.mutations)}async function ab(t,e,n){const r=t.O_.shift(),i=qg.from(r,e,n);await ZT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Yd(t)}async function lb(t,e){e&&qs(t).V_&&await async function(r,i){if(function(l){return Qk(l)&&l!==te.ABORTED}(i.code)){const o=r.O_.shift();qs(r).s_(),await ZT(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Yd(r)}}(t,e),KT(t)&&GT(t)}async function p0(t,e){const n=Ue(t);n.asyncQueue.verifyOperationInProgress(),ye("RemoteStore","RemoteStore received new credentials");const r=Mo(n);n.L_.add(3),await hc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Qd(n)}async function ub(t,e){const n=Ue(t);e?(n.L_.delete(2),await Qd(n)):e||(n.L_.add(2),await hc(n),n.q_.set("Unknown"))}function ol(t){return t.K_||(t.K_=function(n,r,i){const o=Ue(n);return o.w_(),new KL(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:JL.bind(null,t),Ro:eb.bind(null,t),mo:tb.bind(null,t),d_:nb.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Xg(t)?Yg(t):t.q_.set("Unknown")):(await t.K_.stop(),WT(t))})),t.K_}function qs(t){return t.U_||(t.U_=function(n,r,i){const o=Ue(n);return o.w_(),new GL(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:sb.bind(null,t),mo:lb.bind(null,t),f_:ob.bind(null,t),g_:ab.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Yd(t)):(await t.U_.stop(),t.O_.length>0&&(ye("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const l=Date.now()+r,c=new Jg(e,n,l,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function e_(t,e){if(Zi("AsyncQueue",`${e}: ${t}`),lc(t))return new pe(te.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Pe.comparator(n.key,r.key):(n,r)=>Pe.comparator(n.key,r.key),this.keyedMap=eu(),this.sortedSet=new Lt(this.comparator)}static emptySet(e){return new ka(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ka)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ka;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(){this.W_=new Lt(Pe.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Oe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Wa{constructor(e,n,r,i,o,l,c,d,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,i,o){const l=[];return n.forEach(c=>{l.push({type:0,doc:c})}),new Wa(e,n,ka.emptySet(n),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class hb{constructor(){this.queries=g0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Ue(n),o=i.queries;i.queries=g0(),o.forEach((l,c)=>{for(const d of c.j_)d.onError(r)})})(this,new pe(te.ABORTED,"Firestore shutting down"))}}function g0(){return new sl(t=>_T(t),Hd)}async function QT(t,e){const n=Ue(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new cb,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(i,!0);break;case 1:o.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(l){const c=e_(l,`Initialization of query '${ia(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&t_(n)}async function YT(t,e){const n=Ue(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const l=o.j_.indexOf(e);l>=0&&(o.j_.splice(l,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function db(t,e){const n=Ue(t);let r=!1;for(const i of e){const o=i.query,l=n.queries.get(o);if(l){for(const c of l.j_)c.X_(i)&&(r=!0);l.z_=i}}r&&t_(n)}function fb(t,e,n){const r=Ue(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(e)}function t_(t){t.Y_.forEach(e=>{e.next()})}var ym,_0;(_0=ym||(ym={})).ea="default",_0.Cache="cache";class XT{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Wa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Wa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ym.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e){this.key=e}}class e2{constructor(e){this.key=e}}class pb{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Xe(),this.mutatedKeys=Xe(),this.Aa=vT(e),this.Ra=new ka(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new m0,i=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,l=i,c=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,y)=>{const E=i.get(g),k=$d(this.query,y)?y:null,F=!!E&&this.mutatedKeys.has(E.key),V=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let B=!1;E&&k?E.data.isEqual(k.data)?F!==V&&(r.track({type:3,doc:k}),B=!0):this.ga(E,k)||(r.track({type:2,doc:k}),B=!0,(d&&this.Aa(k,d)>0||p&&this.Aa(k,p)<0)&&(c=!0)):!E&&k?(r.track({type:0,doc:k}),B=!0):E&&!k&&(r.track({type:1,doc:E}),B=!0,(d||p)&&(c=!0)),B&&(k?(l=l.add(k),o=V?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{Ra:l,fa:r,ns:c,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort((g,y)=>function(k,F){const V=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe()}};return V(k)-V(F)}(g.type,y.type)||this.Aa(g.doc,y.doc)),this.pa(r),i=i!=null&&i;const c=n&&!i?this.ya():[],d=this.da.size===0&&this.current&&!i?1:0,p=d!==this.Ea;return this.Ea=d,l.length!==0||p?{snapshot:new Wa(this.query,e.Ra,o,l,e.mutatedKeys,d===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new m0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Xe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new e2(r))}),this.da.forEach(r=>{e.has(r)||n.push(new JT(r))}),n}ba(e){this.Ta=e.Ts,this.da=Xe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Wa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class mb{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class gb{constructor(e){this.key=e,this.va=!1}}class _b{constructor(e,n,r,i,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new sl(c=>_T(c),Hd),this.Ma=new Map,this.xa=new Set,this.Oa=new Lt(Pe.comparator),this.Na=new Map,this.La=new Wg,this.Ba={},this.ka=new Map,this.qa=$a.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function vb(t,e,n=!0){const r=o2(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await t2(r,e,n,!0),i}async function yb(t,e){const n=o2(t);await t2(n,e,!0,!1)}async function t2(t,e,n,r){const i=await BL(t.localStore,ui(e)),o=i.targetId,l=n?t.sharedClientState.addLocalQueryTarget(o):"not-current";let c;return r&&(c=await wb(t,e,o,l==="current",i.resumeToken)),t.isPrimaryClient&&n&&HT(t.remoteStore,i),c}async function wb(t,e,n,r,i){t.Ka=(y,E,k)=>async function(V,B,C,S){let b=B.view.ma(C);b.ns&&(b=await h0(V.localStore,B.query,!1).then(({documents:P})=>B.view.ma(P,b)));const Z=S&&S.targetChanges.get(B.targetId),J=S&&S.targetMismatches.get(B.targetId)!=null,z=B.view.applyChanges(b,V.isPrimaryClient,Z,J);return y0(V,B.targetId,z.wa),z.snapshot}(t,y,E,k);const o=await h0(t.localStore,e,!0),l=new pb(e,o.Ts),c=l.ma(o.documents),d=cc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),p=l.applyChanges(c,t.isPrimaryClient,d);y0(t,n,p.wa);const g=new mb(e,n,l);return t.Fa.set(e,g),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),p.snapshot}async function Eb(t,e,n){const r=Ue(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(l=>!Hd(l,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await vm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Gg(r.remoteStore,i.targetId),wm(r,i.targetId)}).catch(ac)):(wm(r,i.targetId),await vm(r.localStore,i.targetId,!0))}async function Tb(t,e){const n=Ue(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Gg(n.remoteStore,r.targetId))}async function Ib(t,e,n){const r=kb(t);try{const i=await function(l,c){const d=Ue(l),p=Kt.now(),g=c.reduce((k,F)=>k.add(F.key),Xe());let y,E;return d.persistence.runTransaction("Locally write mutations","readwrite",k=>{let F=Ki(),V=Xe();return d.cs.getEntries(k,g).next(B=>{F=B,F.forEach((C,S)=>{S.isValidDocument()||(V=V.add(C))})}).next(()=>d.localDocuments.getOverlayedDocuments(k,F)).next(B=>{y=B;const C=[];for(const S of c){const b=$k(S,y.get(S.key).overlayedDocument);b!=null&&C.push(new Do(S.key,b,uT(b.value.mapValue),Ui.exists(!0)))}return d.mutationQueue.addMutationBatch(k,p,C,c)}).next(B=>{E=B;const C=B.applyToLocalDocumentSet(y,V);return d.documentOverlayCache.saveOverlays(k,B.batchId,C)})}).then(()=>({batchId:E.batchId,changes:wT(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,c,d){let p=l.Ba[l.currentUser.toKey()];p||(p=new Lt(st)),p=p.insert(c,d),l.Ba[l.currentUser.toKey()]=p}(r,i.batchId,n),await dc(r,i.changes),await Yd(r.remoteStore)}catch(i){const o=e_(i,"Failed to persist write");n.reject(o)}}async function n2(t,e){const n=Ue(t);try{const r=await FL(n.localStore,e);e.targetChanges.forEach((i,o)=>{const l=n.Na.get(o);l&&(ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.va=!0:i.modifiedDocuments.size>0?ft(l.va):i.removedDocuments.size>0&&(ft(l.va),l.va=!1))}),await dc(n,r,e)}catch(r){await ac(r)}}function v0(t,e,n){const r=Ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((o,l)=>{const c=l.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(l,c){const d=Ue(l);d.onlineState=c;let p=!1;d.queries.forEach((g,y)=>{for(const E of y.j_)E.Z_(c)&&(p=!0)}),p&&t_(d)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Sb(t,e,n){const r=Ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),o=i&&i.key;if(o){let l=new Lt(Pe.comparator);l=l.insert(o,Pn.newNoDocument(o,Fe.min()));const c=Xe().add(o),d=new Kd(Fe.min(),new Map,new Lt(st),l,c);await n2(r,d),r.Oa=r.Oa.remove(o),r.Na.delete(e),n_(r)}else await vm(r.localStore,e,!1).then(()=>wm(r,e,n)).catch(ac)}async function Pb(t,e){const n=Ue(t),r=e.batch.batchId;try{const i=await VL(n.localStore,e);i2(n,r,null),r2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await dc(n,i)}catch(i){await ac(i)}}async function Ab(t,e,n){const r=Ue(t);try{const i=await function(l,c){const d=Ue(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let g;return d.mutationQueue.lookupMutationBatch(p,c).next(y=>(ft(y!==null),g=y.keys(),d.mutationQueue.removeMutationBatch(p,y))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,g,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,g)).next(()=>d.localDocuments.getDocuments(p,g))})}(r.localStore,e);i2(r,e,n),r2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await dc(r,i)}catch(i){await ac(i)}}function r2(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function i2(t,e,n){const r=Ue(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function wm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||s2(t,r)})}function s2(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Gg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),n_(t))}function y0(t,e,n){for(const r of n)r instanceof JT?(t.La.addReference(r.key,e),xb(t,r)):r instanceof e2?(ye("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||s2(t,r.key)):Oe()}function xb(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ye("SyncEngine","New document in limbo: "+n),t.xa.add(r),n_(t))}function n_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Pe(wt.fromString(e)),r=t.qa.next();t.Na.set(r,new gb(n)),t.Oa=t.Oa.insert(n,r),HT(t.remoteStore,new As(ui(Bg(n.path)),r,"TargetPurposeLimboResolution",Mg.oe))}}async function dc(t,e,n){const r=Ue(t),i=[],o=[],l=[];r.Fa.isEmpty()||(r.Fa.forEach((c,d)=>{l.push(r.Ka(d,e,n).then(p=>{var g;if((p||n)&&r.isPrimaryClient){const y=p?!p.fromCache:(g=n==null?void 0:n.targetChanges.get(d.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(p){i.push(p);const y=Kg.Wi(d.targetId,p);o.push(y)}}))}),await Promise.all(l),r.Ca.d_(i),await async function(d,p){const g=Ue(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>ie.forEach(p,E=>ie.forEach(E.$i,k=>g.persistence.referenceDelegate.addReference(y,E.targetId,k)).next(()=>ie.forEach(E.Ui,k=>g.persistence.referenceDelegate.removeReference(y,E.targetId,k)))))}catch(y){if(!lc(y))throw y;ye("LocalStore","Failed to update sequence numbers: "+y)}for(const y of p){const E=y.targetId;if(!y.fromCache){const k=g.os.get(E),F=k.snapshotVersion,V=k.withLastLimboFreeSnapshotVersion(F);g.os=g.os.insert(E,V)}}}(r.localStore,o))}async function Cb(t,e){const n=Ue(t);if(!n.currentUser.isEqual(e)){ye("SyncEngine","User change. New user:",e.toKey());const r=await zT(n.localStore,e);n.currentUser=e,function(o,l){o.ka.forEach(c=>{c.forEach(d=>{d.reject(new pe(te.CANCELLED,l))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await dc(n,r.hs)}}function Rb(t,e){const n=Ue(t),r=n.Na.get(e);if(r&&r.va)return Xe().add(r.key);{let i=Xe();const o=n.Ma.get(e);if(!o)return i;for(const l of o){const c=n.Fa.get(l);i=i.unionWith(c.view.Va)}return i}}function o2(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=n2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Rb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Sb.bind(null,e),e.Ca.d_=db.bind(null,e.eventManager),e.Ca.$a=fb.bind(null,e.eventManager),e}function kb(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Pb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ab.bind(null,e),e}class w0{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Gd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return OL(this.persistence,new DL,e.initialUser,this.serializer)}createPersistence(e){return new LL(Zg.Zr,this.serializer)}createSharedClientState(e){return new qL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Lb{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>v0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Cb.bind(null,this.syncEngine),await ub(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new hb}()}createDatastore(e){const n=Gd(e.databaseInfo.databaseId),r=function(o){return new ZL(o)}(e.databaseInfo);return function(o,l,c,d){return new QL(o,l,c,d)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,l,c){return new XL(r,i,o,l,c)}(this.localStore,this.datastore,e.asyncQueue,n=>v0(this.syncEngine,n,0),function(){return f0.D()?new f0:new HL}())}createSyncEngine(e,n){return function(i,o,l,c,d,p,g){const y=new _b(i,o,l,c,d,p);return g&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=Ue(i);ye("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await hc(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Zi("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=In.UNAUTHENTICATED,this.clientId=oT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async o=>{ye("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ye("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new pe(te.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=e_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Yf(t,e){t.asyncQueue.verifyOperationInProgress(),ye("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await zT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function E0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Db(t);ye("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>p0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>p0(e.remoteStore,i)),t._onlineComponents=e}function Nb(t){return t.name==="FirebaseError"?t.code===te.FAILED_PRECONDITION||t.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Db(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ye("FirestoreClient","Using user provided OfflineComponentProvider");try{await Yf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!Nb(n))throw n;Ba("Error using user provided cache. Falling back to memory cache: "+n),await Yf(t,new w0)}}else ye("FirestoreClient","Using default OfflineComponentProvider"),await Yf(t,new w0);return t._offlineComponents}async function l2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ye("FirestoreClient","Using user provided OnlineComponentProvider"),await E0(t,t._uninitializedComponentsProvider._online)):(ye("FirestoreClient","Using default OnlineComponentProvider"),await E0(t,new Lb))),t._onlineComponents}function Mb(t){return l2(t).then(e=>e.syncEngine)}async function u2(t){const e=await l2(t),n=e.eventManager;return n.onListen=vb.bind(null,e.syncEngine),n.onUnlisten=Eb.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=yb.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Tb.bind(null,e.syncEngine),n}function Ob(t,e,n={}){const r=new Fi;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,c,d,p){const g=new a2({next:E=>{l.enqueueAndForget(()=>YT(o,y));const k=E.docs.has(c);!k&&E.fromCache?p.reject(new pe(te.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&E.fromCache&&d&&d.source==="server"?p.reject(new pe(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),y=new XT(Bg(c.path),g,{includeMetadataChanges:!0,_a:!0});return QT(o,y)}(await u2(t),t.asyncQueue,e,n,r)),r.promise}function Vb(t,e,n={}){const r=new Fi;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,c,d,p){const g=new a2({next:E=>{l.enqueueAndForget(()=>YT(o,y)),E.fromCache&&d.source==="server"?p.reject(new pe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),y=new XT(c,g,{includeMetadataChanges:!0,_a:!0});return QT(o,y)}(await u2(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(t,e,n){if(!n)throw new pe(te.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Fb(t,e,n,r){if(e===!0&&r===!0)throw new pe(te.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function I0(t){if(!Pe.isDocumentKey(t))throw new pe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function S0(t){if(Pe.isDocumentKey(t))throw new pe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Xd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Oe()}function Za(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new pe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xd(t);throw new pe(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new pe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Fb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=c2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new P0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new pe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new pe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new P0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ek;switch(r.type){case"firstParty":return new ik(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=T0.get(n);r&&(ye("ComponentProvider","Removing Datastore"),T0.delete(n),r.terminate())}(this),Promise.resolve()}}function Ub(t,e,n,r={}){var i;const o=(t=Za(t,Jd))._getSettings(),l=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&Ba("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),r.mockUserToken){let c,d;if(typeof r.mockUserToken=="string")c=r.mockUserToken,d=In.MOCK_USER;else{c=xC(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new pe(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new In(p)}t._authCredentials=new tk(new sT(c,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Oo(this.firestore,e,this._query)}}class ir{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ir(this.firestore,e,this._key)}}class Vs extends Oo{constructor(e,n,r){super(e,n,Bg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ir(this.firestore,null,new Pe(e))}withConverter(e){return new Vs(this.firestore,e,this._path)}}function r_(t,e,...n){if(t=Cn(t),h2("collection","path",e),t instanceof Jd){const r=wt.fromString(e,...n);return S0(r),new Vs(t,null,r)}{if(!(t instanceof ir||t instanceof Vs))throw new pe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(wt.fromString(e,...n));return S0(r),new Vs(t.firestore,null,r)}}function i_(t,e,...n){if(t=Cn(t),arguments.length===1&&(e=oT.newId()),h2("doc","path",e),t instanceof Jd){const r=wt.fromString(e,...n);return I0(r),new ir(t,null,new Pe(r))}{if(!(t instanceof ir||t instanceof Vs))throw new pe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(wt.fromString(e,...n));return I0(r),new ir(t.firestore,t instanceof Vs?t.converter:null,new Pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new jT(this,"async_queue_retry"),this.Eu=()=>{const n=Qf();n&&ye("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=Qf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=Qf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new Fi;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!lc(e))throw e;ye("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;const i=function(l){let c=l.message||"";return l.stack&&(c=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),c}(r);throw Zi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const i=Jg.createAndSchedule(this,e,n,r,o=>this.Vu(o));return this.lu.push(i),i}du(){this.hu&&Oe()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}class ef extends Jd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new zb}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||d2(this),this._firestoreClient.terminate()}}function Bb(t,e){const n=typeof t=="object"?t:Ng(),r=typeof t=="string"?t:"(default)",i=oc(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=AC("firestore");o&&Ub(i,...o)}return i}function s_(t){return t._firestoreClient||d2(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function d2(t){var e,n,r;const i=t._freezeSettings(),o=function(c,d,p,g){return new _k(c,d,p,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,c2(g.experimentalLongPollingOptions),g.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new bb(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ka(_n.fromBase64String(e))}catch(n){throw new pe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ka(_n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb=/^__.*__$/;class qb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Do(e,this.data,this.fieldMask,n,this.fieldTransforms):new uc(e,this.data,n,this.fieldTransforms)}}function p2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe()}}class u_{constructor(e,n,r,i,o,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new u_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return fd(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(p2(this.wu)&&jb.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class Hb{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gd(e)}Nu(e,n,r,i=!1){return new u_({wu:e,methodName:n,Ou:r,path:fn.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function m2(t){const e=t._freezeSettings(),n=Gd(t._databaseId);return new Hb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $b(t,e,n,r,i,o={}){const l=t.Nu(o.merge||o.mergeFields?2:0,e,n,i);v2("Data must be an object, but it was:",l,r);const c=g2(r,l);let d,p;if(o.merge)d=new Br(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const y of o.mergeFields){const E=Zb(e,y,n);if(!l.contains(E))throw new pe(te.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);Gb(g,E)||g.push(E)}d=new Br(g),p=l.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,p=l.fieldTransforms;return new qb(new Tr(c),d,p)}function Wb(t,e,n,r=!1){return c_(n,t.Nu(r?4:3,e))}function c_(t,e){if(_2(t=Cn(t)))return v2("Unsupported field value:",e,t),g2(t,e);if(t instanceof f2)return function(r,i){if(!p2(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){const o=[];let l=0;for(const c of r){let d=c_(c,i.Fu(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Cn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Uk(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Kt.fromDate(r);return{timestampValue:hd(i.serializer,o)}}if(r instanceof Kt){const o=new Kt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hd(i.serializer,o)}}if(r instanceof a_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ka)return{bytesValue:NT(i.serializer,r._byteString)};if(r instanceof ir){const o=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw i.Mu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:$g(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof l_)return function(l,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(d=>{if(typeof d!="number")throw c.Mu("VectorValues must only contain numeric values.");return jg(c.serializer,d)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${Xd(r)}`)}(t,e)}function g2(t,e){const n={};return aT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rl(t,(r,i)=>{const o=c_(i,e.bu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function _2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Kt||t instanceof a_||t instanceof Ka||t instanceof ir||t instanceof f2||t instanceof l_)}function v2(t,e,n){if(!_2(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Xd(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function Zb(t,e,n){if((e=Cn(e))instanceof o_)return e._internalPath;if(typeof e=="string")return y2(t,e);throw fd("Field path arguments must be of type string or ",t,!1,void 0,n)}const Kb=new RegExp("[~\\*/\\[\\]]");function y2(t,e,n){if(e.search(Kb)>=0)throw fd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new o_(...e.split("."))._internalPath}catch{throw fd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function fd(t,e,n,r,i){const o=r&&!r.isEmpty(),l=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${r}`),l&&(d+=` in document ${i}`),d+=")"),new pe(te.INVALID_ARGUMENT,c+t+d)}function Gb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ir(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Qb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(h_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Qb extends w2{data(){return super.data()}}function h_(t,e){return typeof e=="string"?y2(t,e):e instanceof o_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new pe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class d_{}class E2 extends d_{}function Xb(t,e,...n){let r=[];e instanceof d_&&r.push(e),r=r.concat(n),function(o){const l=o.filter(d=>d instanceof p_).length,c=o.filter(d=>d instanceof f_).length;if(l>1||l>0&&c>0)throw new pe(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class f_ extends E2{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new f_(e,n,r)}_apply(e){const n=this._parse(e);return T2(e._query,n),new Oo(e.firestore,e.converter,dm(e._query,n))}_parse(e){const n=m2(e.firestore);return function(o,l,c,d,p,g,y){let E;if(p.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new pe(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){x0(y,g);const k=[];for(const F of y)k.push(A0(d,o,F));E={arrayValue:{values:k}}}else E=A0(d,o,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||x0(y,g),E=Wb(c,l,y,g==="in"||g==="not-in");return Zt.create(p,g,E)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class p_ extends d_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new p_(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:$r.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let l=i;const c=o.getFlattenedFilters();for(const d of c)T2(l,d),l=dm(l,d)}(e._query,n),new Oo(e.firestore,e.converter,dm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class m_ extends E2{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new m_(e,n)}_apply(e){const n=function(i,o,l){if(i.startAt!==null)throw new pe(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new pe(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wu(o,l)}(e._query,this._field,this._direction);return new Oo(e.firestore,e.converter,function(i,o){const l=i.explicitOrderBy.concat([o]);return new il(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Jb(t,e="asc"){const n=e,r=h_("orderBy",t);return m_._create(r,n)}function A0(t,e,n){if(typeof(n=Cn(n))=="string"){if(n==="")throw new pe(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gT(e)&&n.indexOf("/")!==-1)throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(wt.fromString(n));if(!Pe.isDocumentKey(r))throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ky(t,new Pe(r))}if(n instanceof ir)return Ky(t,n._key);throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xd(n)}.`)}function x0(t,e){if(!Array.isArray(t)||t.length===0)throw new pe(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function T2(t,e){const n=function(i,o){for(const l of i)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new pe(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class eN{convertValue(e,n="none"){switch(Co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return rl(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(l=>Ft(l.doubleValue));return new l_(o)}convertGeoPoint(e){return new a_(Ft(e.latitude),Ft(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Vg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qu(e));default:return null}}convertTimestamp(e){const n=js(e);return new Kt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=wt.fromString(e);ft(UT(r));const i=new Hu(r.get(1),r.get(3)),o=new Pe(r.popFirst(5));return i.isEqual(n)||Zi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class I2 extends w2{constructor(e,n,r,i,o,l){super(e,n,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ph(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(h_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ph extends I2{data(e={}){return super.data(e)}}class nN{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new nu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ph(this._firestore,this._userDataWriter,r.key,r,new nu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(c=>{const d=new Ph(i._firestore,i._userDataWriter,c.doc.key,c.doc,new nu(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const d=new Ph(i._firestore,i._userDataWriter,c.doc.key,c.doc,new nu(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,g=-1;return c.type!==0&&(p=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),g=l.indexOf(c.doc.key)),{type:rN(c.type),doc:d,oldIndex:p,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function rN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t){t=Za(t,ir);const e=Za(t.firestore,ef);return Ob(s_(e),t._key).then(n=>oN(e,t,n))}class P2 extends eN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ka(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ir(this.firestore,null,n)}}function A2(t){t=Za(t,Oo);const e=Za(t.firestore,ef),n=s_(e),r=new P2(e);return Yb(t._query),Vb(n,t._query).then(i=>new nN(e,r,t,i))}function iN(t,e){const n=Za(t.firestore,ef),r=i_(t),i=tN(t.converter,e);return sN(n,[$b(m2(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ui.exists(!1))]).then(()=>r)}function sN(t,e){return function(r,i){const o=new Fi;return r.asyncQueue.enqueueAndForget(async()=>Ib(await Mb(r),i,o)),o.promise}(s_(t),e)}function oN(t,e,n){const r=n.docs.get(e._key),i=new P2(t);return new I2(t,i,e._key,r,new nu(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){nl=i})(tl),zs(new $i("firestore",(r,{instanceIdentifier:i,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new ef(new nk(r.getProvider("auth-internal")),new ok(r.getProvider("app-check-internal")),function(p,g){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new pe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hu(p.options.projectId,g)}(l,i),l);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Vi(qy,"4.7.1",e),Vi(qy,"4.7.1","esm2017")})();var aN="firebase",lN="10.13.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vi(aN,lN,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em=new Map,x2={activated:!1,tokenObservers:[]},uN={initialized:!1,enabled:!1};function en(t){return Em.get(t)||Object.assign({},x2)}function cN(t,e){return Em.set(t,e),Em.get(t)}function tf(){return uN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2="https://content-firebaseappcheck.googleapis.com/v1",hN="exchangeRecaptchaEnterpriseToken",dN="exchangeDebugToken",C0={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},fN=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new zu,this.pending.promise.catch(n=>{}),await mN(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new zu,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function mN(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},$n=new el("appCheck","AppCheck",gN);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(t=!1){var e;return t?(e=self.grecaptcha)===null||e===void 0?void 0:e.enterprise:self.grecaptcha}function g_(t){if(!en(t).activated)throw $n.create("use-before-activation",{appName:t.name})}function R2(t){const e=Math.round(t/1e3),n=Math.floor(e/(3600*24)),r=Math.floor((e-n*3600*24)/3600),i=Math.floor((e-n*3600*24-r*3600)/60),o=e-n*3600*24-r*3600-i*60;let l="";return n&&(l+=sh(n)+"d:"),r&&(l+=sh(r)+"h:"),l+=sh(i)+"m:"+sh(o)+"s",l}function sh(t){return t===0?"00":t>=10?t.toString():"0"+t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const y=await i.getHeartbeatsHeader();y&&(r["X-Firebase-Client"]=y)}const o={method:"POST",body:JSON.stringify(e),headers:r};let l;try{l=await fetch(t,o)}catch(y){throw $n.create("fetch-network-error",{originalErrorMessage:y==null?void 0:y.message})}if(l.status!==200)throw $n.create("fetch-status-error",{httpStatus:l.status});let c;try{c=await l.json()}catch(y){throw $n.create("fetch-parse-error",{originalErrorMessage:y==null?void 0:y.message})}const d=c.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw $n.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});const p=Number(d[1])*1e3,g=Date.now();return{token:c.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}}function _N(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${C2}/projects/${n}/apps/${r}:${hN}?key=${i}`,body:{recaptcha_enterprise_token:e}}}function k2(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${C2}/projects/${n}/apps/${r}:${dN}?key=${i}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN="firebase-app-check-database",yN=1,Gu="firebase-app-check-store",L2="debug-token";let oh=null;function b2(){return oh||(oh=new Promise((t,e)=>{try{const n=indexedDB.open(vN,yN);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e($n.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Gu,{keyPath:"compositeKey"})}}}catch(n){e($n.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),oh)}function wN(t){return D2(M2(t))}function EN(t,e){return N2(M2(t),e)}function TN(t){return N2(L2,t)}function IN(){return D2(L2)}async function N2(t,e){const r=(await b2()).transaction(Gu,"readwrite"),o=r.objectStore(Gu).put({compositeKey:t,value:e});return new Promise((l,c)=>{o.onsuccess=d=>{l()},r.onerror=d=>{var p;c($n.create("storage-set",{originalErrorMessage:(p=d.target.error)===null||p===void 0?void 0:p.message}))}})}async function D2(t){const n=(await b2()).transaction(Gu,"readonly"),i=n.objectStore(Gu).get(t);return new Promise((o,l)=>{i.onsuccess=c=>{const d=c.target.result;o(d?d.value:void 0)},n.onerror=c=>{var d;l($n.create("storage-get",{originalErrorMessage:(d=c.target.error)===null||d===void 0?void 0:d.message}))}})}function M2(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=new jd("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(t){if(Lg()){let e;try{e=await wN(t)}catch(n){Qu.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return e}}function Xf(t,e){return Lg()?EN(t,e).catch(n=>{Qu.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function PN(){let t;try{t=await IN()}catch{}if(t)return t;{const e=jC();return TN(e).catch(n=>Qu.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(){return tf().enabled}async function y_(){const t=tf();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function AN(){const t=q1(),e=tf();if(e.initialized=!0,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&t.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;e.enabled=!0;const n=new zu;e.token=n,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(PN())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN={error:"UNKNOWN_ERROR"};function CN(t){return kg.encodeString(JSON.stringify(t),!1)}async function Tm(t,e=!1){const n=t.app;g_(n);const r=en(n);let i=r.token,o;if(i&&!Ea(i)&&(r.token=void 0,i=void 0),!i){const d=await r.cachedTokenPromise;d&&(Ea(d)?i=d:await Xf(n,void 0))}if(!e&&i&&Ea(i))return{token:i.token};let l=!1;if(v_()){r.exchangeTokenPromise||(r.exchangeTokenPromise=__(k2(n,await y_()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const d=await r.exchangeTokenPromise;return await Xf(n,d),r.token=d,{token:d.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=await en(n).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"?Qu.warn(d.message):Qu.error(d),o=d}let c;return i?o?Ea(i)?c={token:i.token,internalError:o}:c=L0(o):(c={token:i.token},r.token=i,await Xf(n,i)):c=L0(o),l&&F2(n,c),c}async function RN(t){const e=t.app;g_(e);const{provider:n}=en(e);if(v_()){const r=await y_(),{token:i}=await __(k2(e,r),t.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function O2(t,e,n,r){const{app:i}=t,o=en(i),l={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,l],o.token&&Ea(o.token)){const c=o.token;Promise.resolve().then(()=>{n({token:c.token}),k0(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>k0(t))}function V2(t,e){const n=en(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function k0(t){const{app:e}=t,n=en(e);let r=n.tokenRefresher;r||(r=kN(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function kN(t){const{app:e}=t;return new pN(async()=>{const n=en(e);let r;if(n.token?r=await Tm(t,!0):r=await Tm(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=en(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},C0.RETRIAL_MIN_WAIT,C0.RETRIAL_MAX_WAIT)}function F2(t,e){const n=en(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ea(t){return t.expireTimeMillis-Date.now()>0}function L0(t){return{token:CN(xN),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=en(this.app);for(const n of e)V2(this.app,n.next);return Promise.resolve()}}function bN(t,e){return new LN(t,e)}function NN(t){return{getToken:e=>Tm(t,e),getLimitedUseToken:()=>RN(t),addTokenListener:e=>O2(t,"INTERNAL",e),removeTokenListener:e=>V2(t.app,e)}}const DN="@firebase/app-check",MN="0.8.7",ON="https://www.google.com/recaptcha/enterprise.js";function VN(t,e){const n=new zu,r=en(t);r.reCAPTCHAState={initialized:n};const i=FN(t),o=R0(!0);return o?b0(t,e,o,i,n):BN(()=>{const l=R0(!0);if(!l)throw new Error("no recaptcha");b0(t,e,l,i,n)}),n.promise}function b0(t,e,n,r,i){n.ready(()=>{zN(t,e,n,r),i.resolve(n)})}function FN(t){const e=`fire_app_check_${t.name}`,n=document.createElement("div");return n.id=e,n.style.display="none",document.body.appendChild(n),e}async function UN(t){g_(t);const n=await en(t).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const o=en(t).reCAPTCHAState;n.ready(()=>{r(n.execute(o.widgetId,{action:"fire_app_check"}))})})}function zN(t,e,n,r){const i=n.render(r,{sitekey:e,size:"invisible",callback:()=>{en(t).reCAPTCHAState.succeeded=!0},"error-callback":()=>{en(t).reCAPTCHAState.succeeded=!1}}),o=en(t);o.reCAPTCHAState=Object.assign(Object.assign({},o.reCAPTCHAState),{widgetId:i})}function BN(t){const e=document.createElement("script");e.src=ON,e.onload=t,document.head.appendChild(e)}class w_{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var e,n,r;qN(this._throttleData);const i=await UN(this._app).catch(l=>{throw $n.create("recaptcha-error")});if(!(!((e=en(this._app).reCAPTCHAState)===null||e===void 0)&&e.succeeded))throw $n.create("recaptcha-error");let o;try{o=await __(_N(this._app,i),this._heartbeatServiceProvider)}catch(l){throw!((n=l.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=jN(Number((r=l.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),$n.create("throttled",{time:R2(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):l}return this._throttleData=null,o}initialize(e){this._app=e,this._heartbeatServiceProvider=oc(e,"heartbeat"),VN(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof w_?this._siteKey===e._siteKey:!1}}function jN(t,e){if(t===404||t===403)return{backoffCount:1,allowRequestsAfter:Date.now()+fN,httpStatus:t};{const n=e?e.backoffCount:0,r=ZC(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:t}}}function qN(t){if(t&&Date.now()-t.allowRequestsAfter<=0)throw $n.create("throttled",{time:R2(t.allowRequestsAfter-Date.now()),httpStatus:t.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(t=Ng(),e){t=Cn(t);const n=oc(t,"app-check");if(tf().initialized||AN(),v_()&&y_().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(o.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&o.provider.isEqual(e.provider))return i;throw $n.create("already-initialized",{appName:t.name})}const r=n.initialize({options:e});return $N(t,e.provider,e.isTokenAutoRefreshEnabled),en(t).isTokenAutoRefreshEnabled&&O2(r,"INTERNAL",()=>{}),r}function $N(t,e,n){const r=cN(t,Object.assign({},x2));r.activated=!0,r.provider=e,r.cachedTokenPromise=SN(t).then(i=>(i&&Ea(i)&&(r.token=i,F2(t,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?t.automaticDataCollectionEnabled:n,r.provider.initialize(t)}const WN="app-check",N0="app-check-internal";function ZN(){zs(new $i(WN,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return bN(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(N0).initialize()})),zs(new $i(N0,t=>{const e=t.getProvider("app-check").getImmediate();return NN(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Vi(DN,MN)}ZN();function E_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function U2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KN=U2,z2=new el("auth","Firebase",U2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd=new jd("@firebase/auth");function GN(t,...e){pd.logLevel<=et.WARN&&pd.warn(`Auth (${tl}): ${t}`,...e)}function Ah(t,...e){pd.logLevel<=et.ERROR&&pd.error(`Auth (${tl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(t,...e){throw T_(t,...e)}function hi(t,...e){return T_(t,...e)}function B2(t,e,n){const r=Object.assign(Object.assign({},KN()),{[e]:n});return new el("auth","Firebase",r).create(e,{appName:t.name})}function zi(t){return B2(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function T_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return z2.create(t,...e)}function Ne(t,e,...n){if(!t)throw T_(e,...n)}function Li(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ah(e),new Error(e)}function Gi(t,e){t||Li(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function QN(){return D0()==="http:"||D0()==="https:"}function D0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QN()||kC()||"connection"in navigator)?navigator.onLine:!0}function XN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gi(n>e,"Short delay should be less than long delay!"),this.isMobile=CC()||LC()}get(){return YN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(t,e){Gi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Li("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Li("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Li("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=new fc(3e4,6e4);function Gs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Xi(t,e,n,r,i={}){return q2(t,i,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=sc(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();return d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode),j2.fetch()(H2(t,t.config.apiHost,n,c),Object.assign({method:e,headers:d,referrerPolicy:"no-referrer"},o))})}async function q2(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},JN),e);try{const i=new nD(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw ah(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[d,p]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw ah(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw ah(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw ah(t,"user-disabled",l);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw B2(t,g,p);Wr(t,g)}}catch(i){if(i instanceof Yi)throw i;Wr(t,"network-request-failed",{message:String(i)})}}async function pc(t,e,n,r,i={}){const o=await Xi(t,e,n,r,i);return"mfaPendingCredential"in o&&Wr(t,"multi-factor-auth-required",{_serverResponse:o}),o}function H2(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?I_(t.config,i):`${t.config.apiScheme}://${i}`}function tD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nD{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(hi(this.auth,"network-request-failed")),eD.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ah(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=hi(t,e,r);return i.customData._tokenResponse=n,i}function M0(t){return t!==void 0&&t.enterprise!==void 0}class rD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function iD(t,e){return Xi(t,"GET","/v2/recaptchaConfig",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(t,e){return Xi(t,"POST","/v1/accounts:delete",e)}async function $2(t,e){return Xi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oD(t,e=!1){const n=Cn(t),r=await n.getIdToken(e),i=S_(r);Ne(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:vu(Jf(i.auth_time)),issuedAtTime:vu(Jf(i.iat)),expirationTime:vu(Jf(i.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Jf(t){return Number(t)*1e3}function S_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ah("JWT malformed, contained fewer than 3 sections"),null;try{const i=j1(n);return i?JSON.parse(i):(Ah("Failed to decode base64 JWT payload"),null)}catch(i){return Ah("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function O0(t){const e=S_(t);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Yi&&aD(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function aD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vu(this.lastLoginAt),this.creationTime=vu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function md(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ga(t,$2(n,{idToken:r}));Ne(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?W2(o.providerUserInfo):[],c=cD(t.providerData,l),d=t.isAnonymous,p=!(t.email&&o.passwordHash)&&!(c!=null&&c.length),g=d?p:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Sm(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(t,y)}async function uD(t){const e=Cn(t);await md(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cD(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function W2(t){return t.map(e=>{var{providerId:n}=e,r=E_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hD(t,e){const n=await q2(t,{},async()=>{const r=sc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,l=H2(t,i,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",j2.fetch()(l,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function dD(t,e){return Xi(t,"POST","/v2/accounts:revokeToken",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):O0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const n=O0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await hD(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,l=new La;return r&&(Ne(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Ne(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(Ne(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new La,this.toJSON())}_performRefresh(){return Li("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(t,e){Ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class bi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=E_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Sm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ga(this,this.stsTokenManager.getToken(this.auth,e));return Ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return oD(this,e)}reload(){return uD(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new bi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await md(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(si(this.auth.app))return Promise.reject(zi(this.auth));const e=await this.getIdToken();return await Ga(this,sD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,l,c,d,p,g;const y=(r=n.displayName)!==null&&r!==void 0?r:void 0,E=(i=n.email)!==null&&i!==void 0?i:void 0,k=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,F=(l=n.photoURL)!==null&&l!==void 0?l:void 0,V=(c=n.tenantId)!==null&&c!==void 0?c:void 0,B=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,C=(p=n.createdAt)!==null&&p!==void 0?p:void 0,S=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:b,emailVerified:Z,isAnonymous:J,providerData:z,stsTokenManager:P}=n;Ne(b&&P,e,"internal-error");const T=La.fromJSON(this.name,P);Ne(typeof b=="string",e,"internal-error"),fs(y,e.name),fs(E,e.name),Ne(typeof Z=="boolean",e,"internal-error"),Ne(typeof J=="boolean",e,"internal-error"),fs(k,e.name),fs(F,e.name),fs(V,e.name),fs(B,e.name),fs(C,e.name),fs(S,e.name);const A=new bi({uid:b,auth:e,email:E,emailVerified:Z,displayName:y,isAnonymous:J,photoURL:F,phoneNumber:k,tenantId:V,stsTokenManager:T,createdAt:C,lastLoginAt:S});return z&&Array.isArray(z)&&(A.providerData=z.map(R=>Object.assign({},R))),B&&(A._redirectEventId=B),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new La;i.updateFromServerResponse(n);const o=new bi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await md(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ne(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?W2(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),c=new La;c.updateFromIdToken(r);const d=new bi({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:l}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Sm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=new Map;function Ni(t){Gi(t instanceof Function,"Expected a class definition");let e=V0.get(t);return e?(Gi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,V0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Z2.type="NONE";const F0=Z2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(t,e,n){return`firebase:${t}:${e}:${n}`}class ba{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=xh(this.userKey,i.apiKey,o),this.fullPersistenceKey=xh("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?bi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ba(Ni(F0),e,r);const i=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=i[0]||Ni(F0);const l=xh(r,e.config.apiKey,e.name);let c=null;for(const p of n)try{const g=await p._get(l);if(g){const y=bi._fromJSON(e,g);p!==o&&(c=y),o=p;break}}catch{}const d=i.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new ba(o,e,r):(o=d[0],c&&await o._set(l,c.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new ba(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Y2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(K2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(J2(e))return"Blackberry";if(eI(e))return"Webos";if(G2(e))return"Safari";if((e.includes("chrome/")||Q2(e))&&!e.includes("edge/"))return"Chrome";if(X2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function K2(t=xn()){return/firefox\//i.test(t)}function G2(t=xn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Q2(t=xn()){return/crios\//i.test(t)}function Y2(t=xn()){return/iemobile/i.test(t)}function X2(t=xn()){return/android/i.test(t)}function J2(t=xn()){return/blackberry/i.test(t)}function eI(t=xn()){return/webos/i.test(t)}function P_(t=xn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function fD(t=xn()){var e;return P_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function pD(){return bC()&&document.documentMode===10}function tI(t=xn()){return P_(t)||X2(t)||eI(t)||J2(t)||/windows phone/i.test(t)||Y2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(t,e=[]){let n;switch(t){case"Browser":n=U0(xn());break;case"Worker":n=`${U0(xn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${tl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((l,c)=>{try{const d=e(o);l(d)}catch(d){c(d)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gD(t,e={}){return Xi(t,"GET","/v2/passwordPolicy",Gs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=6;class vD{constructor(e){var n,r,i,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:_D,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,l,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new z0(this),this.idTokenSubscription=new z0(this),this.beforeStateQueue=new mD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=z2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ni(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ba.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $2(this,{idToken:e}),r=await bi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(si(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&(d!=null&&d.user)&&(i=d.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await md(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(si(this.app))return Promise.reject(zi(this));const n=e?Cn(e):null;return n&&Ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return si(this.app)?Promise.reject(zi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return si(this.app)?Promise.reject(zi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ni(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gD(this),n=new vD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new el("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await dD(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ni(e)||this._popupRedirectResolver;Ne(n,this,"argument-error"),this.redirectPersistenceManager=await ba.create(this,[Ni(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,i);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&GN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Vo(t){return Cn(t)}class z0{constructor(e){this.auth=e,this.observer=null,this.addObserver=UC(n=>this.observer=n)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wD(t){nf=t}function rI(t){return nf.loadJS(t)}function ED(){return nf.recaptchaEnterpriseScript}function TD(){return nf.gapiScript}function ID(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const SD="recaptcha-enterprise",PD="NO_RECAPTCHA";class AD{constructor(e){this.type=SD,this.auth=Vo(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{iD(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const p=new rD(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(d=>{c(d)})})}function i(o,l,c){const d=window.grecaptcha;M0(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(PD)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,l)=>{r(this.auth).then(c=>{if(!n&&M0(window.grecaptcha))i(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=ED();d.length!==0&&(d+=c),rI(d).then(()=>{i(c,o,l)}).catch(p=>{l(p)})}}).catch(c=>{l(c)})})}}async function B0(t,e,n,r=!1){const i=new AD(t);let o;try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l=Object.assign({},e);return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Pm(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await B0(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await B0(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t,e){const n=oc(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(sd(o,e??{}))return i;Wr(i,"already-initialized")}return n.initialize({options:e})}function CD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ni);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function RD(t,e,n){const r=Vo(t);Ne(r._canInitEmulator,r,"emulator-config-failed"),Ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=iI(e),{host:l,port:c}=kD(e),d=c===null?"":`:${c}`;r.config.emulator={url:`${o}//${l}${d}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),LD()}function iI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function kD(t){const e=iI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:j0(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:j0(l)}}}function j0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function LD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Li("not implemented")}_getIdTokenResponse(e){return Li("not implemented")}_linkToIdToken(e,n){return Li("not implemented")}_getReauthenticationResolver(e){return Li("not implemented")}}async function bD(t,e){return Xi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ND(t,e){return pc(t,"POST","/v1/accounts:signInWithPassword",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DD(t,e){return pc(t,"POST","/v1/accounts:signInWithEmailLink",Gs(t,e))}async function MD(t,e){return pc(t,"POST","/v1/accounts:signInWithEmailLink",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu extends A_{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Yu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Yu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pm(e,n,"signInWithPassword",ND);case"emailLink":return DD(e,{email:this._email,oobCode:this._password});default:Wr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pm(e,r,"signUpPassword",bD);case"emailLink":return MD(e,{idToken:n,email:this._email,oobCode:this._password});default:Wr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Na(t,e){return pc(t,"POST","/v1/accounts:signInWithIdp",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD="http://localhost";class Ro extends A_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ro(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Wr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=E_(n,["providerId","signInMethod"]);if(!r||!i)return null;const l=new Ro(r,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Na(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Na(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Na(e,n)}buildRequest(){const e={requestUri:OD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=sc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function FD(t){const e=Yl(Xl(t)).link,n=e?Yl(Xl(e)).deep_link_id:null,r=Yl(Xl(t)).deep_link_id;return(r?Yl(Xl(r)).link:null)||r||n||e||t}class x_{constructor(e){var n,r,i,o,l,c;const d=Yl(Xl(e)),p=(n=d.apiKey)!==null&&n!==void 0?n:null,g=(r=d.oobCode)!==null&&r!==void 0?r:null,y=VD((i=d.mode)!==null&&i!==void 0?i:null);Ne(p&&g&&y,"argument-error"),this.apiKey=p,this.operation=y,this.code=g,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=FD(e);try{return new x_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(){this.providerId=al.PROVIDER_ID}static credential(e,n){return Yu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=x_.parseLink(n);return Ne(r,"argument-error"),Yu._fromEmailAndCode(e,r.code,r.tenantId)}}al.PROVIDER_ID="password";al.EMAIL_PASSWORD_SIGN_IN_METHOD="password";al.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends sI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends mc{constructor(){super("facebook.com")}static credential(e){return Ro._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ys.credential(e.oauthAccessToken)}catch{return null}}}ys.FACEBOOK_SIGN_IN_METHOD="facebook.com";ys.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws extends mc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ro._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ws.credential(n,r)}catch{return null}}}ws.GOOGLE_SIGN_IN_METHOD="google.com";ws.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends mc{constructor(){super("github.com")}static credential(e){return Ro._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch{return null}}}Es.GITHUB_SIGN_IN_METHOD="github.com";Es.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends mc{constructor(){super("twitter.com")}static credential(e,n){return Ro._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ts.credential(n,r)}catch{return null}}}Ts.TWITTER_SIGN_IN_METHOD="twitter.com";Ts.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UD(t,e){return pc(t,"POST","/v1/accounts:signUp",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await bi._fromIdTokenResponse(e,r,i),l=q0(r);return new ko({user:o,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=q0(r);return new ko({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function q0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd extends Yi{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,gd.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new gd(e,n,r,i)}}function oI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?gd._fromErrorAndOperation(t,o,e,r):o})}async function zD(t,e,n=!1){const r=await Ga(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ko._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BD(t,e,n=!1){const{auth:r}=t;if(si(r.app))return Promise.reject(zi(r));const i="reauthenticate";try{const o=await Ga(t,oI(r,i,e,t),n);Ne(o.idToken,r,"internal-error");const l=S_(o.idToken);Ne(l,r,"internal-error");const{sub:c}=l;return Ne(t.uid===c,r,"user-mismatch"),ko._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Wr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aI(t,e,n=!1){if(si(t.app))return Promise.reject(zi(t));const r="signIn",i=await oI(t,r,e),o=await ko._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function jD(t,e){return aI(Vo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lI(t){const e=Vo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function qD(t,e,n){if(si(t.app))return Promise.reject(zi(t));const r=Vo(t),l=await Pm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",UD).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&lI(t),d}),c=await ko._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function HD(t,e,n){return si(t.app)?Promise.reject(zi(t)):jD(Cn(t),al.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&lI(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $D(t,e){return Xi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Cn(t),o={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=await Ga(r,$D(r.auth,o));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const c=r.providerData.find(({providerId:d})=>d==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function ZD(t,e,n,r){return Cn(t).onIdTokenChanged(e,n,r)}function KD(t,e,n){return Cn(t).beforeAuthStateChanged(e,n)}function GD(t){return Cn(t).signOut()}const _d="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_d,"1"),this.storage.removeItem(_d),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=1e3,YD=10;class cI extends uI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,d)=>{this.notifyListeners(l,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);pD()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,YD):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},QD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}cI.type="LOCAL";const XD=cI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI extends uI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}hI.type="SESSION";const dI=hI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new rf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(l).map(async p=>p(n.origin,o)),d=await JD(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((c,d)=>{const p=C_("",20);i.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(y){const E=y;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(E.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(){return window}function tM(t){di().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(){return typeof di().WorkerGlobalScope<"u"&&typeof di().importScripts=="function"}async function nM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function iM(){return fI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI="firebaseLocalStorageDb",sM=1,vd="firebaseLocalStorage",mI="fbase_key";class gc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sf(t,e){return t.transaction([vd],e?"readwrite":"readonly").objectStore(vd)}function oM(){const t=indexedDB.deleteDatabase(pI);return new gc(t).toPromise()}function Am(){const t=indexedDB.open(pI,sM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(vd,{keyPath:mI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(vd)?e(r):(r.close(),await oM(),e(await Am()))})})}async function H0(t,e,n){const r=sf(t,!0).put({[mI]:e,value:n});return new gc(r).toPromise()}async function aM(t,e){const n=sf(t,!1).get(e),r=await new gc(n).toPromise();return r===void 0?null:r.value}function $0(t,e){const n=sf(t,!0).delete(e);return new gc(n).toPromise()}const lM=800,uM=3;class gI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Am(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>uM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rf._getInstance(iM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await nM(),!this.activeServiceWorker)return;this.sender=new eM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Am();return await H0(e,_d,"1"),await $0(e,_d),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>H0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>aM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=sf(i,!1).getAll();return new gc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gI.type="LOCAL";const cM=gI;new fc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hM(t,e){return e?Ni(e):(Ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_ extends A_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Na(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Na(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Na(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function dM(t){return aI(t.auth,new R_(t),t.bypassAuthState)}function fM(t){const{auth:e,user:n}=t;return Ne(n,e,"internal-error"),BD(n,new R_(t),t.bypassAuthState)}async function pM(t){const{auth:e,user:n}=t;return Ne(n,e,"internal-error"),zD(n,new R_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dM;case"linkViaPopup":case"linkViaRedirect":return pM;case"reauthViaPopup":case"reauthViaRedirect":return fM;default:Wr(this.auth,"internal-error")}}resolve(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM=new fc(2e3,1e4);class Ta extends _I{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Ta.currentPopupAction&&Ta.currentPopupAction.cancel(),Ta.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){Gi(this.filter.length===1,"Popup operations only handle one event");const e=C_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(hi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ta.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mM.get())};e()}}Ta.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM="pendingRedirect",Ch=new Map;class _M extends _I{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ch.get(this.auth._key());if(!e){try{const r=await vM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ch.set(this.auth._key(),e)}return this.bypassAuthState||Ch.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vM(t,e){const n=EM(e),r=wM(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function yM(t,e){Ch.set(t._key(),e)}function wM(t){return Ni(t._redirectPersistence)}function EM(t){return xh(gM,t.config.apiKey,t.name)}async function TM(t,e,n=!1){if(si(t.app))return Promise.reject(zi(t));const r=Vo(t),i=hM(r,e),l=await new _M(r,i,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM=10*60*1e3;class SM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!vI(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(hi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=IM&&this.cachedEventUids.clear(),this.cachedEventUids.has(W0(e))}saveEventToCache(e){this.cachedEventUids.add(W0(e)),this.lastProcessedEventTime=Date.now()}}function W0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function vI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function PM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AM(t,e={}){return Xi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CM=/^https?/;async function RM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await AM(t);for(const n of e)try{if(kM(n))return}catch{}Wr(t,"unauthorized-domain")}function kM(t){const e=Im(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!CM.test(n))return!1;if(xM.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=new fc(3e4,6e4);function Z0(){const t=di().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function bM(t){return new Promise((e,n)=>{var r,i,o;function l(){Z0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Z0(),n(hi(t,"network-request-failed"))},timeout:LM.get()})}if(!((i=(r=di().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=di().gapi)===null||o===void 0)&&o.load)l();else{const c=ID("iframefcb");return di()[c]=()=>{gapi.load?l():n(hi(t,"network-request-failed"))},rI(`${TD()}?onload=${c}`).catch(d=>n(d))}}).catch(e=>{throw Rh=null,e})}let Rh=null;function NM(t){return Rh=Rh||bM(t),Rh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=new fc(5e3,15e3),MM="__/auth/iframe",OM="emulator/auth/iframe",VM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UM(t){const e=t.config;Ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?I_(e,OM):`https://${t.config.authDomain}/${MM}`,r={apiKey:e.apiKey,appName:t.name,v:tl},i=FM.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${sc(r).slice(1)}`}async function zM(t){const e=await NM(t),n=di().gapi;return Ne(n,t,"internal-error"),e.open({where:document.body,url:UM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VM,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const l=hi(t,"network-request-failed"),c=di().setTimeout(()=>{o(l)},DM.get());function d(){di().clearTimeout(c),i(r)}r.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jM=500,qM=600,HM="_blank",$M="http://localhost";class K0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function WM(t,e,n,r=jM,i=qM){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const d=Object.assign(Object.assign({},BM),{width:r.toString(),height:i.toString(),top:o,left:l}),p=xn().toLowerCase();n&&(c=Q2(p)?HM:n),K2(p)&&(e=e||$M,d.scrollbars="yes");const g=Object.entries(d).reduce((E,[k,F])=>`${E}${k}=${F},`,"");if(fD(p)&&c!=="_self")return ZM(e||"",c),new K0(null);const y=window.open(e||"",c,g);Ne(y,t,"popup-blocked");try{y.focus()}catch{}return new K0(y)}function ZM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM="__/auth/handler",GM="emulator/auth/handler",QM=encodeURIComponent("fac");async function G0(t,e,n,r,i,o){Ne(t.config.authDomain,t,"auth-domain-config-required"),Ne(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:tl,eventId:i};if(e instanceof sI){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",FC(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))l[g]=y}if(e instanceof mc){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(l.scopes=g.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const g of Object.keys(c))c[g]===void 0&&delete c[g];const d=await t._getAppCheckToken(),p=d?`#${QM}=${encodeURIComponent(d)}`:"";return`${YM(t)}?${sc(c).slice(1)}${p}`}function YM({config:t}){return t.emulator?I_(t,GM):`https://${t.authDomain}/${KM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="webStorageSupport";class XM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dI,this._completeRedirectFn=TM,this._overrideRedirectResult=yM}async _openPopup(e,n,r,i){var o;Gi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await G0(e,n,r,Im(),i);return WM(e,l,C_())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await G0(e,n,r,Im(),i);return tM(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Gi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await zM(e),r=new SM(e);return n.register("authEvent",i=>(Ne(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ep,{type:ep},i=>{var o;const l=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[ep];l!==void 0&&n(!!l),Wr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=RM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return tI()||G2()||P_()}}const JM=XM;var Q0="@firebase/auth",Y0="1.7.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nO(t){zs(new $i("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;Ne(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nI(t)},p=new yD(r,i,o,d);return CD(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),zs(new $i("auth-internal",e=>{const n=Vo(e.getProvider("auth").getImmediate());return(r=>new eO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vi(Q0,Y0,tO(t)),Vi(Q0,Y0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=5*60,iO=W1("authIdTokenMaxAge")||rO;let X0=null;const sO=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>iO)return;const i=n==null?void 0:n.token;X0!==i&&(X0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function oO(t=Ng()){const e=oc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=xD(t,{popupRedirectResolver:JM,persistence:[cM,XD,dI]}),r=W1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=sO(o.toString());KD(n,l,()=>l(n.currentUser)),ZD(n,c=>l(c))}}const i=H1("auth");return i&&RD(n,`http://${i}`),n}function aO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}wD({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=hi("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",aO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nO("Browser");const lO={apiKey:"AIzaSyCIdN0z5xBIObREG1nPCsNAYfkMmglTG74",authDomain:"streetsmart-4f09e.firebaseapp.com",projectId:"streetsmart-4f09e",storageBucket:"streetsmart-4f09e.appspot.com",messagingSenderId:"948347218471",appId:"1:948347218471:web:de9b1a812c0f42e6ed3c02",measurementId:"G-L11VCV1CSW"},k_=G1(lO);HN(k_,{provider:new w_("6LfqGzUqAAAAAJH3n8rxjw6DxA3rBjTw8VuYfah2"),isTokenAutoRefreshEnabled:!0});const yu=oO(k_),Xu=Bb(k_);var _c=t=>t.type==="checkbox",Ia=t=>t instanceof Date,Dn=t=>t==null;const yI=t=>typeof t=="object";var Gt=t=>!Dn(t)&&!Array.isArray(t)&&yI(t)&&!Ia(t),uO=t=>Gt(t)&&t.target?_c(t.target)?t.target.checked:t.target.value:t,cO=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,hO=(t,e)=>t.has(cO(e)),dO=t=>{const e=t.constructor&&t.constructor.prototype;return Gt(e)&&e.hasOwnProperty("isPrototypeOf")},L_=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function vr(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(L_&&(t instanceof Blob||t instanceof FileList))&&(n||Gt(t)))if(e=n?[]:{},!n&&!dO(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=vr(t[r]));else return t;return e}var of=t=>Array.isArray(t)?t.filter(Boolean):[],Vt=t=>t===void 0,ve=(t,e,n)=>{if(!e||!Gt(t))return n;const r=of(e.split(/[,[\].]+?/)).reduce((i,o)=>Dn(i)?i:i[o],t);return Vt(r)||r===t?Vt(t[e])?n:t[e]:r},ri=t=>typeof t=="boolean",b_=t=>/^\w*$/.test(t),wI=t=>of(t.replace(/["|']|\]/g,"").split(/\.|\[/)),yt=(t,e,n)=>{let r=-1;const i=b_(e)?[e]:wI(e),o=i.length,l=o-1;for(;++r<o;){const c=i[r];let d=n;if(r!==l){const p=t[c];d=Gt(p)||Array.isArray(p)?p:isNaN(+i[r+1])?{}:[]}if(c==="__proto__")return;t[c]=d,t=t[c]}return t};const J0={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},zr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ai={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};Tn.createContext(null);var fO=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(i,o,{get:()=>{const l=o;return e._proxyFormState[l]!==zr.all&&(e._proxyFormState[l]=!r||zr.all),t[l]}});return i},jn=t=>Gt(t)&&!Object.keys(t).length,pO=(t,e,n,r)=>{n(t);const{name:i,...o}=t;return jn(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(l=>e[l]===zr.all)},kh=t=>Array.isArray(t)?t:[t];function mO(t){const e=Tn.useRef(t);e.current=t,Tn.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}var oi=t=>typeof t=="string",gO=(t,e,n,r,i)=>oi(t)?(r&&e.watch.add(t),ve(n,t,i)):Array.isArray(t)?t.map(o=>(r&&e.watch.add(o),ve(n,o))):(r&&(e.watchAll=!0),n),_O=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},ew=t=>({isOnSubmit:!t||t===zr.onSubmit,isOnBlur:t===zr.onBlur,isOnChange:t===zr.onChange,isOnAll:t===zr.all,isOnTouch:t===zr.onTouched}),tw=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const wu=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const o=ve(t,i);if(o){const{_f:l,...c}=o;if(l){if(l.refs&&l.refs[0]&&e(l.refs[0],i)&&!r)return!0;if(l.ref&&e(l.ref,l.name)&&!r)return!0;if(wu(c,e))break}else if(Gt(c)&&wu(c,e))break}}};var vO=(t,e,n)=>{const r=kh(ve(t,n));return yt(r,"root",e[n]),yt(t,n,r),t},N_=t=>t.type==="file",Di=t=>typeof t=="function",yd=t=>{if(!L_)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Lh=t=>oi(t),D_=t=>t.type==="radio",wd=t=>t instanceof RegExp;const nw={value:!1,isValid:!1},rw={value:!0,isValid:!0};var EI=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Vt(t[0].attributes.value)?Vt(t[0].value)||t[0].value===""?rw:{value:t[0].value,isValid:!0}:rw:nw}return nw};const iw={isValid:!1,value:null};var TI=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,iw):iw;function sw(t,e,n="validate"){if(Lh(t)||Array.isArray(t)&&t.every(Lh)||ri(t)&&!t)return{type:n,message:Lh(t)?t:"",ref:e}}var ra=t=>Gt(t)&&!wd(t)?t:{value:t,message:""},ow=async(t,e,n,r,i)=>{const{ref:o,refs:l,required:c,maxLength:d,minLength:p,min:g,max:y,pattern:E,validate:k,name:F,valueAsNumber:V,mount:B,disabled:C}=t._f,S=ve(e,F);if(!B||C)return{};const b=l?l[0]:o,Z=N=>{r&&b.reportValidity&&(b.setCustomValidity(ri(N)?"":N||""),b.reportValidity())},J={},z=D_(o),P=_c(o),T=z||P,A=(V||N_(o))&&Vt(o.value)&&Vt(S)||yd(o)&&o.value===""||S===""||Array.isArray(S)&&!S.length,R=_O.bind(null,F,n,J),D=(N,x,Ie,Je=Ai.maxLength,We=Ai.minLength)=>{const Ae=N?x:Ie;J[F]={type:N?Je:We,message:Ae,ref:o,...R(N?Je:We,Ae)}};if(i?!Array.isArray(S)||!S.length:c&&(!T&&(A||Dn(S))||ri(S)&&!S||P&&!EI(l).isValid||z&&!TI(l).isValid)){const{value:N,message:x}=Lh(c)?{value:!!c,message:c}:ra(c);if(N&&(J[F]={type:Ai.required,message:x,ref:b,...R(Ai.required,x)},!n))return Z(x),J}if(!A&&(!Dn(g)||!Dn(y))){let N,x;const Ie=ra(y),Je=ra(g);if(!Dn(S)&&!isNaN(S)){const We=o.valueAsNumber||S&&+S;Dn(Ie.value)||(N=We>Ie.value),Dn(Je.value)||(x=We<Je.value)}else{const We=o.valueAsDate||new Date(S),Ae=re=>new Date(new Date().toDateString()+" "+re),Y=o.type=="time",we=o.type=="week";oi(Ie.value)&&S&&(N=Y?Ae(S)>Ae(Ie.value):we?S>Ie.value:We>new Date(Ie.value)),oi(Je.value)&&S&&(x=Y?Ae(S)<Ae(Je.value):we?S<Je.value:We<new Date(Je.value))}if((N||x)&&(D(!!N,Ie.message,Je.message,Ai.max,Ai.min),!n))return Z(J[F].message),J}if((d||p)&&!A&&(oi(S)||i&&Array.isArray(S))){const N=ra(d),x=ra(p),Ie=!Dn(N.value)&&S.length>+N.value,Je=!Dn(x.value)&&S.length<+x.value;if((Ie||Je)&&(D(Ie,N.message,x.message),!n))return Z(J[F].message),J}if(E&&!A&&oi(S)){const{value:N,message:x}=ra(E);if(wd(N)&&!S.match(N)&&(J[F]={type:Ai.pattern,message:x,ref:o,...R(Ai.pattern,x)},!n))return Z(x),J}if(k){if(Di(k)){const N=await k(S,e),x=sw(N,b);if(x&&(J[F]={...x,...R(Ai.validate,x.message)},!n))return Z(x.message),J}else if(Gt(k)){let N={};for(const x in k){if(!jn(N)&&!n)break;const Ie=sw(await k[x](S,e),b,x);Ie&&(N={...Ie,...R(x,Ie.message)},Z(Ie.message),n&&(J[F]=N))}if(!jn(N)&&(J[F]={ref:b,...N},!n))return J}}return Z(!0),J};function yO(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Vt(t)?r++:t[e[r++]];return t}function wO(t){for(const e in t)if(t.hasOwnProperty(e)&&!Vt(t[e]))return!1;return!0}function Yt(t,e){const n=Array.isArray(e)?e:b_(e)?[e]:wI(e),r=n.length===1?t:yO(t,n),i=n.length-1,o=n[i];return r&&delete r[o],i!==0&&(Gt(r)&&jn(r)||Array.isArray(r)&&wO(r))&&Yt(t,n.slice(0,-1)),t}var tp=()=>{let t=[];return{get observers(){return t},next:i=>{for(const o of t)o.next&&o.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(o=>o!==i)}}),unsubscribe:()=>{t=[]}}},Ed=t=>Dn(t)||!yI(t);function Is(t,e){if(Ed(t)||Ed(e))return t===e;if(Ia(t)&&Ia(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const o=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const l=e[i];if(Ia(o)&&Ia(l)||Gt(o)&&Gt(l)||Array.isArray(o)&&Array.isArray(l)?!Is(o,l):o!==l)return!1}}return!0}var II=t=>t.type==="select-multiple",EO=t=>D_(t)||_c(t),np=t=>yd(t)&&t.isConnected,SI=t=>{for(const e in t)if(Di(t[e]))return!0;return!1};function Td(t,e={}){const n=Array.isArray(t);if(Gt(t)||n)for(const r in t)Array.isArray(t[r])||Gt(t[r])&&!SI(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Td(t[r],e[r])):Dn(t[r])||(e[r]=!0);return e}function PI(t,e,n){const r=Array.isArray(t);if(Gt(t)||r)for(const i in t)Array.isArray(t[i])||Gt(t[i])&&!SI(t[i])?Vt(e)||Ed(n[i])?n[i]=Array.isArray(t[i])?Td(t[i],[]):{...Td(t[i])}:PI(t[i],Dn(e)?{}:e[i],n[i]):n[i]=!Is(t[i],e[i]);return n}var lh=(t,e)=>PI(t,e,Td(e)),AI=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Vt(t)?t:e?t===""?NaN:t&&+t:n&&oi(t)?new Date(t):r?r(t):t;function rp(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return N_(e)?e.files:D_(e)?TI(t.refs).value:II(e)?[...e.selectedOptions].map(({value:n})=>n):_c(e)?EI(t.refs).value:AI(Vt(e.value)?t.ref.value:e.value,t)}var TO=(t,e,n,r)=>{const i={};for(const o of t){const l=ve(e,o);l&&yt(i,o,l._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},$l=t=>Vt(t)?t:wd(t)?t.source:Gt(t)?wd(t.value)?t.value.source:t.value:t;const aw="AsyncFunction";var IO=t=>(!t||!t.validate)&&!!(Di(t.validate)&&t.validate.constructor.name===aw||Gt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===aw)),SO=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function lw(t,e,n){const r=ve(t,n);if(r||b_(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const o=i.join("."),l=ve(e,o),c=ve(t,o);if(l&&!Array.isArray(l)&&n!==o)return{name:n};if(c&&c.type)return{name:o,error:c};i.pop()}return{name:n}}var PO=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,AO=(t,e)=>!of(ve(t,e)).length&&Yt(t,e);const xO={mode:zr.onSubmit,reValidateMode:zr.onChange,shouldFocusError:!0};function CO(t={}){let e={...xO,...t},n={submitCount:0,isDirty:!1,isLoading:Di(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Gt(e.defaultValues)||Gt(e.values)?vr(e.defaultValues||e.values)||{}:{},o=e.shouldUnregister?{}:vr(i),l={action:!1,mount:!1,watch:!1},c={mount:new Set,unMount:new Set,array:new Set,watch:new Set},d,p=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},y={values:tp(),array:tp(),state:tp()},E=ew(e.mode),k=ew(e.reValidateMode),F=e.criteriaMode===zr.all,V=U=>W=>{clearTimeout(p),p=setTimeout(U,W)},B=async U=>{if(g.isValid||U){const W=e.resolver?jn((await T()).errors):await R(r,!0);W!==n.isValid&&y.state.next({isValid:W})}},C=(U,W)=>{(g.isValidating||g.validatingFields)&&((U||Array.from(c.mount)).forEach(X=>{X&&(W?yt(n.validatingFields,X,W):Yt(n.validatingFields,X))}),y.state.next({validatingFields:n.validatingFields,isValidating:!jn(n.validatingFields)}))},S=(U,W=[],X,ue,ae=!0,se=!0)=>{if(ue&&X){if(l.action=!0,se&&Array.isArray(ve(r,U))){const de=X(ve(r,U),ue.argA,ue.argB);ae&&yt(r,U,de)}if(se&&Array.isArray(ve(n.errors,U))){const de=X(ve(n.errors,U),ue.argA,ue.argB);ae&&yt(n.errors,U,de),AO(n.errors,U)}if(g.touchedFields&&se&&Array.isArray(ve(n.touchedFields,U))){const de=X(ve(n.touchedFields,U),ue.argA,ue.argB);ae&&yt(n.touchedFields,U,de)}g.dirtyFields&&(n.dirtyFields=lh(i,o)),y.state.next({name:U,isDirty:N(U,W),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else yt(o,U,W)},b=(U,W)=>{yt(n.errors,U,W),y.state.next({errors:n.errors})},Z=U=>{n.errors=U,y.state.next({errors:n.errors,isValid:!1})},J=(U,W,X,ue)=>{const ae=ve(r,U);if(ae){const se=ve(o,U,Vt(X)?ve(i,U):X);Vt(se)||ue&&ue.defaultChecked||W?yt(o,U,W?se:rp(ae._f)):Je(U,se),l.mount&&B()}},z=(U,W,X,ue,ae)=>{let se=!1,de=!1;const $e={name:U},qe=!!(ve(r,U)&&ve(r,U)._f&&ve(r,U)._f.disabled);if(!X||ue){g.isDirty&&(de=n.isDirty,n.isDirty=$e.isDirty=N(),se=de!==$e.isDirty);const He=qe||Is(ve(i,U),W);de=!!(!qe&&ve(n.dirtyFields,U)),He||qe?Yt(n.dirtyFields,U):yt(n.dirtyFields,U,!0),$e.dirtyFields=n.dirtyFields,se=se||g.dirtyFields&&de!==!He}if(X){const He=ve(n.touchedFields,U);He||(yt(n.touchedFields,U,X),$e.touchedFields=n.touchedFields,se=se||g.touchedFields&&He!==X)}return se&&ae&&y.state.next($e),se?$e:{}},P=(U,W,X,ue)=>{const ae=ve(n.errors,U),se=g.isValid&&ri(W)&&n.isValid!==W;if(t.delayError&&X?(d=V(()=>b(U,X)),d(t.delayError)):(clearTimeout(p),d=null,X?yt(n.errors,U,X):Yt(n.errors,U)),(X?!Is(ae,X):ae)||!jn(ue)||se){const de={...ue,...se&&ri(W)?{isValid:W}:{},errors:n.errors,name:U};n={...n,...de},y.state.next(de)}},T=async U=>{C(U,!0);const W=await e.resolver(o,e.context,TO(U||c.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return C(U),W},A=async U=>{const{errors:W}=await T(U);if(U)for(const X of U){const ue=ve(W,X);ue?yt(n.errors,X,ue):Yt(n.errors,X)}else n.errors=W;return W},R=async(U,W,X={valid:!0})=>{for(const ue in U){const ae=U[ue];if(ae){const{_f:se,...de}=ae;if(se){const $e=c.array.has(se.name),qe=ae._f&&IO(ae._f);qe&&g.validatingFields&&C([ue],!0);const He=await ow(ae,o,F,e.shouldUseNativeValidation&&!W,$e);if(qe&&g.validatingFields&&C([ue]),He[se.name]&&(X.valid=!1,W))break;!W&&(ve(He,se.name)?$e?vO(n.errors,He,se.name):yt(n.errors,se.name,He[se.name]):Yt(n.errors,se.name))}!jn(de)&&await R(de,W,X)}}return X.valid},D=()=>{for(const U of c.unMount){const W=ve(r,U);W&&(W._f.refs?W._f.refs.every(X=>!np(X)):!np(W._f.ref))&&Se(U)}c.unMount=new Set},N=(U,W)=>(U&&W&&yt(o,U,W),!Is(Ee(),i)),x=(U,W,X)=>gO(U,c,{...l.mount?o:Vt(W)?i:oi(U)?{[U]:W}:W},X,W),Ie=U=>of(ve(l.mount?o:i,U,t.shouldUnregister?ve(i,U,[]):[])),Je=(U,W,X={})=>{const ue=ve(r,U);let ae=W;if(ue){const se=ue._f;se&&(!se.disabled&&yt(o,U,AI(W,se)),ae=yd(se.ref)&&Dn(W)?"":W,II(se.ref)?[...se.ref.options].forEach(de=>de.selected=ae.includes(de.value)):se.refs?_c(se.ref)?se.refs.length>1?se.refs.forEach(de=>(!de.defaultChecked||!de.disabled)&&(de.checked=Array.isArray(ae)?!!ae.find($e=>$e===de.value):ae===de.value)):se.refs[0]&&(se.refs[0].checked=!!ae):se.refs.forEach(de=>de.checked=de.value===ae):N_(se.ref)?se.ref.value="":(se.ref.value=ae,se.ref.type||y.values.next({name:U,values:{...o}})))}(X.shouldDirty||X.shouldTouch)&&z(U,ae,X.shouldTouch,X.shouldDirty,!0),X.shouldValidate&&re(U)},We=(U,W,X)=>{for(const ue in W){const ae=W[ue],se=`${U}.${ue}`,de=ve(r,se);(c.array.has(U)||!Ed(ae)||de&&!de._f)&&!Ia(ae)?We(se,ae,X):Je(se,ae,X)}},Ae=(U,W,X={})=>{const ue=ve(r,U),ae=c.array.has(U),se=vr(W);yt(o,U,se),ae?(y.array.next({name:U,values:{...o}}),(g.isDirty||g.dirtyFields)&&X.shouldDirty&&y.state.next({name:U,dirtyFields:lh(i,o),isDirty:N(U,se)})):ue&&!ue._f&&!Dn(se)?We(U,se,X):Je(U,se,X),tw(U,c)&&y.state.next({...n}),y.values.next({name:l.mount?U:void 0,values:{...o}})},Y=async U=>{l.mount=!0;const W=U.target;let X=W.name,ue=!0;const ae=ve(r,X),se=()=>W.type?rp(ae._f):uO(U),de=$e=>{ue=Number.isNaN($e)||Is($e,ve(o,X,$e))};if(ae){let $e,qe;const He=se(),ln=U.type===J0.BLUR||U.type===J0.FOCUS_OUT,kn=!SO(ae._f)&&!e.resolver&&!ve(n.errors,X)&&!ae._f.deps||PO(ln,ve(n.touchedFields,X),n.isSubmitted,k,E),ur=tw(X,c,ln);yt(o,X,He),ln?(ae._f.onBlur&&ae._f.onBlur(U),d&&d(0)):ae._f.onChange&&ae._f.onChange(U);const Cr=z(X,He,ln,!1),cr=!jn(Cr)||ur;if(!ln&&y.values.next({name:X,type:U.type,values:{...o}}),kn)return g.isValid&&(t.mode==="onBlur"?ln&&B():B()),cr&&y.state.next({name:X,...ur?{}:Cr});if(!ln&&ur&&y.state.next({...n}),e.resolver){const{errors:Kr}=await T([X]);if(de(He),ue){const Rr=lw(n.errors,r,X),Fn=lw(Kr,r,Rr.name||X);$e=Fn.error,X=Fn.name,qe=jn(Kr)}}else C([X],!0),$e=(await ow(ae,o,F,e.shouldUseNativeValidation))[X],C([X]),de(He),ue&&($e?qe=!1:g.isValid&&(qe=await R(r,!0)));ue&&(ae._f.deps&&re(ae._f.deps),P(X,qe,$e,Cr))}},we=(U,W)=>{if(ve(n.errors,W)&&U.focus)return U.focus(),1},re=async(U,W={})=>{let X,ue;const ae=kh(U);if(e.resolver){const se=await A(Vt(U)?U:ae);X=jn(se),ue=U?!ae.some(de=>ve(se,de)):X}else U?(ue=(await Promise.all(ae.map(async se=>{const de=ve(r,se);return await R(de&&de._f?{[se]:de}:de)}))).every(Boolean),!(!ue&&!n.isValid)&&B()):ue=X=await R(r);return y.state.next({...!oi(U)||g.isValid&&X!==n.isValid?{}:{name:U},...e.resolver||!U?{isValid:X}:{},errors:n.errors}),W.shouldFocus&&!ue&&wu(r,we,U?ae:c.mount),ue},Ee=U=>{const W={...l.mount?o:i};return Vt(U)?W:oi(U)?ve(W,U):U.map(X=>ve(W,X))},Re=(U,W)=>({invalid:!!ve((W||n).errors,U),isDirty:!!ve((W||n).dirtyFields,U),error:ve((W||n).errors,U),isValidating:!!ve(n.validatingFields,U),isTouched:!!ve((W||n).touchedFields,U)}),Ve=U=>{U&&kh(U).forEach(W=>Yt(n.errors,W)),y.state.next({errors:U?n.errors:{}})},ze=(U,W,X)=>{const ue=(ve(r,U,{_f:{}})._f||{}).ref,ae=ve(n.errors,U)||{},{ref:se,message:de,type:$e,...qe}=ae;yt(n.errors,U,{...qe,...W,ref:ue}),y.state.next({name:U,errors:n.errors,isValid:!1}),X&&X.shouldFocus&&ue&&ue.focus&&ue.focus()},be=(U,W)=>Di(U)?y.values.subscribe({next:X=>U(x(void 0,W),X)}):x(U,W,!0),Se=(U,W={})=>{for(const X of U?kh(U):c.mount)c.mount.delete(X),c.array.delete(X),W.keepValue||(Yt(r,X),Yt(o,X)),!W.keepError&&Yt(n.errors,X),!W.keepDirty&&Yt(n.dirtyFields,X),!W.keepTouched&&Yt(n.touchedFields,X),!W.keepIsValidating&&Yt(n.validatingFields,X),!e.shouldUnregister&&!W.keepDefaultValue&&Yt(i,X);y.values.next({values:{...o}}),y.state.next({...n,...W.keepDirty?{isDirty:N()}:{}}),!W.keepIsValid&&B()},pt=({disabled:U,name:W,field:X,fields:ue,value:ae})=>{if(ri(U)&&l.mount||U){const se=U?void 0:Vt(ae)?rp(X?X._f:ve(ue,W)._f):ae;yt(o,W,se),z(W,se,!1,!1,!0)}},vn=(U,W={})=>{let X=ve(r,U);const ue=ri(W.disabled)||ri(t.disabled);return yt(r,U,{...X||{},_f:{...X&&X._f?X._f:{ref:{name:U}},name:U,mount:!0,...W}}),c.mount.add(U),X?pt({field:X,disabled:ri(W.disabled)?W.disabled:t.disabled,name:U,value:W.value}):J(U,!0,W.value),{...ue?{disabled:W.disabled||t.disabled}:{},...e.progressive?{required:!!W.required,min:$l(W.min),max:$l(W.max),minLength:$l(W.minLength),maxLength:$l(W.maxLength),pattern:$l(W.pattern)}:{},name:U,onChange:Y,onBlur:Y,ref:ae=>{if(ae){vn(U,W),X=ve(r,U);const se=Vt(ae.value)&&ae.querySelectorAll&&ae.querySelectorAll("input,select,textarea")[0]||ae,de=EO(se),$e=X._f.refs||[];if(de?$e.find(qe=>qe===se):se===X._f.ref)return;yt(r,U,{_f:{...X._f,...de?{refs:[...$e.filter(np),se,...Array.isArray(ve(i,U))?[{}]:[]],ref:{type:se.type,name:U}}:{ref:se}}}),J(U,!1,void 0,se)}else X=ve(r,U,{}),X._f&&(X._f.mount=!1),(e.shouldUnregister||W.shouldUnregister)&&!(hO(c.array,U)&&l.action)&&c.unMount.add(U)}}},pi=()=>e.shouldFocusError&&wu(r,we,c.mount),lr=U=>{ri(U)&&(y.state.next({disabled:U}),wu(r,(W,X)=>{const ue=ve(r,X);ue&&(W.disabled=ue._f.disabled||U,Array.isArray(ue._f.refs)&&ue._f.refs.forEach(ae=>{ae.disabled=ue._f.disabled||U}))},0,!1))},_t=(U,W)=>async X=>{let ue;X&&(X.preventDefault&&X.preventDefault(),X.persist&&X.persist());let ae=vr(o);if(y.state.next({isSubmitting:!0}),e.resolver){const{errors:se,values:de}=await T();n.errors=se,ae=de}else await R(r);if(Yt(n.errors,"root"),jn(n.errors)){y.state.next({errors:{}});try{await U(ae,X)}catch(se){ue=se}}else W&&await W({...n.errors},X),pi(),setTimeout(pi);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:jn(n.errors)&&!ue,submitCount:n.submitCount+1,errors:n.errors}),ue)throw ue},an=(U,W={})=>{ve(r,U)&&(Vt(W.defaultValue)?Ae(U,vr(ve(i,U))):(Ae(U,W.defaultValue),yt(i,U,vr(W.defaultValue))),W.keepTouched||Yt(n.touchedFields,U),W.keepDirty||(Yt(n.dirtyFields,U),n.isDirty=W.defaultValue?N(U,vr(ve(i,U))):N()),W.keepError||(Yt(n.errors,U),g.isValid&&B()),y.state.next({...n}))},Gn=(U,W={})=>{const X=U?vr(U):i,ue=vr(X),ae=jn(U),se=ae?i:ue;if(W.keepDefaultValues||(i=X),!W.keepValues){if(W.keepDirtyValues)for(const de of c.mount)ve(n.dirtyFields,de)?yt(se,de,ve(o,de)):Ae(de,ve(se,de));else{if(L_&&Vt(U))for(const de of c.mount){const $e=ve(r,de);if($e&&$e._f){const qe=Array.isArray($e._f.refs)?$e._f.refs[0]:$e._f.ref;if(yd(qe)){const He=qe.closest("form");if(He){He.reset();break}}}}r={}}o=t.shouldUnregister?W.keepDefaultValues?vr(i):{}:vr(se),y.array.next({values:{...se}}),y.values.next({values:{...se}})}c={mount:W.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!g.isValid||!!W.keepIsValid||!!W.keepDirtyValues,l.watch=!!t.shouldUnregister,y.state.next({submitCount:W.keepSubmitCount?n.submitCount:0,isDirty:ae?!1:W.keepDirty?n.isDirty:!!(W.keepDefaultValues&&!Is(U,i)),isSubmitted:W.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ae?{}:W.keepDirtyValues?W.keepDefaultValues&&o?lh(i,o):n.dirtyFields:W.keepDefaultValues&&U?lh(i,U):W.keepDirty?n.dirtyFields:{},touchedFields:W.keepTouched?n.touchedFields:{},errors:W.keepErrors?n.errors:{},isSubmitSuccessful:W.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Zr=(U,W)=>Gn(Di(U)?U(o):U,W);return{control:{register:vn,unregister:Se,getFieldState:Re,handleSubmit:_t,setError:ze,_executeSchema:T,_getWatch:x,_getDirty:N,_updateValid:B,_removeUnmounted:D,_updateFieldArray:S,_updateDisabledField:pt,_getFieldArray:Ie,_reset:Gn,_resetDefaultValues:()=>Di(e.defaultValues)&&e.defaultValues().then(U=>{Zr(U,e.resetOptions),y.state.next({isLoading:!1})}),_updateFormState:U=>{n={...n,...U}},_disableForm:lr,_subjects:y,_proxyFormState:g,_setErrors:Z,get _fields(){return r},get _formValues(){return o},get _state(){return l},set _state(U){l=U},get _defaultValues(){return i},get _names(){return c},set _names(U){c=U},get _formState(){return n},set _formState(U){n=U},get _options(){return e},set _options(U){e={...e,...U}}},trigger:re,register:vn,handleSubmit:_t,watch:be,setValue:Ae,getValues:Ee,reset:Zr,resetField:an,clearErrors:Ve,unregister:Se,setError:ze,setFocus:(U,W={})=>{const X=ve(r,U),ue=X&&X._f;if(ue){const ae=ue.refs?ue.refs[0]:ue.ref;ae.focus&&(ae.focus(),W.shouldSelect&&ae.select())}},getFieldState:Re}}function M_(t={}){const e=Tn.useRef(),n=Tn.useRef(),[r,i]=Tn.useState({isDirty:!1,isValidating:!1,isLoading:Di(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Di(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...CO(t),formState:r});const o=e.current.control;return o._options=t,mO({subject:o._subjects.state,next:l=>{pO(l,o._proxyFormState,o._updateFormState)&&i({...o._formState})}}),Tn.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),Tn.useEffect(()=>{if(o._proxyFormState.isDirty){const l=o._getDirty();l!==r.isDirty&&o._subjects.state.next({isDirty:l})}},[o,r.isDirty]),Tn.useEffect(()=>{t.values&&!Is(t.values,n.current)?(o._reset(t.values,o._options.resetOptions),n.current=t.values,i(l=>({...l}))):o._resetDefaultValues()},[t.values,o]),Tn.useEffect(()=>{t.errors&&o._setErrors(t.errors)},[t.errors,o]),Tn.useEffect(()=>{o._state.mount||(o._updateValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),Tn.useEffect(()=>{t.shouldUnregister&&o._subjects.values.next({values:o._getWatch()})},[t.shouldUnregister,o]),e.current.formState=fO(r,o),e.current}function xI({setUser:t,dialogRef:e}){const n=Q.useRef(null),r=Q.useRef(null),{register:i,handleSubmit:o,formState:{errors:l}}=M_(),c=d=>{console.log(d),HD(yu,d.email,d.password).then(p=>{t(p.user),e.current.close(),e.current.querySelector("form").reset()}).catch(p=>{p.code==="auth/invalid-credential"&&(n.current.querySelector("p").innerHTML="Incorrect email or password. Please try again."),n.current.showModal(),console.log(p.code),console.log(p.message)})};return M.jsxs(M.Fragment,{children:[M.jsxs("form",{onSubmit:o(c),className:"login",ref:r,children:[M.jsx("h1",{children:"log in"}),M.jsxs("label",{children:[M.jsx("p",{children:"e-mail"}),M.jsx("input",{type:"email",placeholder:"email",...i("email",{required:{value:!0,message:"you must enter an e-mail"}})}),M.jsx("p",{className:"email error"})]}),M.jsxs("label",{children:[M.jsx("p",{children:"password"}),M.jsx("input",{type:"password",placeholder:"password",...i("password",{required:{value:!0,message:"you must enter a password"}})}),M.jsx("p",{className:"password error"})]}),M.jsx("input",{type:"submit",value:"submit",onClick:()=>{r.current.querySelectorAll("p.error").forEach(d=>{d.innerHTML=null}),r.current.querySelectorAll("label > input").forEach(d=>{d.style.border="1px black solid"}),l.password&&(l.password.ref.style.border="1px red solid",l.password.ref.parentElement.querySelector("p.error").innerHTML=l.password.message),l.email&&(l.email.ref.style.border="1px red solid",l.email.ref.parentElement.querySelector("p.error").innerHTML=l.email.message)}})]}),M.jsxs("dialog",{ref:n,className:"error",children:[M.jsx("p",{children:"Whoops, something went wrong. Please try again!"}),M.jsx("button",{onClick:()=>{n.current.close()},children:"close"})]})]})}xI.propTypes={setUser:Sr.PropTypes.func,dialogRef:Sr.PropTypes.object};function CI({setUser:t,dialogRef:e}){const n=Q.useRef(null),r=Q.useRef(null),{register:i,handleSubmit:o,getValues:l,formState:{errors:c}}=M_(),d=p=>{r.current.querySelectorAll("p.error").forEach(g=>{g.innerHTML=null}),qD(yu,p.email,p.password).then(g=>{const y=g.user;t(y),WD(y,{displayName:p.username}),console.log(y),e.current.close(),e.current.querySelector("form").reset()}).catch(g=>{console.log(g.code),console.log(g.message),(g.code==="auth/email-already-exists"||g.code==="auth/email-already-in-use")&&(n.current.querySelector("p").innerHTML="The provided email is already in use by an existing user. Try another one!"),n.current.showModal()})};return M.jsxs(M.Fragment,{children:[M.jsxs("form",{onSubmit:o(d),className:"signup",ref:r,children:[M.jsx("h1",{children:"sign up"}),M.jsxs("label",{children:[M.jsx("p",{children:"username"}),M.jsx("input",{type:"text",placeholder:"username",...i("username",{required:{value:!0,message:"you must enter a username"},minLength:{value:3,message:"username must be at least 3 characters long"},maxLength:{value:30,message:"username cannot be more than 15 characters"},pattern:{value:/^[A-Za-z][A-Za-z0-9_.]{2,14}$/,message:"username must start with a letter and cannot contain special characters"}})}),M.jsx("p",{className:"username error"})]}),M.jsxs("label",{children:[M.jsx("p",{children:"e-mail"}),M.jsx("input",{type:"email",placeholder:"email",...i("email",{required:{value:!0,message:"you must enter an e-mail"},pattern:{value:/^\S+@\S+$/,message:"enter a valid email"}})}),M.jsx("p",{className:"email error"})]}),M.jsxs("label",{children:[M.jsx("p",{children:"password"}),M.jsx("input",{type:"password",placeholder:"password",...i("password",{required:{value:!0,message:"you must enter a password"},minLength:{value:5,message:"password must be at least 5 characters long"}})}),M.jsx("p",{className:"password error"})]}),M.jsxs("label",{children:[M.jsx("p",{children:"confirm password"}),M.jsx("input",{type:"password",placeholder:"confirm password",...i("confirmPassword",{required:"confirm password",validate:p=>{if(p!==l("password"))return"passwords need to match"}})}),M.jsx("p",{className:"confirm-password error"})]}),M.jsx("input",{type:"submit",value:"submit",onClick:()=>{r.current.querySelectorAll("p.error").forEach(p=>{p.innerHTML=null}),r.current.querySelectorAll("label > input").forEach(p=>{p.style.border="1px black solid"}),c.confirmPassword&&(c.confirmPassword.ref.style.border="1px red solid",c.confirmPassword.ref.parentElement.querySelector("p.error").innerHTML=c.confirmPassword.message),c.username&&(c.username.ref.style.border="1px red solid",c.username.ref.parentElement.querySelector("p.error").innerHTML=c.username.message),c.password&&(c.password.ref.style.border="1px red solid",c.password.ref.parentElement.querySelector("p.error").innerHTML=c.password.message),c.email&&(c.email.ref.style.border="1px red solid",c.email.ref.parentElement.querySelector("p.error").innerHTML=c.username.message)}})]}),M.jsxs("dialog",{ref:n,className:"error",children:[M.jsx("p",{children:"Whoops, something went wrong. Please try again!"}),M.jsx("button",{onClick:()=>{n.current.close()},children:"close"})]})]})}CI.propTypes={setUser:Sr.PropTypes.func,dialogRef:Sr.PropTypes.object};function RI({action:t,setUser:e,dialogRef:n}){return t=="sign up"?M.jsx(CI,{setUser:e,dialogRef:n}):M.jsx(xI,{setUser:e,dialogRef:n})}RI.propTypes={action:Sr.PropTypes.string,setUser:Sr.PropTypes.func,dialogRef:Sr.PropTypes.object};const RO="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='48px'%20viewBox='0%20-960%20960%20960'%20width='48px'%20fill='%23FFFFFF'%3e%3cpath%20d='M480-80q-83%200-156-31.5T197-197q-54-54-85.5-127T80-480q0-83%2031.5-156T197-763q54-54%20127-85.5T480-880q83%200%20156%2031.5T763-763q54%2054%2085.5%20127T880-480q0%2083-31.5%20156T763-197q-54%2054-127%2085.5T480-80Zm0-202q40-41%2071.65-84.1%2027.13-36.81%2049.74-80.81Q624-490.9%20624-534q0-60-42-102t-102-42q-60%200-102%2042t-42%20101.63q0%2043.37%2022.61%2087.39t49.74%2080.86Q440-323%20480-282Zm0-198q-22.5%200-38.25-15.75T426-534q0-22.5%2015.75-38.25T480-588q22.5%200%2038.25%2015.75T534-534q0%2022.5-15.75%2038.25T480-480Z'/%3e%3c/svg%3e",O_=Q.forwardRef(function({user:e,setUser:n,setUserAction:r,userAction:i},o){return Q.useEffect(()=>{yu.currentUser&&n(yu.currentUser)},[n]),M.jsxs(M.Fragment,{children:[M.jsxs("header",{children:[M.jsx(tm,{to:"/",children:M.jsx("img",{src:RO})}),e?M.jsxs("div",{children:[M.jsxs("p",{children:["hello, ",e.displayName]}),M.jsx("button",{className:"sign-out",onClick:()=>{GD(yu).then(()=>{n(null)}).catch(l=>{console.log(l)})},children:"sign out"})]}):M.jsxs("div",{className:"logged-out",children:[M.jsx("button",{className:"sign-up",onClick:()=>{r("sign up"),o.current&&o.current.showModal()},children:"sign up"}),M.jsx("button",{className:"log-in",onClick:()=>{r("log in"),o.current&&o.current.showModal()},children:"log in"})]})]}),M.jsxs("dialog",{ref:o,className:"login-signup",children:[M.jsx(RI,{action:i,setUser:n,dialogRef:o}),M.jsx("button",{className:"cancel",onClick:()=>{o.current.querySelectorAll("label input").forEach(l=>{l.style.border="1px solid black"}),o.current.querySelectorAll("label p.error").forEach(l=>{l.innerHTML=""}),o.current.close(),o.current.querySelector("form").reset()},children:"cancel"}),M.jsx("a",{onClick:()=>{i=="log in"?r("sign up"):r("log in")},children:i=="log in"?"sign up instead":"log in instead"})]})]})});O_.propTypes={user:Sr.PropTypes.object,setUser:Sr.PropTypes.func,userAction:Sr.PropTypes.string,setUserAction:Sr.PropTypes.func};function kO(){const t=r_(Xu,"cities"),e=Q.useRef([]),[n,r]=Q.useState(""),[i,o]=Q.useState(null),l=Q.useRef(null);Q.useEffect(()=>{(async()=>{try{const F=(await A2(t)).docs.map(V=>({...V.data(),id:V.id}));e.current=F}catch(k){console.log(k)}})()},[t]);const[c,d]=Q.useState(!1),[p,g]=Q.useState([]);let y="";return M.jsxs(M.Fragment,{children:[M.jsx(O_,{user:i,setUser:o,setUserAction:r,userAction:n,ref:l}),M.jsx("img",{src:mC,className:"icon"}),M.jsxs("form",{id:"city-search",children:[M.jsxs("div",{className:"search",children:[M.jsxs("div",{className:"search-bar",children:[M.jsx("input",{type:"text",id:"city",spellCheck:"false",placeholder:"type city name",onChange:E=>{y=E.target.value,y.trim().length===0?d(!1):d(!0),g(y.trim().length>0?e.current.filter(k=>k.name.toLowerCase().includes(y.toLowerCase())).map(k=>k.name):[])},onFocus:E=>{y=E.target.value,y.trim().length===0?d(!1):d(!0),g(y.trim().length>0?e.current.filter(k=>k.name.toLowerCase().includes(y.toLowerCase())).map(k=>k.name):[])},onBlur:()=>{setTimeout(()=>{d(!1)},300)}}),M.jsx("button",{type:"button",className:"city-search",children:p.length>0?M.jsx(tm,{to:"search/"+p[0],children:"🔍"}):"🔍"})]}),M.jsx("div",{className:"search-box",style:c?{}:{visibility:"hidden"},children:M.jsx("ul",{children:c&&p.length>0?p.map(E=>M.jsx("li",{children:M.jsx(tm,{to:"search/"+E,children:E})},E)):c&&p.length==0?M.jsx(M.Fragment,{children:"no results"}):M.jsx(M.Fragment,{})})})]}),M.jsxs("div",{className:"features",style:c?{visibility:"hidden"}:{},children:[M.jsx(Ql,{image:gC,text:"travel advisory integration"}),M.jsx(Ql,{image:_C,text:"real-time updates"}),M.jsx(Ql,{image:vC,text:"safety ratings by area"}),M.jsx(Ql,{image:yC,text:"local emergency contacts"})]})]})]})}function LO(t,e){const n=Q.useRef(e);Q.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const bO=1;function NO(t){return Object.freeze({__version:bO,map:t})}const kI=Q.createContext(null),DO=kI.Provider;function MO(){const t=Q.useContext(kI);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function OO(t){function e(n,r){const{instance:i}=t(n).current;return Q.useImperativeHandle(r,()=>i),null}return Q.forwardRef(e)}function VO(t,e){const n=Q.useRef();Q.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function LI(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var xm={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(cS,function(n){var r="1.9.4";function i(s){var a,h,f,_;for(h=1,f=arguments.length;h<f;h++){_=arguments[h];for(a in _)s[a]=_[a]}return s}var o=Object.create||function(){function s(){}return function(a){return s.prototype=a,new s}}();function l(s,a){var h=Array.prototype.slice;if(s.bind)return s.bind.apply(s,h.call(arguments,1));var f=h.call(arguments,2);return function(){return s.apply(a,f.length?f.concat(h.call(arguments)):arguments)}}var c=0;function d(s){return"_leaflet_id"in s||(s._leaflet_id=++c),s._leaflet_id}function p(s,a,h){var f,_,w,O;return O=function(){f=!1,_&&(w.apply(h,_),_=!1)},w=function(){f?_=arguments:(s.apply(h,arguments),setTimeout(O,a),f=!0)},w}function g(s,a,h){var f=a[1],_=a[0],w=f-_;return s===f&&h?s:((s-_)%w+w)%w+_}function y(){return!1}function E(s,a){if(a===!1)return s;var h=Math.pow(10,a===void 0?6:a);return Math.round(s*h)/h}function k(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function F(s){return k(s).split(/\s+/)}function V(s,a){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var h in a)s.options[h]=a[h];return s.options}function B(s,a,h){var f=[];for(var _ in s)f.push(encodeURIComponent(h?_.toUpperCase():_)+"="+encodeURIComponent(s[_]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var C=/\{ *([\w_ -]+) *\}/g;function S(s,a){return s.replace(C,function(h,f){var _=a[f];if(_===void 0)throw new Error("No value provided for variable "+h);return typeof _=="function"&&(_=_(a)),_})}var b=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function Z(s,a){for(var h=0;h<s.length;h++)if(s[h]===a)return h;return-1}var J="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function z(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var P=0;function T(s){var a=+new Date,h=Math.max(0,16-(a-P));return P=a+h,window.setTimeout(s,h)}var A=window.requestAnimationFrame||z("RequestAnimationFrame")||T,R=window.cancelAnimationFrame||z("CancelAnimationFrame")||z("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function D(s,a,h){if(h&&A===T)s.call(a);else return A.call(window,l(s,a))}function N(s){s&&R.call(window,s)}var x={__proto__:null,extend:i,create:o,bind:l,get lastId(){return c},stamp:d,throttle:p,wrapNum:g,falseFn:y,formatNum:E,trim:k,splitWords:F,setOptions:V,getParamString:B,template:S,isArray:b,indexOf:Z,emptyImageUrl:J,requestFn:A,cancelFn:R,requestAnimFrame:D,cancelAnimFrame:N};function Ie(){}Ie.extend=function(s){var a=function(){V(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=a.__super__=this.prototype,f=o(h);f.constructor=a,a.prototype=f;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(a[_]=this[_]);return s.statics&&i(a,s.statics),s.includes&&(Je(s.includes),i.apply(null,[f].concat(s.includes))),i(f,s),delete f.statics,delete f.includes,f.options&&(f.options=h.options?o(h.options):{},i(f.options,s.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,O=f._initHooks.length;w<O;w++)f._initHooks[w].call(this)}},a},Ie.include=function(s){var a=this.prototype.options;return i(this.prototype,s),s.options&&(this.prototype.options=a,this.mergeOptions(s.options)),this},Ie.mergeOptions=function(s){return i(this.prototype.options,s),this},Ie.addInitHook=function(s){var a=Array.prototype.slice.call(arguments,1),h=typeof s=="function"?s:function(){this[s].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function Je(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=b(s)?s:[s];for(var a=0;a<s.length;a++)s[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var We={on:function(s,a,h){if(typeof s=="object")for(var f in s)this._on(f,s[f],a);else{s=F(s);for(var _=0,w=s.length;_<w;_++)this._on(s[_],a,h)}return this},off:function(s,a,h){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var f in s)this._off(f,s[f],a);else{s=F(s);for(var _=arguments.length===1,w=0,O=s.length;w<O;w++)_?this._off(s[w]):this._off(s[w],a,h)}return this},_on:function(s,a,h,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(s,a,h)===!1){h===this&&(h=void 0);var _={fn:a,ctx:h};f&&(_.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(_)}},_off:function(s,a,h){var f,_,w;if(this._events&&(f=this._events[s],!!f)){if(arguments.length===1){if(this._firingCount)for(_=0,w=f.length;_<w;_++)f[_].fn=y;delete this._events[s];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var O=this._listens(s,a,h);if(O!==!1){var H=f[O];this._firingCount&&(H.fn=y,this._events[s]=f=f.slice()),f.splice(O,1)}}},fire:function(s,a,h){if(!this.listens(s,h))return this;var f=i({},a,{type:s,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var _=this._events[s];if(_){this._firingCount=this._firingCount+1||1;for(var w=0,O=_.length;w<O;w++){var H=_[w],K=H.fn;H.once&&this.off(s,K,H.ctx),K.call(H.ctx||this,f)}this._firingCount--}}return h&&this._propagateEvent(f),this},listens:function(s,a,h,f){typeof s!="string"&&console.warn('"string" type argument expected');var _=a;typeof a!="function"&&(f=!!a,_=void 0,h=void 0);var w=this._events&&this._events[s];if(w&&w.length&&this._listens(s,_,h)!==!1)return!0;if(f){for(var O in this._eventParents)if(this._eventParents[O].listens(s,a,h,f))return!0}return!1},_listens:function(s,a,h){if(!this._events)return!1;var f=this._events[s]||[];if(!a)return!!f.length;h===this&&(h=void 0);for(var _=0,w=f.length;_<w;_++)if(f[_].fn===a&&f[_].ctx===h)return _;return!1},once:function(s,a,h){if(typeof s=="object")for(var f in s)this._on(f,s[f],a,!0);else{s=F(s);for(var _=0,w=s.length;_<w;_++)this._on(s[_],a,h,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[d(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[d(s)],this},_propagateEvent:function(s){for(var a in this._eventParents)this._eventParents[a].fire(s.type,i({layer:s.target,propagatedFrom:s.target},s),!0)}};We.addEventListener=We.on,We.removeEventListener=We.clearAllEventListeners=We.off,We.addOneTimeEventListener=We.once,We.fireEvent=We.fire,We.hasEventListeners=We.listens;var Ae=Ie.extend(We);function Y(s,a,h){this.x=h?Math.round(s):s,this.y=h?Math.round(a):a}var we=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Y.prototype={clone:function(){return new Y(this.x,this.y)},add:function(s){return this.clone()._add(re(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(re(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Y(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Y(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=we(this.x),this.y=we(this.y),this},distanceTo:function(s){s=re(s);var a=s.x-this.x,h=s.y-this.y;return Math.sqrt(a*a+h*h)},equals:function(s){return s=re(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=re(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+E(this.x)+", "+E(this.y)+")"}};function re(s,a,h){return s instanceof Y?s:b(s)?new Y(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Y(s.x,s.y):new Y(s,a,h)}function Ee(s,a){if(s)for(var h=a?[s,a]:s,f=0,_=h.length;f<_;f++)this.extend(h[f])}Ee.prototype={extend:function(s){var a,h;if(!s)return this;if(s instanceof Y||typeof s[0]=="number"||"x"in s)a=h=re(s);else if(s=Re(s),a=s.min,h=s.max,!a||!h)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=h.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(s){return re((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return re(this.min.x,this.max.y)},getTopRight:function(){return re(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var a,h;return typeof s[0]=="number"||s instanceof Y?s=re(s):s=Re(s),s instanceof Ee?(a=s.min,h=s.max):a=h=s,a.x>=this.min.x&&h.x<=this.max.x&&a.y>=this.min.y&&h.y<=this.max.y},intersects:function(s){s=Re(s);var a=this.min,h=this.max,f=s.min,_=s.max,w=_.x>=a.x&&f.x<=h.x,O=_.y>=a.y&&f.y<=h.y;return w&&O},overlaps:function(s){s=Re(s);var a=this.min,h=this.max,f=s.min,_=s.max,w=_.x>a.x&&f.x<h.x,O=_.y>a.y&&f.y<h.y;return w&&O},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var a=this.min,h=this.max,f=Math.abs(a.x-h.x)*s,_=Math.abs(a.y-h.y)*s;return Re(re(a.x-f,a.y-_),re(h.x+f,h.y+_))},equals:function(s){return s?(s=Re(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Re(s,a){return!s||s instanceof Ee?s:new Ee(s,a)}function Ve(s,a){if(s)for(var h=a?[s,a]:s,f=0,_=h.length;f<_;f++)this.extend(h[f])}Ve.prototype={extend:function(s){var a=this._southWest,h=this._northEast,f,_;if(s instanceof be)f=s,_=s;else if(s instanceof Ve){if(f=s._southWest,_=s._northEast,!f||!_)return this}else return s?this.extend(Se(s)||ze(s)):this;return!a&&!h?(this._southWest=new be(f.lat,f.lng),this._northEast=new be(_.lat,_.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),h.lat=Math.max(_.lat,h.lat),h.lng=Math.max(_.lng,h.lng)),this},pad:function(s){var a=this._southWest,h=this._northEast,f=Math.abs(a.lat-h.lat)*s,_=Math.abs(a.lng-h.lng)*s;return new Ve(new be(a.lat-f,a.lng-_),new be(h.lat+f,h.lng+_))},getCenter:function(){return new be((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new be(this.getNorth(),this.getWest())},getSouthEast:function(){return new be(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof be||"lat"in s?s=Se(s):s=ze(s);var a=this._southWest,h=this._northEast,f,_;return s instanceof Ve?(f=s.getSouthWest(),_=s.getNorthEast()):f=_=s,f.lat>=a.lat&&_.lat<=h.lat&&f.lng>=a.lng&&_.lng<=h.lng},intersects:function(s){s=ze(s);var a=this._southWest,h=this._northEast,f=s.getSouthWest(),_=s.getNorthEast(),w=_.lat>=a.lat&&f.lat<=h.lat,O=_.lng>=a.lng&&f.lng<=h.lng;return w&&O},overlaps:function(s){s=ze(s);var a=this._southWest,h=this._northEast,f=s.getSouthWest(),_=s.getNorthEast(),w=_.lat>a.lat&&f.lat<h.lat,O=_.lng>a.lng&&f.lng<h.lng;return w&&O},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,a){return s?(s=ze(s),this._southWest.equals(s.getSouthWest(),a)&&this._northEast.equals(s.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ze(s,a){return s instanceof Ve?s:new Ve(s,a)}function be(s,a,h){if(isNaN(s)||isNaN(a))throw new Error("Invalid LatLng object: ("+s+", "+a+")");this.lat=+s,this.lng=+a,h!==void 0&&(this.alt=+h)}be.prototype={equals:function(s,a){if(!s)return!1;s=Se(s);var h=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return h<=(a===void 0?1e-9:a)},toString:function(s){return"LatLng("+E(this.lat,s)+", "+E(this.lng,s)+")"},distanceTo:function(s){return vn.distance(this,Se(s))},wrap:function(){return vn.wrapLatLng(this)},toBounds:function(s){var a=180*s/40075017,h=a/Math.cos(Math.PI/180*this.lat);return ze([this.lat-a,this.lng-h],[this.lat+a,this.lng+h])},clone:function(){return new be(this.lat,this.lng,this.alt)}};function Se(s,a,h){return s instanceof be?s:b(s)&&typeof s[0]!="object"?s.length===3?new be(s[0],s[1],s[2]):s.length===2?new be(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new be(s.lat,"lng"in s?s.lng:s.lon,s.alt):a===void 0?null:new be(s,a,h)}var pt={latLngToPoint:function(s,a){var h=this.projection.project(s),f=this.scale(a);return this.transformation._transform(h,f)},pointToLatLng:function(s,a){var h=this.scale(a),f=this.transformation.untransform(s,h);return this.projection.unproject(f)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var a=this.projection.bounds,h=this.scale(s),f=this.transformation.transform(a.min,h),_=this.transformation.transform(a.max,h);return new Ee(f,_)},infinite:!1,wrapLatLng:function(s){var a=this.wrapLng?g(s.lng,this.wrapLng,!0):s.lng,h=this.wrapLat?g(s.lat,this.wrapLat,!0):s.lat,f=s.alt;return new be(h,a,f)},wrapLatLngBounds:function(s){var a=s.getCenter(),h=this.wrapLatLng(a),f=a.lat-h.lat,_=a.lng-h.lng;if(f===0&&_===0)return s;var w=s.getSouthWest(),O=s.getNorthEast(),H=new be(w.lat-f,w.lng-_),K=new be(O.lat-f,O.lng-_);return new Ve(H,K)}},vn=i({},pt,{wrapLng:[-180,180],R:6371e3,distance:function(s,a){var h=Math.PI/180,f=s.lat*h,_=a.lat*h,w=Math.sin((a.lat-s.lat)*h/2),O=Math.sin((a.lng-s.lng)*h/2),H=w*w+Math.cos(f)*Math.cos(_)*O*O,K=2*Math.atan2(Math.sqrt(H),Math.sqrt(1-H));return this.R*K}}),pi=6378137,lr={R:pi,MAX_LATITUDE:85.0511287798,project:function(s){var a=Math.PI/180,h=this.MAX_LATITUDE,f=Math.max(Math.min(h,s.lat),-h),_=Math.sin(f*a);return new Y(this.R*s.lng*a,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(s){var a=180/Math.PI;return new be((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*a,s.x*a/this.R)},bounds:function(){var s=pi*Math.PI;return new Ee([-s,-s],[s,s])}()};function _t(s,a,h,f){if(b(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=a,this._c=h,this._d=f}_t.prototype={transform:function(s,a){return this._transform(s.clone(),a)},_transform:function(s,a){return a=a||1,s.x=a*(this._a*s.x+this._b),s.y=a*(this._c*s.y+this._d),s},untransform:function(s,a){return a=a||1,new Y((s.x/a-this._b)/this._a,(s.y/a-this._d)/this._c)}};function an(s,a,h,f){return new _t(s,a,h,f)}var Gn=i({},vn,{code:"EPSG:3857",projection:lr,transformation:function(){var s=.5/(Math.PI*lr.R);return an(s,.5,-s,.5)}()}),Zr=i({},Gn,{code:"EPSG:900913"});function Rn(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Ji(s,a){var h="",f,_,w,O,H,K;for(f=0,w=s.length;f<w;f++){for(H=s[f],_=0,O=H.length;_<O;_++)K=H[_],h+=(_?"L":"M")+K.x+" "+K.y;h+=a?le.svg?"z":"x":""}return h||"M0 0"}var es=document.documentElement.style,U="ActiveXObject"in window,W=U&&!document.addEventListener,X="msLaunchUri"in navigator&&!("documentMode"in document),ue=Ce("webkit"),ae=Ce("android"),se=Ce("android 2")||Ce("android 3"),de=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),$e=ae&&Ce("Google")&&de<537&&!("AudioNode"in window),qe=!!window.opera,He=!X&&Ce("chrome"),ln=Ce("gecko")&&!ue&&!qe&&!U,kn=!He&&Ce("safari"),ur=Ce("phantom"),Cr="OTransition"in es,cr=navigator.platform.indexOf("Win")===0,Kr=U&&"transition"in es,Rr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!se,Fn="MozPerspective"in es,Fo=!window.L_DISABLE_3D&&(Kr||Rr||Fn)&&!Cr&&!ur,kr=typeof orientation<"u"||Ce("mobile"),Qs=kr&&ue,Ys=kr&&Rr,Xs=!window.PointerEvent&&window.MSPointerEvent,Lr=!!(window.PointerEvent||Xs),ts="ontouchstart"in window||!!window.TouchEvent,j=!window.L_NO_TOUCH&&(ts||Lr),$=kr&&qe,ee=kr&&ln,he=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,_e=function(){var s=!1;try{var a=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",y,a),window.removeEventListener("testPassiveEventSupport",y,a)}catch{}return s}(),De=function(){return!!document.createElement("canvas").getContext}(),xe=!!(document.createElementNS&&Rn("svg").createSVGRect),me=!!xe&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Te=!xe&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var a=s.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),Be=navigator.platform.indexOf("Mac")===0,mt=navigator.platform.indexOf("Linux")===0;function Ce(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var le={ie:U,ielt9:W,edge:X,webkit:ue,android:ae,android23:se,androidStock:$e,opera:qe,chrome:He,gecko:ln,safari:kn,phantom:ur,opera12:Cr,win:cr,ie3d:Kr,webkit3d:Rr,gecko3d:Fn,any3d:Fo,mobile:kr,mobileWebkit:Qs,mobileWebkit3d:Ys,msPointer:Xs,pointer:Lr,touch:j,touchNative:ts,mobileOpera:$,mobileGecko:ee,retina:he,passiveEvents:_e,canvas:De,svg:xe,vml:Te,inlineSvg:me,mac:Be,linux:mt},ht=le.msPointer?"MSPointerDown":"pointerdown",un=le.msPointer?"MSPointerMove":"pointermove",Pt=le.msPointer?"MSPointerUp":"pointerup",Un=le.msPointer?"MSPointerCancel":"pointercancel",Gr={touchstart:ht,touchmove:un,touchend:Pt,touchcancel:Un},Qn={touchstart:cn,touchmove:ot,touchend:ot,touchcancel:ot},zt={},Qt=!1;function ns(s,a,h){return a==="touchstart"&&it(),Qn[a]?(h=Qn[a].bind(this,h),s.addEventListener(Gr[a],h,!1),h):(console.warn("wrong event specified:",a),y)}function rs(s,a,h){if(!Gr[a]){console.warn("wrong event specified:",a);return}s.removeEventListener(Gr[a],h,!1)}function mi(s){zt[s.pointerId]=s}function hr(s){zt[s.pointerId]&&(zt[s.pointerId]=s)}function Qr(s){delete zt[s.pointerId]}function it(){Qt||(document.addEventListener(ht,mi,!0),document.addEventListener(un,hr,!0),document.addEventListener(Pt,Qr,!0),document.addEventListener(Un,Qr,!0),Qt=!0)}function ot(s,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var h in zt)a.touches.push(zt[h]);a.changedTouches=[a],s(a)}}function cn(s,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&At(a),ot(s,a)}function gi(s){var a={},h,f;for(f in s)h=s[f],a[f]=h&&h.bind?h.bind(s):h;return s=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var Js=200;function eo(s,a){s.addEventListener("dblclick",a);var h=0,f;function _(w){if(w.detail!==1){f=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var O=yl(w);if(!(O.some(function(K){return K instanceof HTMLLabelElement&&K.attributes.for})&&!O.some(function(K){return K instanceof HTMLInputElement||K instanceof HTMLSelectElement}))){var H=Date.now();H-h<=Js?(f++,f===2&&a(gi(w))):f=1,h=H}}}return s.addEventListener("click",_),{dblclick:a,simDblclick:_}}function _i(s,a){s.removeEventListener("dblclick",a.dblclick),s.removeEventListener("click",a.simDblclick)}var to=yi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),no=yi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ll=no==="webkitTransition"||no==="OTransition"?no+"End":"transitionend";function ul(s){return typeof s=="string"?document.getElementById(s):s}function is(s,a){var h=s.style[a]||s.currentStyle&&s.currentStyle[a];if((!h||h==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(s,null);h=f?f[a]:null}return h==="auto"?null:h}function Qe(s,a,h){var f=document.createElement(s);return f.className=a||"",h&&h.appendChild(f),f}function dt(s){var a=s.parentNode;a&&a.removeChild(s)}function ro(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function vi(s){var a=s.parentNode;a&&a.lastChild!==s&&a.appendChild(s)}function ss(s){var a=s.parentNode;a&&a.firstChild!==s&&a.insertBefore(s,a.firstChild)}function cl(s,a){if(s.classList!==void 0)return s.classList.contains(a);var h=dr(s);return h.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(h)}function je(s,a){if(s.classList!==void 0)for(var h=F(a),f=0,_=h.length;f<_;f++)s.classList.add(h[f]);else if(!cl(s,a)){var w=dr(s);hl(s,(w?w+" ":"")+a)}}function Tt(s,a){s.classList!==void 0?s.classList.remove(a):hl(s,k((" "+dr(s)+" ").replace(" "+a+" "," ")))}function hl(s,a){s.className.baseVal===void 0?s.className=a:s.className.baseVal=a}function dr(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function bt(s,a){"opacity"in s.style?s.style.opacity=a:"filter"in s.style&&Uo(s,a)}function Uo(s,a){var h=!1,f="DXImageTransform.Microsoft.Alpha";try{h=s.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),h?(h.Enabled=a!==100,h.Opacity=a):s.style.filter+=" progid:"+f+"(opacity="+a+")"}function yi(s){for(var a=document.documentElement.style,h=0;h<s.length;h++)if(s[h]in a)return s[h];return!1}function Yr(s,a,h){var f=a||new Y(0,0);s.style[to]=(le.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(h?" scale("+h+")":"")}function Me(s,a){s._leaflet_pos=a,le.any3d?Yr(s,a):(s.style.left=a.x+"px",s.style.top=a.y+"px")}function fr(s){return s._leaflet_pos||new Y(0,0)}var br,Nr,dl;if("onselectstart"in document)br=function(){ke(window,"selectstart",At)},Nr=function(){ut(window,"selectstart",At)};else{var os=yi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);br=function(){if(os){var s=document.documentElement.style;dl=s[os],s[os]="none"}},Nr=function(){os&&(document.documentElement.style[os]=dl,dl=void 0)}}function fl(){ke(window,"dragstart",At)}function pl(){ut(window,"dragstart",At)}var zo,ml;function wi(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Yn(),zo=s,ml=s.style.outlineStyle,s.style.outlineStyle="none",ke(window,"keydown",Yn))}function Yn(){zo&&(zo.style.outlineStyle=ml,zo=void 0,ml=void 0,ut(window,"keydown",Yn))}function gl(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Bo(s){var a=s.getBoundingClientRect();return{x:a.width/s.offsetWidth||1,y:a.height/s.offsetHeight||1,boundingClientRect:a}}var vc={__proto__:null,TRANSFORM:to,TRANSITION:no,TRANSITION_END:ll,get:ul,getStyle:is,create:Qe,remove:dt,empty:ro,toFront:vi,toBack:ss,hasClass:cl,addClass:je,removeClass:Tt,setClass:hl,getClass:dr,setOpacity:bt,testProp:yi,setTransform:Yr,setPosition:Me,getPosition:fr,get disableTextSelection(){return br},get enableTextSelection(){return Nr},disableImageDrag:fl,enableImageDrag:pl,preventOutline:wi,restoreOutline:Yn,getSizedParentNode:gl,getScale:Bo};function ke(s,a,h,f){if(a&&typeof a=="object")for(var _ in a)_l(s,_,a[_],h);else{a=F(a);for(var w=0,O=a.length;w<O;w++)_l(s,a[w],h,f)}return this}var pr="_leaflet_events";function ut(s,a,h,f){if(arguments.length===1)yc(s),delete s[pr];else if(a&&typeof a=="object")for(var _ in a)vl(s,_,a[_],h);else if(a=F(a),arguments.length===2)yc(s,function(H){return Z(a,H)!==-1});else for(var w=0,O=a.length;w<O;w++)vl(s,a[w],h,f);return this}function yc(s,a){for(var h in s[pr]){var f=h.split(/\d/)[0];(!a||a(f))&&vl(s,f,null,null,h)}}var mr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function _l(s,a,h,f){var _=a+d(h)+(f?"_"+d(f):"");if(s[pr]&&s[pr][_])return this;var w=function(H){return h.call(f||s,H||window.event)},O=w;!le.touchNative&&le.pointer&&a.indexOf("touch")===0?w=ns(s,a,w):le.touch&&a==="dblclick"?w=eo(s,w):"addEventListener"in s?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?s.addEventListener(mr[a]||a,w,le.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(w=function(H){H=H||window.event,wl(s,H)&&O(H)},s.addEventListener(mr[a],w,!1)):s.addEventListener(a,O,!1):s.attachEvent("on"+a,w),s[pr]=s[pr]||{},s[pr][_]=w}function vl(s,a,h,f,_){_=_||a+d(h)+(f?"_"+d(f):"");var w=s[pr]&&s[pr][_];if(!w)return this;!le.touchNative&&le.pointer&&a.indexOf("touch")===0?rs(s,a,w):le.touch&&a==="dblclick"?_i(s,w):"removeEventListener"in s?s.removeEventListener(mr[a]||a,w,!1):s.detachEvent("on"+a,w),s[pr][_]=null}function Xn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function as(s){return _l(s,"wheel",Xn),this}function ls(s){return ke(s,"mousedown touchstart dblclick contextmenu",Xn),s._leaflet_disable_click=!0,this}function At(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function Jn(s){return At(s),Xn(s),this}function yl(s){if(s.composedPath)return s.composedPath();for(var a=[],h=s.target;h;)a.push(h),h=h.parentNode;return a}function jo(s,a){if(!a)return new Y(s.clientX,s.clientY);var h=Bo(a),f=h.boundingClientRect;return new Y((s.clientX-f.left)/h.x-a.clientLeft,(s.clientY-f.top)/h.y-a.clientTop)}var It=le.linux&&le.chrome?window.devicePixelRatio:le.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function wc(s){return le.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/It:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function wl(s,a){var h=a.relatedTarget;if(!h)return!0;try{for(;h&&h!==s;)h=h.parentNode}catch{return!1}return h!==s}var Ec={__proto__:null,on:ke,off:ut,stopPropagation:Xn,disableScrollPropagation:as,disableClickPropagation:ls,preventDefault:At,stop:Jn,getPropagationPath:yl,getMousePosition:jo,getWheelDelta:wc,isExternalTarget:wl,addListener:ke,removeListener:ut},El=Ae.extend({run:function(s,a,h,f){this.stop(),this._el=s,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=fr(s),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(s){var a=+new Date-this._startTime,h=this._duration*1e3;a<h?this._runFrame(this._easeOut(a/h),s):(this._runFrame(1),this._complete())},_runFrame:function(s,a){var h=this._startPos.add(this._offset.multiplyBy(s));a&&h._round(),Me(this._el,h),this.fire("step")},_complete:function(){N(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Ke=Ae.extend({options:{crs:Gn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,a){a=V(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(Se(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=no&&le.any3d&&!le.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ke(this._proxy,ll,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,a,h){if(a=a===void 0?this._zoom:this._limitZoom(a),s=this._limitCenter(Se(s),a,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=i({animate:h.animate},h.zoom),h.pan=i({animate:h.animate,duration:h.duration},h.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,a,h.zoom):this._tryAnimatedPan(s,h.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(s,a,h.pan&&h.pan.noMoveStart),this},setZoom:function(s,a){return this._loaded?this.setView(this.getCenter(),s,{zoom:a}):(this._zoom=s,this)},zoomIn:function(s,a){return s=s||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,a)},zoomOut:function(s,a){return s=s||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,a)},setZoomAround:function(s,a,h){var f=this.getZoomScale(a),_=this.getSize().divideBy(2),w=s instanceof Y?s:this.latLngToContainerPoint(s),O=w.subtract(_).multiplyBy(1-1/f),H=this.containerPointToLatLng(_.add(O));return this.setView(H,a,{zoom:h})},_getBoundsCenterZoom:function(s,a){a=a||{},s=s.getBounds?s.getBounds():ze(s);var h=re(a.paddingTopLeft||a.padding||[0,0]),f=re(a.paddingBottomRight||a.padding||[0,0]),_=this.getBoundsZoom(s,!1,h.add(f));if(_=typeof a.maxZoom=="number"?Math.min(a.maxZoom,_):_,_===1/0)return{center:s.getCenter(),zoom:_};var w=f.subtract(h).divideBy(2),O=this.project(s.getSouthWest(),_),H=this.project(s.getNorthEast(),_),K=this.unproject(O.add(H).divideBy(2).add(w),_);return{center:K,zoom:_}},fitBounds:function(s,a){if(s=ze(s),!s.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(s,a);return this.setView(h.center,h.zoom,a)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,a){return this.setView(s,this._zoom,{pan:a})},panBy:function(s,a){if(s=re(s).round(),a=a||{},!s.x&&!s.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new El,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){je(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,h,a.duration||.25,a.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,a,h){if(h=h||{},h.animate===!1||!le.any3d)return this.setView(s,a,h);this._stop();var f=this.project(this.getCenter()),_=this.project(s),w=this.getSize(),O=this._zoom;s=Se(s),a=a===void 0?O:a;var H=Math.max(w.x,w.y),K=H*this.getZoomScale(O,a),ne=_.distanceTo(f)||1,fe=1.42,Le=fe*fe;function Ze(jt){var Vc=jt?-1:1,oS=jt?K:H,aS=K*K-H*H+Vc*Le*Le*ne*ne,lS=2*oS*Le*ne,ff=aS/lS,iv=Math.sqrt(ff*ff+1)-ff,uS=iv<1e-9?-18:Math.log(iv);return uS}function bn(jt){return(Math.exp(jt)-Math.exp(-jt))/2}function nn(jt){return(Math.exp(jt)+Math.exp(-jt))/2}function _r(jt){return bn(jt)/nn(jt)}var Bn=Ze(0);function ta(jt){return H*(nn(Bn)/nn(Bn+fe*jt))}function nS(jt){return H*(nn(Bn)*_r(Bn+fe*jt)-bn(Bn))/Le}function rS(jt){return 1-Math.pow(1-jt,1.5)}var iS=Date.now(),nv=(Ze(1)-Bn)/fe,sS=h.duration?1e3*h.duration:1e3*nv*.8;function rv(){var jt=(Date.now()-iS)/sS,Vc=rS(jt)*nv;jt<=1?(this._flyToFrame=D(rv,this),this._move(this.unproject(f.add(_.subtract(f).multiplyBy(nS(Vc)/ne)),O),this.getScaleZoom(H/ta(Vc),O),{flyTo:!0})):this._move(s,a)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),rv.call(this),this},flyToBounds:function(s,a){var h=this._getBoundsCenterZoom(s,a);return this.flyTo(h.center,h.zoom,a)},setMaxBounds:function(s){return s=ze(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var a=this.options.minZoom;return this.options.minZoom=s,this._loaded&&a!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var a=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&a!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,a){this._enforcingBounds=!0;var h=this.getCenter(),f=this._limitCenter(h,this._zoom,ze(s));return h.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(s,a){a=a||{};var h=re(a.paddingTopLeft||a.padding||[0,0]),f=re(a.paddingBottomRight||a.padding||[0,0]),_=this.project(this.getCenter()),w=this.project(s),O=this.getPixelBounds(),H=Re([O.min.add(h),O.max.subtract(f)]),K=H.getSize();if(!H.contains(w)){this._enforcingBounds=!0;var ne=w.subtract(H.getCenter()),fe=H.extend(w).getSize().subtract(K);_.x+=ne.x<0?-fe.x:fe.x,_.y+=ne.y<0?-fe.y:fe.y,this.panTo(this.unproject(_),a),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=i({animate:!1,pan:!0},s===!0?{animate:!0}:s);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),f=a.divideBy(2).round(),_=h.divideBy(2).round(),w=f.subtract(_);return!w.x&&!w.y?this:(s.animate&&s.pan?this.panBy(w):(s.pan&&this._rawPanBy(w),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=i({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),h=l(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,h,s):navigator.geolocation.getCurrentPosition(a,h,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var a=s.code,h=s.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var a=s.coords.latitude,h=s.coords.longitude,f=new be(a,h),_=f.toBounds(s.coords.accuracy*2),w=this._locateOptions;if(w.setView){var O=this.getBoundsZoom(_);this.setView(f,w.maxZoom?Math.min(O,w.maxZoom):O)}var H={latlng:f,bounds:_,timestamp:s.timestamp};for(var K in s.coords)typeof s.coords[K]=="number"&&(H[K]=s.coords[K]);this.fire("locationfound",H)}},addHandler:function(s,a){if(!a)return this;var h=this[s]=new a(this);return this._handlers.push(h),this.options[s]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),dt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(N(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)dt(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,a){var h="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),f=Qe("div",h,a||this._mapPane);return s&&(this._panes[s]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),a=this.unproject(s.getBottomLeft()),h=this.unproject(s.getTopRight());return new Ve(a,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,a,h){s=ze(s),h=re(h||[0,0]);var f=this.getZoom()||0,_=this.getMinZoom(),w=this.getMaxZoom(),O=s.getNorthWest(),H=s.getSouthEast(),K=this.getSize().subtract(h),ne=Re(this.project(H,f),this.project(O,f)).getSize(),fe=le.any3d?this.options.zoomSnap:1,Le=K.x/ne.x,Ze=K.y/ne.y,bn=a?Math.max(Le,Ze):Math.min(Le,Ze);return f=this.getScaleZoom(bn,f),fe&&(f=Math.round(f/(fe/100))*(fe/100),f=a?Math.ceil(f/fe)*fe:Math.floor(f/fe)*fe),Math.max(_,Math.min(w,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Y(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,a){var h=this._getTopLeftPoint(s,a);return new Ee(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,a){var h=this.options.crs;return a=a===void 0?this._zoom:a,h.scale(s)/h.scale(a)},getScaleZoom:function(s,a){var h=this.options.crs;a=a===void 0?this._zoom:a;var f=h.zoom(s*h.scale(a));return isNaN(f)?1/0:f},project:function(s,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(Se(s),a)},unproject:function(s,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(re(s),a)},layerPointToLatLng:function(s){var a=re(s).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(s){var a=this.project(Se(s))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(Se(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(ze(s))},distance:function(s,a){return this.options.crs.distance(Se(s),Se(a))},containerPointToLayerPoint:function(s){return re(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return re(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var a=this.containerPointToLayerPoint(re(s));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Se(s)))},mouseEventToContainerPoint:function(s){return jo(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var a=this._container=ul(s);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ke(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&le.any3d,je(s,"leaflet-container"+(le.touch?" leaflet-touch":"")+(le.retina?" leaflet-retina":"")+(le.ielt9?" leaflet-oldie":"")+(le.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=is(s,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Me(this._mapPane,new Y(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(je(s.markerPane,"leaflet-zoom-hide"),je(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,a,h){Me(this._mapPane,new Y(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var _=this._zoom!==a;this._moveStart(_,h)._move(s,a)._moveEnd(_),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(s,a){return s&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(s,a,h,f){a===void 0&&(a=this._zoom);var _=this._zoom!==a;return this._zoom=a,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),f?h&&h.pinch&&this.fire("zoom",h):((_||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return N(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){Me(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[d(this._container)]=this;var a=s?ut:ke;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),le.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){N(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,a){for(var h=[],f,_=a==="mouseout"||a==="mouseover",w=s.target||s.srcElement,O=!1;w;){if(f=this._targets[d(w)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){O=!0;break}if(f&&f.listens(a,!0)&&(_&&!wl(w,s)||(h.push(f),_))||w===this._container)break;w=w.parentNode}return!h.length&&!O&&!_&&this.listens(a,!0)&&(h=[this]),h},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var a=s.target||s.srcElement;if(!(!this._loaded||a._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(a))){var h=s.type;h==="mousedown"&&wi(a),this._fireDOMEvent(s,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,a,h){if(s.type==="click"){var f=i({},s);f.type="preclick",this._fireDOMEvent(f,f.type,h)}var _=this._findEventTargets(s,a);if(h){for(var w=[],O=0;O<h.length;O++)h[O].listens(a,!0)&&w.push(h[O]);_=w.concat(_)}if(_.length){a==="contextmenu"&&At(s);var H=_[0],K={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var ne=H.getLatLng&&(!H._radius||H._radius<=10);K.containerPoint=ne?this.latLngToContainerPoint(H.getLatLng()):this.mouseEventToContainerPoint(s),K.layerPoint=this.containerPointToLayerPoint(K.containerPoint),K.latlng=ne?H.getLatLng():this.layerPointToLatLng(K.layerPoint)}for(O=0;O<_.length;O++)if(_[O].fire(a,K,!0),K.originalEvent._stopped||_[O].options.bubblingMouseEvents===!1&&Z(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,a=this._handlers.length;s<a;s++)this._handlers[s].disable()},whenReady:function(s,a){return this._loaded?s.call(a||this,{target:this}):this.on("load",s,a),this},_getMapPanePos:function(){return fr(this._mapPane)||new Y(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,a){var h=s&&a!==void 0?this._getNewPixelOrigin(s,a):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,a){var h=this.getSize()._divideBy(2);return this.project(s,a)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,a,h){var f=this._getNewPixelOrigin(h,a);return this.project(s,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(s,a,h){var f=this._getNewPixelOrigin(h,a);return Re([this.project(s.getSouthWest(),a)._subtract(f),this.project(s.getNorthWest(),a)._subtract(f),this.project(s.getSouthEast(),a)._subtract(f),this.project(s.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,a,h){if(!h)return s;var f=this.project(s,a),_=this.getSize().divideBy(2),w=new Ee(f.subtract(_),f.add(_)),O=this._getBoundsOffset(w,h,a);return Math.abs(O.x)<=1&&Math.abs(O.y)<=1?s:this.unproject(f.add(O),a)},_limitOffset:function(s,a){if(!a)return s;var h=this.getPixelBounds(),f=new Ee(h.min.add(s),h.max.add(s));return s.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(s,a,h){var f=Re(this.project(a.getNorthEast(),h),this.project(a.getSouthWest(),h)),_=f.min.subtract(s.min),w=f.max.subtract(s.max),O=this._rebound(_.x,-w.x),H=this._rebound(_.y,-w.y);return new Y(O,H)},_rebound:function(s,a){return s+a>0?Math.round(s-a)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(a))},_limitZoom:function(s){var a=this.getMinZoom(),h=this.getMaxZoom(),f=le.any3d?this.options.zoomSnap:1;return f&&(s=Math.round(s/f)*f),Math.max(a,Math.min(h,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Tt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,a){var h=this._getCenterOffset(s)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,a),!0)},_createAnimProxy:function(){var s=this._proxy=Qe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(a){var h=to,f=this._proxy.style[h];Yr(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){dt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),a=this.getZoom();Yr(this._proxy,this.project(s,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,a,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),_=this._getCenterOffset(s)._divideBy(1-1/f);return h.animate!==!0&&!this.getSize().contains(_)?!1:(D(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(s,a,!0)},this),!0)},_animateZoom:function(s,a,h,f){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=a,je(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Tt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function qo(s,a){return new Ke(s,a)}var zn=Ie.extend({options:{position:"topright"},initialize:function(s){V(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var a=this._map;return a&&a.removeControl(this),this.options.position=s,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var a=this._container=this.onAdd(s),h=this.getPosition(),f=s._controlCorners[h];return je(a,"leaflet-control"),h.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(dt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Ln=function(s){return new zn(s)};Ke.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},a="leaflet-",h=this._controlContainer=Qe("div",a+"control-container",this._container);function f(_,w){var O=a+_+" "+a+w;s[_+w]=Qe("div",O,h)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)dt(this._controlCorners[s]);dt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Tl=zn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,a,h,f){return h<f?-1:f<h?1:0}},initialize:function(s,a,h){V(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in s)this._addLayer(s[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return zn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,a){return this._addLayer(s,a),this._map?this._update():this},addOverlay:function(s,a){return this._addLayer(s,a,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(s));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){je(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(je(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Tt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Tt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",a=this._container=Qe("div",s),h=this.options.collapsed;a.setAttribute("aria-haspopup",!0),ls(a),as(a);var f=this._section=Qe("section",s+"-list");h&&(this._map.on("click",this.collapse,this),ke(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=Qe("a",s+"-toggle",a);_.href="#",_.title="Layers",_.setAttribute("role","button"),ke(_,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){At(w),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=Qe("div",s+"-base",f),this._separator=Qe("div",s+"-separator",f),this._overlaysList=Qe("div",s+"-overlays",f),a.appendChild(f)},_getLayer:function(s){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===s)return this._layers[a]},_addLayer:function(s,a,h){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:a,overlay:h}),this.options.sortLayers&&this._layers.sort(l(function(f,_){return this.options.sortFunction(f.layer,_.layer,f.name,_.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ro(this._baseLayersList),ro(this._overlaysList),this._layerControlInputs=[];var s,a,h,f,_=0;for(h=0;h<this._layers.length;h++)f=this._layers[h],this._addItem(f),a=a||f.overlay,s=s||!f.overlay,_+=f.overlay?0:1;return this.options.hideSingleBase&&(s=s&&_>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=a&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var a=this._getLayer(d(s.target)),h=a.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;h&&this._map.fire(h,a)},_createRadioElement:function(s,a){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=h,f.firstChild},_addItem:function(s){var a=document.createElement("label"),h=this._map.hasLayer(s.layer),f;s.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=h):f=this._createRadioElement("leaflet-base-layers_"+d(this),h),this._layerControlInputs.push(f),f.layerId=d(s.layer),ke(f,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+s.name;var w=document.createElement("span");a.appendChild(w),w.appendChild(f),w.appendChild(_);var O=s.overlay?this._overlaysList:this._baseLayersList;return O.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,a,h,f=[],_=[];this._handlingClick=!0;for(var w=s.length-1;w>=0;w--)a=s[w],h=this._getLayer(a.layerId).layer,a.checked?f.push(h):a.checked||_.push(h);for(w=0;w<_.length;w++)this._map.hasLayer(_[w])&&this._map.removeLayer(_[w]);for(w=0;w<f.length;w++)this._map.hasLayer(f[w])||this._map.addLayer(f[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,a,h,f=this._map.getZoom(),_=s.length-1;_>=0;_--)a=s[_],h=this._getLayer(a.layerId).layer,a.disabled=h.options.minZoom!==void 0&&f<h.options.minZoom||h.options.maxZoom!==void 0&&f>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,ke(s,"click",At),this.expand();var a=this;setTimeout(function(){ut(s,"click",At),a._preventClick=!1})}}),af=function(s,a,h){return new Tl(s,a,h)},Ei=zn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var a="leaflet-control-zoom",h=Qe("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",h,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,a,h,f,_){var w=Qe("a",h,f);return w.innerHTML=s,w.href="#",w.title=a,w.setAttribute("role","button"),w.setAttribute("aria-label",a),ls(w),ke(w,"click",Jn),ke(w,"click",_,this),ke(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var s=this._map,a="leaflet-disabled";Tt(this._zoomInButton,a),Tt(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(je(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(je(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ke.mergeOptions({zoomControl:!0}),Ke.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ei,this.addControl(this.zoomControl))});var Tc=function(s){return new Ei(s)},Ho=zn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var a="leaflet-control-scale",h=Qe("div",a),f=this.options;return this._addScales(f,a+"-line",h),s.on(f.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),h},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,a,h){s.metric&&(this._mScale=Qe("div",a,h)),s.imperial&&(this._iScale=Qe("div",a,h))},_update:function(){var s=this._map,a=s.getSize().y/2,h=s.distance(s.containerPointToLatLng([0,a]),s.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(h)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var a=this._getRoundNum(s),h=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,h,a/s)},_updateImperial:function(s){var a=s*3.2808399,h,f,_;a>5280?(h=a/5280,f=this._getRoundNum(h),this._updateScale(this._iScale,f+" mi",f/h)):(_=this._getRoundNum(a),this._updateScale(this._iScale,_+" ft",_/a))},_updateScale:function(s,a,h){s.style.width=Math.round(this.options.maxWidth*h)+"px",s.innerHTML=a},_getRoundNum:function(s){var a=Math.pow(10,(Math.floor(s)+"").length-1),h=s/a;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,a*h}}),$o=function(s){return new Ho(s)},Ic='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',us=zn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(le.inlineSvg?Ic+" ":"")+"Leaflet</a>"},initialize:function(s){V(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Qe("div","leaflet-control-attribution"),ls(this._container);for(var a in s._layers)s._layers[a].getAttribution&&this.addAttribution(s._layers[a].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var a in this._attributions)this._attributions[a]&&s.push(a);var h=[];this.options.prefix&&h.push(this.options.prefix),s.length&&h.push(s.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});Ke.mergeOptions({attributionControl:!0}),Ke.addInitHook(function(){this.options.attributionControl&&new us().addTo(this)});var lf=function(s){return new us(s)};zn.Layers=Tl,zn.Zoom=Ei,zn.Scale=Ho,zn.Attribution=us,Ln.layers=af,Ln.zoom=Tc,Ln.scale=$o,Ln.attribution=lf;var er=Ie.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});er.addTo=function(s,a){return s.addHandler(a,this),this};var io={Events:We},Il=le.touch?"touchstart mousedown":"mousedown",Dr=Ae.extend({options:{clickTolerance:3},initialize:function(s,a,h,f){V(this,f),this._element=s,this._dragStartTarget=a||s,this._preventOutline=h},enable:function(){this._enabled||(ke(this._dragStartTarget,Il,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Dr._dragging===this&&this.finishDrag(!0),ut(this._dragStartTarget,Il,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!cl(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Dr._dragging===this&&this.finishDrag();return}if(!(Dr._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Dr._dragging=this,this._preventOutline&&wi(this._element),fl(),br(),!this._moving)){this.fire("down");var a=s.touches?s.touches[0]:s,h=gl(this._element);this._startPoint=new Y(a.clientX,a.clientY),this._startPos=fr(this._element),this._parentScale=Bo(h);var f=s.type==="mousedown";ke(document,f?"mousemove":"touchmove",this._onMove,this),ke(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var a=s.touches&&s.touches.length===1?s.touches[0]:s,h=new Y(a.clientX,a.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,At(s),this._moved||(this.fire("dragstart"),this._moved=!0,je(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),je(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),Me(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Tt(document.body,"leaflet-dragging"),this._lastTarget&&(Tt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ut(document,"mousemove touchmove",this._onMove,this),ut(document,"mouseup touchend touchcancel",this._onUp,this),pl(),Nr();var a=this._moved&&this._moving;this._moving=!1,Dr._dragging=!1,a&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Wo(s,a,h){var f,_=[1,4,2,8],w,O,H,K,ne,fe,Le,Ze;for(w=0,fe=s.length;w<fe;w++)s[w]._code=Xr(s[w],a);for(H=0;H<4;H++){for(Le=_[H],f=[],w=0,fe=s.length,O=fe-1;w<fe;O=w++)K=s[w],ne=s[O],K._code&Le?ne._code&Le||(Ze=tn(ne,K,Le,a,h),Ze._code=Xr(Ze,a),f.push(Ze)):(ne._code&Le&&(Ze=tn(ne,K,Le,a,h),Ze._code=Xr(Ze,a),f.push(Ze)),f.push(K));s=f}return s}function Zo(s,a){var h,f,_,w,O,H,K,ne,fe;if(!s||s.length===0)throw new Error("latlngs not passed");u(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Le=Se([0,0]),Ze=ze(s),bn=Ze.getNorthWest().distanceTo(Ze.getSouthWest())*Ze.getNorthEast().distanceTo(Ze.getNorthWest());bn<1700&&(Le=Ko(s));var nn=s.length,_r=[];for(h=0;h<nn;h++){var Bn=Se(s[h]);_r.push(a.project(Se([Bn.lat-Le.lat,Bn.lng-Le.lng])))}for(H=K=ne=0,h=0,f=nn-1;h<nn;f=h++)_=_r[h],w=_r[f],O=_.y*w.x-w.y*_.x,K+=(_.x+w.x)*O,ne+=(_.y+w.y)*O,H+=O*3;H===0?fe=_r[0]:fe=[K/H,ne/H];var ta=a.unproject(re(fe));return Se([ta.lat+Le.lat,ta.lng+Le.lng])}function Ko(s){for(var a=0,h=0,f=0,_=0;_<s.length;_++){var w=Se(s[_]);a+=w.lat,h+=w.lng,f++}return Se([a/f,h/f])}var Go={__proto__:null,clipPolygon:Wo,polygonCenter:Zo,centroid:Ko};function Sl(s,a){if(!a||!s.length)return s.slice();var h=a*a;return s=Pc(s,h),s=Sc(s,h),s}function Pl(s,a,h){return Math.sqrt(gr(s,a,h,!0))}function Ti(s,a,h){return gr(s,a,h)}function Sc(s,a){var h=s.length,f=typeof Uint8Array<"u"?Uint8Array:Array,_=new f(h);_[0]=_[h-1]=1,Qo(s,_,a,0,h-1);var w,O=[];for(w=0;w<h;w++)_[w]&&O.push(s[w]);return O}function Qo(s,a,h,f,_){var w=0,O,H,K;for(H=f+1;H<=_-1;H++)K=gr(s[H],s[f],s[_],!0),K>w&&(O=H,w=K);w>h&&(a[O]=1,Qo(s,a,h,f,O),Qo(s,a,h,O,_))}function Pc(s,a){for(var h=[s[0]],f=1,_=0,w=s.length;f<w;f++)Ac(s[f],s[_])>a&&(h.push(s[f]),_=f);return _<w-1&&h.push(s[w-1]),h}var Al;function so(s,a,h,f,_){var w=f?Al:Xr(s,h),O=Xr(a,h),H,K,ne;for(Al=O;;){if(!(w|O))return[s,a];if(w&O)return!1;H=w||O,K=tn(s,a,H,h,_),ne=Xr(K,h),H===w?(s=K,w=ne):(a=K,O=ne)}}function tn(s,a,h,f,_){var w=a.x-s.x,O=a.y-s.y,H=f.min,K=f.max,ne,fe;return h&8?(ne=s.x+w*(K.y-s.y)/O,fe=K.y):h&4?(ne=s.x+w*(H.y-s.y)/O,fe=H.y):h&2?(ne=K.x,fe=s.y+O*(K.x-s.x)/w):h&1&&(ne=H.x,fe=s.y+O*(H.x-s.x)/w),new Y(ne,fe,_)}function Xr(s,a){var h=0;return s.x<a.min.x?h|=1:s.x>a.max.x&&(h|=2),s.y<a.min.y?h|=4:s.y>a.max.y&&(h|=8),h}function Ac(s,a){var h=a.x-s.x,f=a.y-s.y;return h*h+f*f}function gr(s,a,h,f){var _=a.x,w=a.y,O=h.x-_,H=h.y-w,K=O*O+H*H,ne;return K>0&&(ne=((s.x-_)*O+(s.y-w)*H)/K,ne>1?(_=h.x,w=h.y):ne>0&&(_+=O*ne,w+=H*ne)),O=s.x-_,H=s.y-w,f?O*O+H*H:new Y(_,w)}function u(s){return!b(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function m(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),u(s)}function v(s,a){var h,f,_,w,O,H,K,ne;if(!s||s.length===0)throw new Error("latlngs not passed");u(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var fe=Se([0,0]),Le=ze(s),Ze=Le.getNorthWest().distanceTo(Le.getSouthWest())*Le.getNorthEast().distanceTo(Le.getNorthWest());Ze<1700&&(fe=Ko(s));var bn=s.length,nn=[];for(h=0;h<bn;h++){var _r=Se(s[h]);nn.push(a.project(Se([_r.lat-fe.lat,_r.lng-fe.lng])))}for(h=0,f=0;h<bn-1;h++)f+=nn[h].distanceTo(nn[h+1])/2;if(f===0)ne=nn[0];else for(h=0,w=0;h<bn-1;h++)if(O=nn[h],H=nn[h+1],_=O.distanceTo(H),w+=_,w>f){K=(w-f)/_,ne=[H.x-K*(H.x-O.x),H.y-K*(H.y-O.y)];break}var Bn=a.unproject(re(ne));return Se([Bn.lat+fe.lat,Bn.lng+fe.lng])}var I={__proto__:null,simplify:Sl,pointToSegmentDistance:Pl,closestPointOnSegment:Ti,clipSegment:so,_getEdgeIntersection:tn,_getBitCode:Xr,_sqClosestPointOnSegment:gr,isFlat:u,_flat:m,polylineCenter:v},q={project:function(s){return new Y(s.lng,s.lat)},unproject:function(s){return new be(s.y,s.x)},bounds:new Ee([-180,-90],[180,90])},G={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Ee([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var a=Math.PI/180,h=this.R,f=s.lat*a,_=this.R_MINOR/h,w=Math.sqrt(1-_*_),O=w*Math.sin(f),H=Math.tan(Math.PI/4-f/2)/Math.pow((1-O)/(1+O),w/2);return f=-h*Math.log(Math.max(H,1e-10)),new Y(s.lng*a*h,f)},unproject:function(s){for(var a=180/Math.PI,h=this.R,f=this.R_MINOR/h,_=Math.sqrt(1-f*f),w=Math.exp(-s.y/h),O=Math.PI/2-2*Math.atan(w),H=0,K=.1,ne;H<15&&Math.abs(K)>1e-7;H++)ne=_*Math.sin(O),ne=Math.pow((1-ne)/(1+ne),_/2),K=Math.PI/2-2*Math.atan(w*ne)-O,O+=K;return new be(O*a,s.x*a/h)}},ce={__proto__:null,LonLat:q,Mercator:G,SphericalMercator:lr},at=i({},vn,{code:"EPSG:3395",projection:G,transformation:function(){var s=.5/(Math.PI*G.R);return an(s,.5,-s,.5)}()}),Bt=i({},vn,{code:"EPSG:4326",projection:q,transformation:an(1/180,1,-1/180,.5)}),tt=i({},pt,{projection:q,transformation:an(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,a){var h=a.lng-s.lng,f=a.lat-s.lat;return Math.sqrt(h*h+f*f)},infinite:!0});pt.Earth=vn,pt.EPSG3395=at,pt.EPSG3857=Gn,pt.EPSG900913=Zr,pt.EPSG4326=Bt,pt.Simple=tt;var ct=Ae.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[d(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[d(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var a=s.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var h=this.getEvents();a.on(h,this),this.once("remove",function(){a.off(h,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Ke.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(s);return this._layers[a]?this:(this._layers[a]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var a=d(s);return this._layers[a]?(this._loaded&&s.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return d(s)in this._layers},eachLayer:function(s,a){for(var h in this._layers)s.call(a,this._layers[h]);return this},_addLayers:function(s){s=s?b(s)?s:[s]:[];for(var a=0,h=s.length;a<h;a++)this.addLayer(s[a])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[d(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var a=d(s);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,a=-1/0,h=this._getZoomSpan();for(var f in this._zoomBoundLayers){var _=this._zoomBoundLayers[f].options;s=_.minZoom===void 0?s:Math.min(s,_.minZoom),a=_.maxZoom===void 0?a:Math.max(a,_.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=s===1/0?void 0:s,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var xt=ct.extend({initialize:function(s,a){V(this,a),this._layers={};var h,f;if(s)for(h=0,f=s.length;h<f;h++)this.addLayer(s[h])},addLayer:function(s){var a=this.getLayerId(s);return this._layers[a]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var a=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(s){var a=typeof s=="number"?s:this.getLayerId(s);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var a=Array.prototype.slice.call(arguments,1),h,f;for(h in this._layers)f=this._layers[h],f[s]&&f[s].apply(f,a);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,a){for(var h in this._layers)s.call(a,this._layers[h]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return d(s)}}),cs=function(s,a){return new xt(s,a)},Ot=xt.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),xt.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),xt.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Ve;for(var a in this._layers){var h=this._layers[a];s.extend(h.getBounds?h.getBounds():h.getLatLng())}return s}}),Yo=function(s,a){return new Ot(s,a)},Jr=Ie.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){V(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,a){var h=this._getIconUrl(s);if(!h){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(h,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(s,a){var h=this.options,f=h[a+"Size"];typeof f=="number"&&(f=[f,f]);var _=re(f),w=re(a==="shadow"&&h.shadowAnchor||h.iconAnchor||_&&_.divideBy(2,!0));s.className="leaflet-marker-"+a+" "+(h.className||""),w&&(s.style.marginLeft=-w.x+"px",s.style.marginTop=-w.y+"px"),_&&(s.style.width=_.x+"px",s.style.height=_.y+"px")},_createImg:function(s,a){return a=a||document.createElement("img"),a.src=s,a},_getIconUrl:function(s){return le.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function VI(s){return new Jr(s)}var xl=Jr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof xl.imagePath!="string"&&(xl.imagePath=this._detectIconPath()),(this.options.imagePath||xl.imagePath)+Jr.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var a=function(h,f,_){var w=f.exec(h);return w&&w[_]};return s=a(s,/^url\((['"])?(.+)\1\)$/,2),s&&a(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Qe("div","leaflet-default-icon-path",document.body),a=is(s,"background-image")||is(s,"backgroundImage");if(document.body.removeChild(s),a=this._stripUrl(a),a)return a;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),V_=er.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Dr(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),je(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Tt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var a=this._marker,h=a._map,f=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,w=fr(a._icon),O=h.getPixelBounds(),H=h.getPixelOrigin(),K=Re(O.min._subtract(H).add(_),O.max._subtract(H).subtract(_));if(!K.contains(w)){var ne=re((Math.max(K.max.x,w.x)-K.max.x)/(O.max.x-K.max.x)-(Math.min(K.min.x,w.x)-K.min.x)/(O.min.x-K.min.x),(Math.max(K.max.y,w.y)-K.max.y)/(O.max.y-K.max.y)-(Math.min(K.min.y,w.y)-K.min.y)/(O.min.y-K.min.y)).multiplyBy(f);h.panBy(ne,{animate:!1}),this._draggable._newPos._add(ne),this._draggable._startPos._add(ne),Me(a._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=D(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(N(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,s)))},_onDrag:function(s){var a=this._marker,h=a._shadow,f=fr(a._icon),_=a._map.layerPointToLatLng(f);h&&Me(h,f),a._latlng=_,s.latlng=_,s.oldLatLng=this._oldLatLng,a.fire("move",s).fire("drag",s)},_onDragEnd:function(s){N(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),xc=ct.extend({options:{icon:new xl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,a){V(this,a),this._latlng=Se(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var a=this._latlng;return this._latlng=Se(s),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=s.icon.createIcon(this._icon),f=!1;h!==this._icon&&(this._icon&&this._removeIcon(),f=!0,s.title&&(h.title=s.title),h.tagName==="IMG"&&(h.alt=s.alt||"")),je(h,a),s.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ke(h,"focus",this._panOnFocus,this);var _=s.icon.createShadow(this._shadow),w=!1;_!==this._shadow&&(this._removeShadow(),w=!0),_&&(je(_,a),_.alt=""),this._shadow=_,s.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&w&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ut(this._icon,"focus",this._panOnFocus,this),dt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&dt(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&Me(this._icon,s),this._shadow&&Me(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(je(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),V_)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new V_(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&bt(this._icon,s),this._shadow&&bt(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var a=this.options.icon.options,h=a.iconSize?re(a.iconSize):re(0,0),f=a.iconAnchor?re(a.iconAnchor):re(0,0);s.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:h.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function FI(s,a){return new xc(s,a)}var hs=ct.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return V(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Cc=hs.extend({options:{fill:!0,radius:10},initialize:function(s,a){V(this,a),this._latlng=Se(s),this._radius=this.options.radius},setLatLng:function(s){var a=this._latlng;return this._latlng=Se(s),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var a=s&&s.radius||this._radius;return hs.prototype.setStyle.call(this,s),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,a=this._radiusY||s,h=this._clickTolerance(),f=[s+h,a+h];this._pxBounds=new Ee(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function UI(s,a){return new Cc(s,a)}var uf=Cc.extend({initialize:function(s,a,h){if(typeof a=="number"&&(a=i({},h,{radius:a})),V(this,a),this._latlng=Se(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Ve(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:hs.prototype.setStyle,_project:function(){var s=this._latlng.lng,a=this._latlng.lat,h=this._map,f=h.options.crs;if(f.distance===vn.distance){var _=Math.PI/180,w=this._mRadius/vn.R/_,O=h.project([a+w,s]),H=h.project([a-w,s]),K=O.add(H).divideBy(2),ne=h.unproject(K).lat,fe=Math.acos((Math.cos(w*_)-Math.sin(a*_)*Math.sin(ne*_))/(Math.cos(a*_)*Math.cos(ne*_)))/_;(isNaN(fe)||fe===0)&&(fe=w/Math.cos(Math.PI/180*a)),this._point=K.subtract(h.getPixelOrigin()),this._radius=isNaN(fe)?0:K.x-h.project([ne,s-fe]).x,this._radiusY=K.y-O.y}else{var Le=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(Le).x}this._updateBounds()}});function zI(s,a,h){return new uf(s,a,h)}var Ii=hs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,a){V(this,a),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var a=1/0,h=null,f=gr,_,w,O=0,H=this._parts.length;O<H;O++)for(var K=this._parts[O],ne=1,fe=K.length;ne<fe;ne++){_=K[ne-1],w=K[ne];var Le=f(s,_,w,!0);Le<a&&(a=Le,h=f(s,_,w))}return h&&(h.distance=Math.sqrt(a)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return v(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,a){return a=a||this._defaultShape(),s=Se(s),a.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Ve,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return u(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var a=[],h=u(s),f=0,_=s.length;f<_;f++)h?(a[f]=Se(s[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(s[f]);return a},_project:function(){var s=new Ee;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),a=new Y(s,s);this._rawPxBounds&&(this._pxBounds=new Ee([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(s,a,h){var f=s[0]instanceof be,_=s.length,w,O;if(f){for(O=[],w=0;w<_;w++)O[w]=this._map.latLngToLayerPoint(s[w]),h.extend(O[w]);a.push(O)}else for(w=0;w<_;w++)this._projectLatlngs(s[w],a,h)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,h,f,_,w,O,H,K;for(h=0,_=0,w=this._rings.length;h<w;h++)for(K=this._rings[h],f=0,O=K.length;f<O-1;f++)H=so(K[f],K[f+1],s,f,!0),H&&(a[_]=a[_]||[],a[_].push(H[0]),(H[1]!==K[f+1]||f===O-2)&&(a[_].push(H[1]),_++))}},_simplifyPoints:function(){for(var s=this._parts,a=this.options.smoothFactor,h=0,f=s.length;h<f;h++)s[h]=Sl(s[h],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,a){var h,f,_,w,O,H,K=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(h=0,w=this._parts.length;h<w;h++)for(H=this._parts[h],f=0,O=H.length,_=O-1;f<O;_=f++)if(!(!a&&f===0)&&Pl(s,H[_],H[f])<=K)return!0;return!1}});function BI(s,a){return new Ii(s,a)}Ii._flat=m;var Xo=Ii.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Zo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var a=Ii.prototype._convertLatLngs.call(this,s),h=a.length;return h>=2&&a[0]instanceof be&&a[0].equals(a[h-1])&&a.pop(),a},_setLatLngs:function(s){Ii.prototype._setLatLngs.call(this,s),u(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return u(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,a=this.options.weight,h=new Y(a,a);if(s=new Ee(s.min.subtract(h),s.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,_=this._rings.length,w;f<_;f++)w=Wo(this._rings[f],s,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var a=!1,h,f,_,w,O,H,K,ne;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(w=0,K=this._parts.length;w<K;w++)for(h=this._parts[w],O=0,ne=h.length,H=ne-1;O<ne;H=O++)f=h[O],_=h[H],f.y>s.y!=_.y>s.y&&s.x<(_.x-f.x)*(s.y-f.y)/(_.y-f.y)+f.x&&(a=!a);return a||Ii.prototype._containsPoint.call(this,s,!0)}});function jI(s,a){return new Xo(s,a)}var Si=Ot.extend({initialize:function(s,a){V(this,a),this._layers={},s&&this.addData(s)},addData:function(s){var a=b(s)?s:s.features,h,f,_;if(a){for(h=0,f=a.length;h<f;h++)_=a[h],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var w=this.options;if(w.filter&&!w.filter(s))return this;var O=Rc(s,w);return O?(O.feature=bc(s),O.defaultOptions=O.options,this.resetStyle(O),w.onEachFeature&&w.onEachFeature(s,O),this.addLayer(O)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=i({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(a){this._setLayerStyle(a,s)},this)},_setLayerStyle:function(s,a){s.setStyle&&(typeof a=="function"&&(a=a(s.feature)),s.setStyle(a))}});function Rc(s,a){var h=s.type==="Feature"?s.geometry:s,f=h?h.coordinates:null,_=[],w=a&&a.pointToLayer,O=a&&a.coordsToLatLng||cf,H,K,ne,fe;if(!f&&!h)return null;switch(h.type){case"Point":return H=O(f),F_(w,s,H,a);case"MultiPoint":for(ne=0,fe=f.length;ne<fe;ne++)H=O(f[ne]),_.push(F_(w,s,H,a));return new Ot(_);case"LineString":case"MultiLineString":return K=kc(f,h.type==="LineString"?0:1,O),new Ii(K,a);case"Polygon":case"MultiPolygon":return K=kc(f,h.type==="Polygon"?1:2,O),new Xo(K,a);case"GeometryCollection":for(ne=0,fe=h.geometries.length;ne<fe;ne++){var Le=Rc({geometry:h.geometries[ne],type:"Feature",properties:s.properties},a);Le&&_.push(Le)}return new Ot(_);case"FeatureCollection":for(ne=0,fe=h.features.length;ne<fe;ne++){var Ze=Rc(h.features[ne],a);Ze&&_.push(Ze)}return new Ot(_);default:throw new Error("Invalid GeoJSON object.")}}function F_(s,a,h,f){return s?s(a,h):new xc(h,f&&f.markersInheritOptions&&f)}function cf(s){return new be(s[1],s[0],s[2])}function kc(s,a,h){for(var f=[],_=0,w=s.length,O;_<w;_++)O=a?kc(s[_],a-1,h):(h||cf)(s[_]),f.push(O);return f}function hf(s,a){return s=Se(s),s.alt!==void 0?[E(s.lng,a),E(s.lat,a),E(s.alt,a)]:[E(s.lng,a),E(s.lat,a)]}function Lc(s,a,h,f){for(var _=[],w=0,O=s.length;w<O;w++)_.push(a?Lc(s[w],u(s[w])?0:a-1,h,f):hf(s[w],f));return!a&&h&&_.length>0&&_.push(_[0].slice()),_}function Jo(s,a){return s.feature?i({},s.feature,{geometry:a}):bc(a)}function bc(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var df={toGeoJSON:function(s){return Jo(this,{type:"Point",coordinates:hf(this.getLatLng(),s)})}};xc.include(df),uf.include(df),Cc.include(df),Ii.include({toGeoJSON:function(s){var a=!u(this._latlngs),h=Lc(this._latlngs,a?1:0,!1,s);return Jo(this,{type:(a?"Multi":"")+"LineString",coordinates:h})}}),Xo.include({toGeoJSON:function(s){var a=!u(this._latlngs),h=a&&!u(this._latlngs[0]),f=Lc(this._latlngs,h?2:a?1:0,!0,s);return a||(f=[f]),Jo(this,{type:(h?"Multi":"")+"Polygon",coordinates:f})}}),xt.include({toMultiPoint:function(s){var a=[];return this.eachLayer(function(h){a.push(h.toGeoJSON(s).geometry.coordinates)}),Jo(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(s){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(s);var h=a==="GeometryCollection",f=[];return this.eachLayer(function(_){if(_.toGeoJSON){var w=_.toGeoJSON(s);if(h)f.push(w.geometry);else{var O=bc(w);O.type==="FeatureCollection"?f.push.apply(f,O.features):f.push(O)}}}),h?Jo(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function U_(s,a){return new Si(s,a)}var qI=U_,Nc=ct.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,a,h){this._url=s,this._bounds=ze(a),V(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(je(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){dt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&vi(this._image),this},bringToBack:function(){return this._map&&ss(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=ze(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",a=this._image=s?this._url:Qe("img");if(je(a,"leaflet-image-layer"),this._zoomAnimated&&je(a,"leaflet-zoom-animated"),this.options.className&&je(a,this.options.className),a.onselectstart=y,a.onmousemove=y,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(s){var a=this._map.getZoomScale(s.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Yr(this._image,h,a)},_reset:function(){var s=this._image,a=new Ee(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=a.getSize();Me(s,a.min),s.style.width=h.x+"px",s.style.height=h.y+"px"},_updateOpacity:function(){bt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),HI=function(s,a,h){return new Nc(s,a,h)},z_=Nc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",a=this._image=s?this._url:Qe("video");if(je(a,"leaflet-image-layer"),this._zoomAnimated&&je(a,"leaflet-zoom-animated"),this.options.className&&je(a,this.options.className),a.onselectstart=y,a.onmousemove=y,a.onloadeddata=l(this.fire,this,"load"),s){for(var h=a.getElementsByTagName("source"),f=[],_=0;_<h.length;_++)f.push(h[_].src);this._url=h.length>0?f:[a.src];return}b(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var O=Qe("source");O.src=this._url[w],a.appendChild(O)}}});function $I(s,a,h){return new z_(s,a,h)}var B_=Nc.extend({_initImage:function(){var s=this._image=this._url;je(s,"leaflet-image-layer"),this._zoomAnimated&&je(s,"leaflet-zoom-animated"),this.options.className&&je(s,this.options.className),s.onselectstart=y,s.onmousemove=y}});function WI(s,a,h){return new B_(s,a,h)}var ei=ct.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,a){s&&(s instanceof be||b(s))?(this._latlng=Se(s),V(this,a)):(V(this,s),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&bt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&bt(this._container,1),this.bringToFront(),this.options.interactive&&(je(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(bt(this._container,0),this._removeTimeout=setTimeout(l(dt,void 0,this._container),200)):dt(this._container),this.options.interactive&&(Tt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=Se(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&vi(this._container),this},bringToBack:function(){return this._map&&ss(this._container),this},_prepareOpen:function(s){var a=this._source;if(!a._map)return!1;if(a instanceof Ot){a=null;var h=this._source._layers;for(var f in h)if(h[f]._map){a=h[f];break}if(!a)return!1;this._source=a}if(!s)if(a.getCenter)s=a.getCenter();else if(a.getLatLng)s=a.getLatLng();else if(a.getBounds)s=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")s.innerHTML=a;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),a=re(this.options.offset),h=this._getAnchor();this._zoomAnimated?Me(this._container,s.add(h)):a=a.add(s).add(h);var f=this._containerBottom=-a.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});Ke.include({_initOverlay:function(s,a,h,f){var _=a;return _ instanceof s||(_=new s(f).setContent(a)),h&&_.setLatLng(h),_}}),ct.include({_initOverlay:function(s,a,h,f){var _=h;return _ instanceof s?(V(_,f),_._source=this):(_=a&&!f?a:new s(f,this),_.setContent(h)),_}});var Dc=ei.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,ei.prototype.openOn.call(this,s)},onAdd:function(s){ei.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof hs||this._source.on("preclick",Xn))},onRemove:function(s){ei.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof hs||this._source.off("preclick",Xn))},getEvents:function(){var s=ei.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",a=this._container=Qe("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=Qe("div",s+"-content-wrapper",a);if(this._contentNode=Qe("div",s+"-content",h),ls(a),as(this._contentNode),ke(a,"contextmenu",Xn),this._tipContainer=Qe("div",s+"-tip-container",a),this._tip=Qe("div",s+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Qe("a",s+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',ke(f,"click",function(_){At(_),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,a=s.style;a.width="",a.whiteSpace="nowrap";var h=s.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),a.width=h+1+"px",a.whiteSpace="",a.height="";var f=s.offsetHeight,_=this.options.maxHeight,w="leaflet-popup-scrolled";_&&f>_?(a.height=_+"px",je(s,w)):Tt(s,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),h=this._getAnchor();Me(this._container,a.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,a=parseInt(is(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+a,f=this._containerWidth,_=new Y(this._containerLeft,-h-this._containerBottom);_._add(fr(this._container));var w=s.layerPointToContainerPoint(_),O=re(this.options.autoPanPadding),H=re(this.options.autoPanPaddingTopLeft||O),K=re(this.options.autoPanPaddingBottomRight||O),ne=s.getSize(),fe=0,Le=0;w.x+f+K.x>ne.x&&(fe=w.x+f-ne.x+K.x),w.x-fe-H.x<0&&(fe=w.x-H.x),w.y+h+K.y>ne.y&&(Le=w.y+h-ne.y+K.y),w.y-Le-H.y<0&&(Le=w.y-H.y),(fe||Le)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([fe,Le]))}},_getAnchor:function(){return re(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ZI=function(s,a){return new Dc(s,a)};Ke.mergeOptions({closePopupOnClick:!0}),Ke.include({openPopup:function(s,a,h){return this._initOverlay(Dc,s,a,h).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),ct.include({bindPopup:function(s,a){return this._popup=this._initOverlay(Dc,this._popup,s,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Ot||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){Jn(s);var a=s.layer||s.target;if(this._popup._source===a&&!(a instanceof hs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=a,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Mc=ei.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){ei.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){ei.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=ei.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",a=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Qe("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var a,h,f=this._map,_=this._container,w=f.latLngToContainerPoint(f.getCenter()),O=f.layerPointToContainerPoint(s),H=this.options.direction,K=_.offsetWidth,ne=_.offsetHeight,fe=re(this.options.offset),Le=this._getAnchor();H==="top"?(a=K/2,h=ne):H==="bottom"?(a=K/2,h=0):H==="center"?(a=K/2,h=ne/2):H==="right"?(a=0,h=ne/2):H==="left"?(a=K,h=ne/2):O.x<w.x?(H="right",a=0,h=ne/2):(H="left",a=K+(fe.x+Le.x)*2,h=ne/2),s=s.subtract(re(a,h,!0)).add(fe).add(Le),Tt(_,"leaflet-tooltip-right"),Tt(_,"leaflet-tooltip-left"),Tt(_,"leaflet-tooltip-top"),Tt(_,"leaflet-tooltip-bottom"),je(_,"leaflet-tooltip-"+H),Me(_,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&bt(this._container,s)},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(a)},_getAnchor:function(){return re(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),KI=function(s,a){return new Mc(s,a)};Ke.include({openTooltip:function(s,a,h){return this._initOverlay(Mc,s,a,h).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),ct.include({bindTooltip:function(s,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Mc,this._tooltip,s,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var a=s?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[a](h),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Ot||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var a=typeof s.getElement=="function"&&s.getElement();a&&(ke(a,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),ke(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var a=typeof s.getElement=="function"&&s.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var a=s.latlng,h,f;this._tooltip.options.sticky&&s.originalEvent&&(h=this._map.mouseEventToContainerPoint(s.originalEvent),f=this._map.containerPointToLayerPoint(h),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var j_=Jr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var a=s&&s.tagName==="DIV"?s:document.createElement("div"),h=this.options;if(h.html instanceof Element?(ro(a),a.appendChild(h.html)):a.innerHTML=h.html!==!1?h.html:"",h.bgPos){var f=re(h.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function GI(s){return new j_(s)}Jr.Default=xl;var Cl=ct.extend({options:{tileSize:256,opacity:1,updateWhenIdle:le.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){V(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),dt(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(vi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ss(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Y?s:new Y(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var a=this.getPane().children,h=-s(-1/0,1/0),f=0,_=a.length,w;f<_;f++)w=a[f].style.zIndex,a[f]!==this._container&&w&&(h=s(h,+w));isFinite(h)&&(this.options.zIndex=h+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!le.ielt9){bt(this._container,this.options.opacity);var s=+new Date,a=!1,h=!1;for(var f in this._tiles){var _=this._tiles[f];if(!(!_.current||!_.loaded)){var w=Math.min(1,(s-_.loaded)/200);bt(_.el,w),w<1?a=!0:(_.active?h=!0:this._onOpaqueTile(_),_.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),a&&(N(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=Qe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,a=this.options.maxZoom;if(s!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===s?(this._levels[h].el.style.zIndex=a-Math.abs(s-h),this._onUpdateLevel(h)):(dt(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var f=this._levels[s],_=this._map;return f||(f=this._levels[s]={},f.el=Qe("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=_.project(_.unproject(_.getPixelOrigin()),s).round(),f.zoom=s,this._setZoomTransform(f,_.getCenter(),_.getZoom()),y(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var s,a,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)a=this._tiles[s],a.retain=a.current;for(s in this._tiles)if(a=this._tiles[s],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var a in this._tiles)this._tiles[a].coords.z===s&&this._removeTile(a)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)dt(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,a,h,f){var _=Math.floor(s/2),w=Math.floor(a/2),O=h-1,H=new Y(+_,+w);H.z=+O;var K=this._tileCoordsToKey(H),ne=this._tiles[K];return ne&&ne.active?(ne.retain=!0,!0):(ne&&ne.loaded&&(ne.retain=!0),O>f?this._retainParent(_,w,O,f):!1)},_retainChildren:function(s,a,h,f){for(var _=2*s;_<2*s+2;_++)for(var w=2*a;w<2*a+2;w++){var O=new Y(_,w);O.z=h+1;var H=this._tileCoordsToKey(O),K=this._tiles[H];if(K&&K.active){K.retain=!0;continue}else K&&K.loaded&&(K.retain=!0);h+1<f&&this._retainChildren(_,w,h+1,f)}},_resetView:function(s){var a=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var a=this.options;return a.minNativeZoom!==void 0&&s<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<s?a.maxNativeZoom:s},_setView:function(s,a,h,f){var _=Math.round(a);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var w=this.options.updateWhenZooming&&_!==this._tileZoom;(!f||w)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(s),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(s,a)},_setZoomTransforms:function(s,a){for(var h in this._levels)this._setZoomTransform(this._levels[h],s,a)},_setZoomTransform:function(s,a,h){var f=this._map.getZoomScale(h,s.zoom),_=s.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,h)).round();le.any3d?Yr(s.el,_,f):Me(s.el,_)},_resetGrid:function(){var s=this._map,a=s.options.crs,h=this._tileSize=this.getTileSize(),f=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,a.wrapLng[0]],f).x/h.x),Math.ceil(s.project([0,a.wrapLng[1]],f).x/h.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([a.wrapLat[0],0],f).y/h.x),Math.ceil(s.project([a.wrapLat[1],0],f).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var a=this._map,h=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(h,this._tileZoom),_=a.project(s,this._tileZoom).floor(),w=a.getSize().divideBy(f*2);return new Ee(_.subtract(w),_.add(w))},_update:function(s){var a=this._map;if(a){var h=this._clampZoom(a.getZoom());if(s===void 0&&(s=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(s),_=this._pxBoundsToTileRange(f),w=_.getCenter(),O=[],H=this.options.keepBuffer,K=new Ee(_.getBottomLeft().subtract([H,-H]),_.getTopRight().add([H,-H]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ne in this._tiles){var fe=this._tiles[ne].coords;(fe.z!==this._tileZoom||!K.contains(new Y(fe.x,fe.y)))&&(this._tiles[ne].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(s,h);return}for(var Le=_.min.y;Le<=_.max.y;Le++)for(var Ze=_.min.x;Ze<=_.max.x;Ze++){var bn=new Y(Ze,Le);if(bn.z=this._tileZoom,!!this._isValidTile(bn)){var nn=this._tiles[this._tileCoordsToKey(bn)];nn?nn.current=!0:O.push(bn)}}if(O.sort(function(Bn,ta){return Bn.distanceTo(w)-ta.distanceTo(w)}),O.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var _r=document.createDocumentFragment();for(Ze=0;Ze<O.length;Ze++)this._addTile(O[Ze],_r);this._level.el.appendChild(_r)}}}},_isValidTile:function(s){var a=this._map.options.crs;if(!a.infinite){var h=this._globalTileRange;if(!a.wrapLng&&(s.x<h.min.x||s.x>h.max.x)||!a.wrapLat&&(s.y<h.min.y||s.y>h.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(s);return ze(this.options.bounds).overlaps(f)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var a=this._map,h=this.getTileSize(),f=s.scaleBy(h),_=f.add(h),w=a.unproject(f,s.z),O=a.unproject(_,s.z);return[w,O]},_tileCoordsToBounds:function(s){var a=this._tileCoordsToNwSe(s),h=new Ve(a[0],a[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var a=s.split(":"),h=new Y(+a[0],+a[1]);return h.z=+a[2],h},_removeTile:function(s){var a=this._tiles[s];a&&(dt(a.el),delete this._tiles[s],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){je(s,"leaflet-tile");var a=this.getTileSize();s.style.width=a.x+"px",s.style.height=a.y+"px",s.onselectstart=y,s.onmousemove=y,le.ielt9&&this.options.opacity<1&&bt(s,this.options.opacity)},_addTile:function(s,a){var h=this._getTilePos(s),f=this._tileCoordsToKey(s),_=this.createTile(this._wrapCoords(s),l(this._tileReady,this,s));this._initTile(_),this.createTile.length<2&&D(l(this._tileReady,this,s,null,_)),Me(_,h),this._tiles[f]={el:_,coords:s,current:!0},a.appendChild(_),this.fire("tileloadstart",{tile:_,coords:s})},_tileReady:function(s,a,h){a&&this.fire("tileerror",{error:a,tile:h,coords:s});var f=this._tileCoordsToKey(s);h=this._tiles[f],h&&(h.loaded=+new Date,this._map._fadeAnimated?(bt(h.el,0),N(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),a||(je(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),le.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var a=new Y(this._wrapX?g(s.x,this._wrapX):s.x,this._wrapY?g(s.y,this._wrapY):s.y);return a.z=s.z,a},_pxBoundsToTileRange:function(s){var a=this.getTileSize();return new Ee(s.min.unscaleBy(a).floor(),s.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function QI(s){return new Cl(s)}var ea=Cl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,a){this._url=s,a=V(this,a),a.detectRetina&&le.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,a){return this._url===s&&a===void 0&&(a=!0),this._url=s,a||this.redraw(),this},createTile:function(s,a){var h=document.createElement("img");return ke(h,"load",l(this._tileOnLoad,this,a,h)),ke(h,"error",l(this._tileOnError,this,a,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(s),h},getTileUrl:function(s){var a={r:le.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-s.y;this.options.tms&&(a.y=h),a["-y"]=h}return S(this._url,i(a,this.options))},_tileOnLoad:function(s,a){le.ielt9?setTimeout(l(s,this,null,a),0):s(null,a)},_tileOnError:function(s,a,h){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),s(h,a)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,a=this.options.maxZoom,h=this.options.zoomReverse,f=this.options.zoomOffset;return h&&(s=a-s),s+f},_getSubdomain:function(s){var a=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var s,a;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(a=this._tiles[s].el,a.onload=y,a.onerror=y,!a.complete)){a.src=J;var h=this._tiles[s].coords;dt(a),delete this._tiles[s],this.fire("tileabort",{tile:a,coords:h})}},_removeTile:function(s){var a=this._tiles[s];if(a)return a.el.setAttribute("src",J),Cl.prototype._removeTile.call(this,s)},_tileReady:function(s,a,h){if(!(!this._map||h&&h.getAttribute("src")===J))return Cl.prototype._tileReady.call(this,s,a,h)}});function q_(s,a){return new ea(s,a)}var H_=ea.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,a){this._url=s;var h=i({},this.defaultWmsParams);for(var f in a)f in this.options||(h[f]=a[f]);a=V(this,a);var _=a.detectRetina&&le.retina?2:1,w=this.getTileSize();h.width=w.x*_,h.height=w.y*_,this.wmsParams=h},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,ea.prototype.onAdd.call(this,s)},getTileUrl:function(s){var a=this._tileCoordsToNwSe(s),h=this._crs,f=Re(h.project(a[0]),h.project(a[1])),_=f.min,w=f.max,O=(this._wmsVersion>=1.3&&this._crs===Bt?[_.y,_.x,w.y,w.x]:[_.x,_.y,w.x,w.y]).join(","),H=ea.prototype.getTileUrl.call(this,s);return H+B(this.wmsParams,H,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+O},setParams:function(s,a){return i(this.wmsParams,s),a||this.redraw(),this}});function YI(s,a){return new H_(s,a)}ea.WMS=H_,q_.wms=YI;var Pi=ct.extend({options:{padding:.1},initialize:function(s){V(this,s),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),je(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,a){var h=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,a),w=f.multiplyBy(-h).add(_).subtract(this._map._getNewPixelOrigin(s,a));le.any3d?Yr(this._container,w,h):Me(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,a=this._map.getSize(),h=this._map.containerPointToLayerPoint(a.multiplyBy(-s)).round();this._bounds=new Ee(h,h.add(a.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),$_=Pi.extend({options:{tolerance:0},getEvents:function(){var s=Pi.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Pi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");ke(s,"mousemove",this._onMouseMove,this),ke(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ke(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){N(this._redrawRequest),delete this._ctx,dt(this._container),ut(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var a in this._layers)s=this._layers[a],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Pi.prototype._update.call(this);var s=this._bounds,a=this._container,h=s.getSize(),f=le.retina?2:1;Me(a,s.min),a.width=f*h.x,a.height=f*h.y,a.style.width=h.x+"px",a.style.height=h.y+"px",le.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Pi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[d(s)]=s;var a=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var a=s._order,h=a.next,f=a.prev;h?h.prev=f:this._drawLast=f,f?f.next=h:this._drawFirst=h,delete s._order,delete this._layers[d(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var a=s.options.dashArray.split(/[, ]+/),h=[],f,_;for(_=0;_<a.length;_++){if(f=Number(a[_]),isNaN(f))return;h.push(f)}s.options._dashArray=h}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var a=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ee,this._redrawBounds.extend(s._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(s._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var a=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,a=this._redrawBounds;if(this._ctx.save(),a){var h=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)s=f.layer,(!a||s._pxBounds&&s._pxBounds.intersects(a))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,a){if(this._drawing){var h,f,_,w,O=s._parts,H=O.length,K=this._ctx;if(H){for(K.beginPath(),h=0;h<H;h++){for(f=0,_=O[h].length;f<_;f++)w=O[h][f],K[f?"lineTo":"moveTo"](w.x,w.y);a&&K.closePath()}this._fillStroke(K,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var a=s._point,h=this._ctx,f=Math.max(Math.round(s._radius),1),_=(Math.max(Math.round(s._radiusY),1)||f)/f;_!==1&&(h.save(),h.scale(1,_)),h.beginPath(),h.arc(a.x,a.y/_,f,0,Math.PI*2,!1),_!==1&&h.restore(),this._fillStroke(h,s)}},_fillStroke:function(s,a){var h=a.options;h.fill&&(s.globalAlpha=h.fillOpacity,s.fillStyle=h.fillColor||h.color,s.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(s.setLineDash&&s.setLineDash(a.options&&a.options._dashArray||[]),s.globalAlpha=h.opacity,s.lineWidth=h.weight,s.strokeStyle=h.color,s.lineCap=h.lineCap,s.lineJoin=h.lineJoin,s.stroke())},_onClick:function(s){for(var a=this._map.mouseEventToLayerPoint(s),h,f,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(a)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(f=h);this._fireEvent(f?[f]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,a)}},_handleMouseOut:function(s){var a=this._hoveredLayer;a&&(Tt(this._container,"leaflet-interactive"),this._fireEvent([a],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,a){if(!this._mouseHoverThrottled){for(var h,f,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(a)&&(f=h);f!==this._hoveredLayer&&(this._handleMouseOut(s),f&&(je(this._container,"leaflet-interactive"),this._fireEvent([f],s,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,a,h){this._map._fireDOMEvent(a,h||a.type,s)},_bringToFront:function(s){var a=s._order;if(a){var h=a.next,f=a.prev;if(h)h.prev=f;else return;f?f.next=h:h&&(this._drawFirst=h),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(s)}},_bringToBack:function(s){var a=s._order;if(a){var h=a.next,f=a.prev;if(f)f.next=h;else return;h?h.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(s)}}});function W_(s){return le.canvas?new $_(s):null}var Rl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),XI={_initContainer:function(){this._container=Qe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Pi.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var a=s._container=Rl("shape");je(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",s._path=Rl("path"),a.appendChild(s._path),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){var a=s._container;this._container.appendChild(a),s.options.interactive&&s.addInteractiveTarget(a)},_removePath:function(s){var a=s._container;dt(a),s.removeInteractiveTarget(a),delete this._layers[d(s)]},_updateStyle:function(s){var a=s._stroke,h=s._fill,f=s.options,_=s._container;_.stroked=!!f.stroke,_.filled=!!f.fill,f.stroke?(a||(a=s._stroke=Rl("stroke")),_.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=b(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(_.removeChild(a),s._stroke=null),f.fill?(h||(h=s._fill=Rl("fill")),_.appendChild(h),h.color=f.fillColor||f.color,h.opacity=f.fillOpacity):h&&(_.removeChild(h),s._fill=null)},_updateCircle:function(s){var a=s._point.round(),h=Math.round(s._radius),f=Math.round(s._radiusY||h);this._setPath(s,s._empty()?"M0 0":"AL "+a.x+","+a.y+" "+h+","+f+" 0,"+65535*360)},_setPath:function(s,a){s._path.v=a},_bringToFront:function(s){vi(s._container)},_bringToBack:function(s){ss(s._container)}},Oc=le.vml?Rl:Rn,kl=Pi.extend({_initContainer:function(){this._container=Oc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Oc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){dt(this._container),ut(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Pi.prototype._update.call(this);var s=this._bounds,a=s.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,h.setAttribute("width",a.x),h.setAttribute("height",a.y)),Me(h,s.min),h.setAttribute("viewBox",[s.min.x,s.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(s){var a=s._path=Oc("path");s.options.className&&je(a,s.options.className),s.options.interactive&&je(a,"leaflet-interactive"),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){dt(s._path),s.removeInteractiveTarget(s._path),delete this._layers[d(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var a=s._path,h=s.options;a&&(h.stroke?(a.setAttribute("stroke",h.color),a.setAttribute("stroke-opacity",h.opacity),a.setAttribute("stroke-width",h.weight),a.setAttribute("stroke-linecap",h.lineCap),a.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?a.setAttribute("stroke-dasharray",h.dashArray):a.removeAttribute("stroke-dasharray"),h.dashOffset?a.setAttribute("stroke-dashoffset",h.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),h.fill?(a.setAttribute("fill",h.fillColor||h.color),a.setAttribute("fill-opacity",h.fillOpacity),a.setAttribute("fill-rule",h.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(s,a){this._setPath(s,Ji(s._parts,a))},_updateCircle:function(s){var a=s._point,h=Math.max(Math.round(s._radius),1),f=Math.max(Math.round(s._radiusY),1)||h,_="a"+h+","+f+" 0 1,0 ",w=s._empty()?"M0 0":"M"+(a.x-h)+","+a.y+_+h*2+",0 "+_+-h*2+",0 ";this._setPath(s,w)},_setPath:function(s,a){s._path.setAttribute("d",a)},_bringToFront:function(s){vi(s._path)},_bringToBack:function(s){ss(s._path)}});le.vml&&kl.include(XI);function Z_(s){return le.svg||le.vml?new kl(s):null}Ke.include({getRenderer:function(s){var a=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var a=this._paneRenderers[s];return a===void 0&&(a=this._createRenderer({pane:s}),this._paneRenderers[s]=a),a},_createRenderer:function(s){return this.options.preferCanvas&&W_(s)||Z_(s)}});var K_=Xo.extend({initialize:function(s,a){Xo.prototype.initialize.call(this,this._boundsToLatLngs(s),a)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=ze(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function JI(s,a){return new K_(s,a)}kl.create=Oc,kl.pointsToPath=Ji,Si.geometryToLayer=Rc,Si.coordsToLatLng=cf,Si.coordsToLatLngs=kc,Si.latLngToCoords=hf,Si.latLngsToCoords=Lc,Si.getFeature=Jo,Si.asFeature=bc,Ke.mergeOptions({boxZoom:!0});var G_=er.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){ke(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ut(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){dt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),br(),fl(),this._startPoint=this._map.mouseEventToContainerPoint(s),ke(document,{contextmenu:Jn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Qe("div","leaflet-zoom-box",this._container),je(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var a=new Ee(this._point,this._startPoint),h=a.getSize();Me(this._box,a.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(dt(this._box),Tt(this._container,"leaflet-crosshair")),Nr(),pl(),ut(document,{contextmenu:Jn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new Ve(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ke.addInitHook("addHandler","boxZoom",G_),Ke.mergeOptions({doubleClickZoom:!0});var Q_=er.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var a=this._map,h=a.getZoom(),f=a.options.zoomDelta,_=s.originalEvent.shiftKey?h-f:h+f;a.options.doubleClickZoom==="center"?a.setZoom(_):a.setZoomAround(s.containerPoint,_)}});Ke.addInitHook("addHandler","doubleClickZoom",Q_),Ke.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Y_=er.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Dr(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}je(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Tt(this._map._container,"leaflet-grab"),Tt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=ze(this._map.options.maxBounds);this._offsetLimit=Re(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var a=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(a),this._prunePositions(a)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,a){return s-(s-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;s.x<a.min.x&&(s.x=this._viscousLimit(s.x,a.min.x)),s.y<a.min.y&&(s.y=this._viscousLimit(s.y,a.min.y)),s.x>a.max.x&&(s.x=this._viscousLimit(s.x,a.max.x)),s.y>a.max.y&&(s.y=this._viscousLimit(s.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,a=Math.round(s/2),h=this._initialWorldOffset,f=this._draggable._newPos.x,_=(f-a+h)%s+a-h,w=(f+a+h)%s-a-h,O=Math.abs(_+h)<Math.abs(w+h)?_:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=O},_onDragEnd:function(s){var a=this._map,h=a.options,f=!h.inertia||s.noInertia||this._times.length<2;if(a.fire("dragend",s),f)a.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,O=h.easeLinearity,H=_.multiplyBy(O/w),K=H.distanceTo([0,0]),ne=Math.min(h.inertiaMaxSpeed,K),fe=H.multiplyBy(ne/K),Le=ne/(h.inertiaDeceleration*O),Ze=fe.multiplyBy(-Le/2).round();!Ze.x&&!Ze.y?a.fire("moveend"):(Ze=a._limitOffset(Ze,a.options.maxBounds),D(function(){a.panBy(Ze,{duration:Le,easeLinearity:O,noMoveStart:!0,animate:!0})}))}}});Ke.addInitHook("addHandler","dragging",Y_),Ke.mergeOptions({keyboard:!0,keyboardPanDelta:80});var X_=er.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),ke(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ut(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,a=document.documentElement,h=s.scrollTop||a.scrollTop,f=s.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var a=this._panKeys={},h=this.keyCodes,f,_;for(f=0,_=h.left.length;f<_;f++)a[h.left[f]]=[-1*s,0];for(f=0,_=h.right.length;f<_;f++)a[h.right[f]]=[s,0];for(f=0,_=h.down.length;f<_;f++)a[h.down[f]]=[0,s];for(f=0,_=h.up.length;f<_;f++)a[h.up[f]]=[0,-1*s]},_setZoomDelta:function(s){var a=this._zoomKeys={},h=this.keyCodes,f,_;for(f=0,_=h.zoomIn.length;f<_;f++)a[h.zoomIn[f]]=s;for(f=0,_=h.zoomOut.length;f<_;f++)a[h.zoomOut[f]]=-s},_addHooks:function(){ke(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ut(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var a=s.keyCode,h=this._map,f;if(a in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(f=this._panKeys[a],s.shiftKey&&(f=re(f).multiplyBy(3)),h.options.maxBounds&&(f=h._limitOffset(re(f),h.options.maxBounds)),h.options.worldCopyJump){var _=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(f)));h.panTo(_)}else h.panBy(f)}else if(a in this._zoomKeys)h.setZoom(h.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;Jn(s)}}});Ke.addInitHook("addHandler","keyboard",X_),Ke.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var J_=er.extend({addHooks:function(){ke(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ut(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var a=wc(s),h=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var f=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),Jn(s)},_performZoom:function(){var s=this._map,a=s.getZoom(),h=this._map.options.zoomSnap||0;s._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,w=h?Math.ceil(_/h)*h:_,O=s._limitZoom(a+(this._delta>0?w:-w))-a;this._delta=0,this._startTime=null,O&&(s.options.scrollWheelZoom==="center"?s.setZoom(a+O):s.setZoomAround(this._lastMousePos,a+O))}});Ke.addInitHook("addHandler","scrollWheelZoom",J_);var eS=600;Ke.mergeOptions({tapHold:le.touchNative&&le.safari&&le.mobile,tapTolerance:15});var ev=er.extend({addHooks:function(){ke(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ut(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var a=s.touches[0];this._startPos=this._newPos=new Y(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(ke(document,"touchend",At),ke(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),eS),ke(document,"touchend touchcancel contextmenu",this._cancel,this),ke(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){ut(document,"touchend",At),ut(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),ut(document,"touchend touchcancel contextmenu",this._cancel,this),ut(document,"touchmove",this._onMove,this)},_onMove:function(s){var a=s.touches[0];this._newPos=new Y(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,a){var h=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});h._simulated=!0,a.target.dispatchEvent(h)}});Ke.addInitHook("addHandler","tapHold",ev),Ke.mergeOptions({touchZoom:le.touch,bounceAtZoomLimits:!0});var tv=er.extend({addHooks:function(){je(this._map._container,"leaflet-touch-zoom"),ke(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Tt(this._map._container,"leaflet-touch-zoom"),ut(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var a=this._map;if(!(!s.touches||s.touches.length!==2||a._animatingZoom||this._zooming)){var h=a.mouseEventToContainerPoint(s.touches[0]),f=a.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(h.add(f)._divideBy(2))),this._startDist=h.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),ke(document,"touchmove",this._onTouchMove,this),ke(document,"touchend touchcancel",this._onTouchEnd,this),At(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var a=this._map,h=a.mouseEventToContainerPoint(s.touches[0]),f=a.mouseEventToContainerPoint(s.touches[1]),_=h.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(_,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&_<1||this._zoom>a.getMaxZoom()&&_>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var w=h._add(f)._divideBy(2)._subtract(this._centerPoint);if(_===1&&w.x===0&&w.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),N(this._animRequest);var O=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(O,this,!0),At(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,N(this._animRequest),ut(document,"touchmove",this._onTouchMove,this),ut(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ke.addInitHook("addHandler","touchZoom",tv),Ke.BoxZoom=G_,Ke.DoubleClickZoom=Q_,Ke.Drag=Y_,Ke.Keyboard=X_,Ke.ScrollWheelZoom=J_,Ke.TapHold=ev,Ke.TouchZoom=tv,n.Bounds=Ee,n.Browser=le,n.CRS=pt,n.Canvas=$_,n.Circle=uf,n.CircleMarker=Cc,n.Class=Ie,n.Control=zn,n.DivIcon=j_,n.DivOverlay=ei,n.DomEvent=Ec,n.DomUtil=vc,n.Draggable=Dr,n.Evented=Ae,n.FeatureGroup=Ot,n.GeoJSON=Si,n.GridLayer=Cl,n.Handler=er,n.Icon=Jr,n.ImageOverlay=Nc,n.LatLng=be,n.LatLngBounds=Ve,n.Layer=ct,n.LayerGroup=xt,n.LineUtil=I,n.Map=Ke,n.Marker=xc,n.Mixin=io,n.Path=hs,n.Point=Y,n.PolyUtil=Go,n.Polygon=Xo,n.Polyline=Ii,n.Popup=Dc,n.PosAnimation=El,n.Projection=ce,n.Rectangle=K_,n.Renderer=Pi,n.SVG=kl,n.SVGOverlay=B_,n.TileLayer=ea,n.Tooltip=Mc,n.Transformation=_t,n.Util=x,n.VideoOverlay=z_,n.bind=l,n.bounds=Re,n.canvas=W_,n.circle=zI,n.circleMarker=UI,n.control=Ln,n.divIcon=GI,n.extend=i,n.featureGroup=Yo,n.geoJSON=U_,n.geoJson=qI,n.gridLayer=QI,n.icon=VI,n.imageOverlay=HI,n.latLng=Se,n.latLngBounds=ze,n.layerGroup=cs,n.map=qo,n.marker=FI,n.point=re,n.polygon=jI,n.polyline=BI,n.popup=ZI,n.rectangle=JI,n.setOptions=V,n.stamp=d,n.svg=Z_,n.svgOverlay=WI,n.tileLayer=q_,n.tooltip=KI,n.transformation=an,n.version=r,n.videoOverlay=$I;var tS=window.L;n.noConflict=function(){return window.L=tS,this},window.L=n})})(xm,xm.exports);var bI=xm.exports;function FO(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function UO(t,e){return e==null?function(r,i){const o=Q.useRef();return o.current||(o.current=t(r,i)),o}:function(r,i){const o=Q.useRef();o.current||(o.current=t(r,i));const l=Q.useRef(r),{instance:c}=o.current;return Q.useEffect(function(){l.current!==r&&(e(c,r,l.current),l.current=r)},[c,r,i]),o}}function zO(t,e){Q.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function BO(t){return function(n){const r=MO(),i=t(LI(n,r),r);return LO(r.map,n.attribution),VO(i.current,n.eventHandlers),zO(i.current,r),i}}function jO(t,e){const n=UO(t,e),r=BO(n);return OO(r)}function qO(t,e,n){const{opacity:r,zIndex:i}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),i!=null&&i!==n.zIndex&&t.setZIndex(i)}function Cm(){return Cm=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cm.apply(this,arguments)}function HO({bounds:t,boundsOptions:e,center:n,children:r,className:i,id:o,placeholder:l,style:c,whenReady:d,zoom:p,...g},y){const[E]=Q.useState({className:i,id:o,style:c}),[k,F]=Q.useState(null);Q.useImperativeHandle(y,()=>(k==null?void 0:k.map)??null,[k]);const V=Q.useCallback(C=>{if(C!==null&&k===null){const S=new bI.Map(C,g);n!=null&&p!=null?S.setView(n,p):t!=null&&S.fitBounds(t,e),d!=null&&S.whenReady(d),F(NO(S))}},[]);Q.useEffect(()=>()=>{k==null||k.map.remove()},[k]);const B=k?Tn.createElement(DO,{value:k},r):l??null;return Tn.createElement("div",Cm({},E,{ref:V}),B)}const $O=Q.forwardRef(HO),WO=jO(function({url:e,...n},r){const i=new bI.TileLayer(e,LI(n,r));return FO(i,r)},function(e,n,r){qO(e,n,r);const{url:i}=n;i!=null&&i!==r.url&&e.setUrl(i)}),NI=({name:t})=>{const[e,n]=Q.useState(),[r,i]=Q.useState(),o=i_(Xu,"cities",t);return Q.useEffect(()=>{(async()=>{try{const d=(await S2(o)).data();n(d.latitude),i(d.longitude)}catch(c){console.log(c)}})()}),!e||!r?M.jsx(M.Fragment,{}):M.jsx($O,{center:[e,r],zoom:13,scrollWheelZoom:!1,children:M.jsx(WO,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})})};NI.propTypes={name:$t.string};const ru=({rating:t})=>M.jsx("div",{children:M.jsxs("div",{className:"rating circle",children:[M.jsx("div",{className:t>=1?"filled":""}),M.jsx("div",{className:t>=2?"filled":""}),M.jsx("div",{className:t>=3?"filled":""}),M.jsx("div",{className:t>=4?"filled":""}),M.jsx("div",{className:t>=5?"filled":""})]})});ru.propTypes={rating:$t.number};const DI=({money:t,safety:e,activities:n,food:r,comment:i,username:o})=>M.jsxs("div",{className:"review",children:[M.jsx("h5",{children:"money"}),M.jsx(ru,{rating:t}),M.jsx("h5",{children:"safety"}),M.jsx(ru,{rating:e}),M.jsx("h5",{children:"activities"}),M.jsx(ru,{rating:n}),M.jsx("h5",{children:"food"}),M.jsx(ru,{rating:r}),M.jsxs("div",{className:"comment",children:[M.jsx("h5",{children:"@"+o}),M.jsx("p",{children:i})]})]});DI.propTypes={money:$t.number,safety:$t.number,activities:$t.number,food:$t.number,comment:$t.string,username:$t.string};const ZO="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='40px'%20viewBox='0%20-960%20960%20960'%20width='40px'%20fill='%23000000'%3e%3cpath%20d='M190.26-256.11v65.85-579.48%20513.63ZM202.57-140q-25.71%200-44.14-18.43T140-202.57v-554.86q0-25.71%2018.43-44.14T202.57-820h554.86q25.71%200%2044.14%2018.43T820-757.43v125.35h-50.26v-125.35q0-5.39-3.46-8.85t-8.85-3.46H202.57q-5.39%200-8.85%203.46t-3.46%208.85v554.86q0%205.39%203.46%208.85t8.85%203.46h554.86q5.39%200%208.85-3.46t3.46-8.85v-124.94H820v124.94q0%2025.71-18.43%2044.14T757.43-140H202.57Zm338.37-166.36q-28.49%200-48.9-20.2-20.4-20.2-20.4-48.72v-209.03q0-28.52%2020.4-48.72%2020.41-20.2%2048.9-20.2h250.55q28.8%200%2049.19%2020.2%2020.4%2020.2%2020.4%2048.72v209.03q0%2028.52-20.4%2048.72-20.39%2020.2-49.19%2020.2H540.94Zm257.57-50.26q5.13%200%208.72-3.46%203.59-3.46%203.59-8.84v-221.75q0-5.12-3.59-8.71-3.59-3.59-8.72-3.59h-264.3q-5.13%200-8.72%203.59-3.59%203.59-3.59%208.71v221.75q0%205.38%203.59%208.84t8.72%203.46h264.3Zm-152.4-61.48q25.66%200%2043.7-18.18%2018.04-18.17%2018.04-44.13%200-25.83-18.28-43.66t-43.62-17.83q-25.67%200-43.91%2017.83-18.25%2017.83-18.25%2043.66%200%2025.96%2018.18%2044.13%2018.17%2018.18%2044.14%2018.18Z'/%3e%3c/svg%3e",KO="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='40px'%20viewBox='0%20-960%20960%20960'%20width='40px'%20fill='%23000000'%3e%3cpath%20d='M444.62-364.62h70.76v-100h100v-70.76h-100v-100h-70.76v100h-100v70.76h100v100ZM480-101.39q-130.38-35.77-215.19-155.19Q180-376%20180-521.08v-225.69l300-112.31%20300%20112.31v225.69q0%20145.08-84.81%20264.5Q610.38-137.16%20480-101.39Zm0-47.38Q591.92-185.23%20663.27-289q71.34-103.77%2071.34-232.08v-194.07L480-810.85l-254.61%2095.7v194.07q0%20128.31%2071.34%20232.08Q368.08-185.23%20480-148.77Zm0-330.85Z'/%3e%3c/svg%3e",GO="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='40px'%20viewBox='0%20-960%20960%20960'%20width='40px'%20fill='%23000000'%3e%3cpath%20d='m253.69-94.62%2048.93-110.53q-17.77-12.39-32.43-24.66-14.65-12.27-29.42-27.81-7.23%204-15.96%205.81-8.73%201.81-15.96%201.81-30.08%200-51.23-21.15-21.16-21.16-21.16-51.24%200-18.07%208.54-34.23%208.54-16.15%2021.77-24.53-7-24.23-11.19-48.85-4.19-24.62-4.19-50.62%200-26.61%203.88-50.92%203.88-24.31%2011.5-48.92-13.23-9.62-21.77-24.96-8.54-15.35-8.54-33.81%200-29.69%2021.16-51.04%2021.15-21.34%2051.23-21.34%207.23%200%2015.65%202t15.65%205.61q34.24-36%2075.54-60.38%2041.31-24.39%2091.93-36.23%204.23-29.31%2024.76-47.04%2020.54-17.73%2047.62-17.73%2026.69%200%2047.73%2017.65%2021.04%2017.65%2024.65%2046.35%2051%2011.84%2094.85%2034.5%2043.85%2022.65%2077.85%2060.27%206.23-2.39%2012.84-3.5%206.62-1.12%2013.23-1.12%2030.08%200%2051.23%2021.15%2021.16%2021.16%2021.16%2051.23%200%2019.7-8.73%2034.93t-21.96%2023.84q8%2024.85%2011.69%2048.85%203.69%2024%203.69%2050.61%200%2026-3.69%2050.5t-11.69%2048.74q15.07%2010.23%2022.5%2026.69%207.42%2016.46%207.42%2032.3%200%2030.08-21.16%2051.24Q780.46-250%20750.38-250q-7.23%200-15.57-1.81-8.35-1.81-14.96-5.04-14.16%2015.54-28.93%2028.12-14.77%2012.58-32.31%2023.96l47.54%20110.15h-44.69l-40.08-88.53q-17.76%207.15-34.3%2012.73-16.54%205.57-34.7%2010.57-4.23%2029.93-24.96%2046.77Q506.69-96.23%20480-96.23q-27.08%200-47.62-17.23-20.53-17.23-24.76-47.16-18.54-5-35.2-10.57-16.65-5.58-32.19-13.73l-42.46%2090.3h-44.08ZM320-246.54%20397.15-415q-12.46-13.69-18.3-29.89Q373-461.08%20373-480q0-43.85%2032.69-75.42Q438.39-587%20482.23-587q43.85%200%2074.12%2031.58%2030.26%2031.57%2030.26%2075.42%200%2018.92-5.73%2035.11-5.73%2016.2-18.42%2030.27l76.77%20168.85q12.92-8.38%2025.39-19.04%2012.46-10.65%2023.61-22.81-4.31-7.15-7.27-16-2.96-8.84-2.96-18.77%200-28.15%2020.69-49.57%2020.69-21.43%2051.54-22.04%207-20%2010.69-41.81%203.7-21.81%203.7-44.81%200-24-3.7-45.3-3.69-21.31-9.69-41.31-29.61%201-51.04-20.42-21.42-21.43-21.42-51.2%200-10.15%202.85-18.69%202.84-8.54%207.38-16.92-30.85-31.39-66.62-51.77-35.76-20.39-79.38-32-7.23%2015.31-23.92%2026.46-16.7%2011.16-39.08%2011.16t-38.96-11.16q-16.58-11.15-24.04-26.46-44%2011.61-80.5%2031.81-36.5%2020.19-65.5%2053.19%205.54%208.38%207.88%2016.61%202.35%208.24%202.35%2017.39%200%2032.77-22.81%2052.5-22.8%2019.73-49.8%2019.5-6.62%2019.61-10.12%2041.11-3.5%2021.5-3.5%2045.5%200%2023%203.5%2044.81Q202-414%20208.62-394q30.07.61%2051.34%2021.65%2021.27%2021.04%2021.27%2049.96%200%2010.54-2.65%2018.89-2.66%208.35-6.96%2014.5%2011.15%2012.15%2023%2022.42%2011.84%2010.27%2025.38%2020.04Zm35%2021.23q13.54%206.16%2029%2012.04%2015.46%205.89%2033%209.89%209.08-15.93%2024.85-26.77Q457.62-241%20480-241t39.08%2010.85q16.69%2010.84%2023.92%2026.77%2017.38-4%2032.23-9.2%2014.85-5.19%2027.39-11.34l-71.54-164.47q-11.62%207.62-24.85%2011.5Q493-373%20479-373q-13.62%200-27.23-4.19-13.62-4.2-25.23-12.58L355-225.31Zm125-193.07q25.23%200%2043.23-17.81%2018-17.81%2018-43.81%200-25.62-18-43.62-18-18-43.23-18-26%200-43.81%2018-17.81%2018-17.81%2043.62%200%2026%2017.81%2043.81Q454-418.38%20480-418.38Zm0-61.62Z'/%3e%3c/svg%3e",QO="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='40px'%20viewBox='0%20-960%20960%20960'%20width='40px'%20fill='%23000000'%3e%3cpath%20d='M157.69-140q-23.59%200-40.64-17.05T100-197.69v-121.08h760v121.08q0%2023.59-17.05%2040.64T802.31-140H157.69Zm-12.3-133.39v75.7q0%205.38%203.46%208.84t8.84%203.46h644.62q5.38%200%208.84-3.46t3.46-8.84v-75.7H145.39ZM480-442.16q-39.08%200-58.19%2021.43-19.12%2021.42-68.89%2021.42-49.77%200-67.46-21.42-17.69-21.43-56.77-21.43-39.07%200-58.85%2021.43-19.78%2021.42-69.84%2021.42v-45.38q33.39%200%2055.96-21.43%2022.58-21.42%2072.54-21.42%2049.96%200%2067.65%2021.42%2017.7%2021.43%2056.77%2021.43%2039.08%200%2058.2-21.43%2019.11-21.42%2068.88-21.42%2049.77%200%2068.88%2021.42%2019.12%2021.43%2058.2%2021.43%2039.07%200%2056.38-21.43%2017.31-21.42%2067.27-21.42%2049.96%200%2072.77%2021.42%2022.82%2021.43%2056.5%2021.43v45.38q-49.77%200-69.5-21.42-19.73-21.43-58.81-21.43t-56.96%2021.43q-17.88%2021.42-67.65%2021.42-49.77%200-68.89-21.42-19.11-21.43-58.19-21.43ZM100-566.08v-32.3q0-100.16%2093.46-160.89Q286.92-820%20480-820q193.08%200%20286.54%2060.73Q860-698.54%20860-598.38v32.3H100Zm380-208.53q-157.62%200-246.73%2045.92-89.12%2045.92-87.04%20117.23h667.54q.46-71.31-87.85-117.23-88.3-45.92-245.92-45.92Zm0%20501.22Zm0-338.07Z'/%3e%3c/svg%3e",MI=({money:t,safety:e,activities:n,food:r})=>M.jsxs("div",{className:"summary",children:[M.jsxs("div",{children:[M.jsx("h4",{children:"money"}),M.jsx("p",{children:t.toFixed(1)}),M.jsx("img",{src:ZO,alt:""})]}),M.jsxs("div",{children:[M.jsx("h4",{children:"safety"}),M.jsx("p",{children:e.toFixed(1)}),M.jsx("img",{src:KO,alt:""})]}),M.jsxs("div",{children:[M.jsx("h4",{children:"activities"}),M.jsx("p",{children:n.toFixed(1)}),M.jsx("img",{src:GO,alt:""})]}),M.jsxs("div",{children:[M.jsx("h4",{children:"food"}),M.jsx("p",{children:r.toFixed(1)}),M.jsx("img",{src:QO,alt:""})]})]});MI.propTypes={money:$t.number,safety:$t.number,activities:$t.number,food:$t.number};function OI({dialog:t,cityName:e,setNumReviews:n,numReviews:r,user:i,setErrors:o}){const l=r_(Xu,"cities",e,"reviews"),{register:c,handleSubmit:d,formState:{errors:p}}=M_();o(p);const g=async y=>{console.log(y),t.current&&(t.current.querySelector("textarea").style.border="none",t.current.querySelector("p.error").innerHTML="",await iN(l,{money:Number(y.money),safety:Number(y.safety),activities:Number(y.activities),food:Number(y.food),review:y.comment,posted:Kt.fromDate(new Date),username:i.displayName}),t.current.close(),t.current.querySelector("form").reset(),n(r+1))};return M.jsxs("form",{id:"add-review",onSubmit:d(g),children:[M.jsxs("div",{className:"experience",children:[M.jsx("p",{children:"rate your experience"}),M.jsx("h3",{className:"money",children:"money"}),M.jsxs("div",{className:"money select",children:[M.jsxs("label",{className:"form-control",children:[M.jsx("div",{children:"1"})," ",M.jsx("input",{type:"radio",className:"red",value:"1",...c("money",{required:{value:!0,message:"you must pick a value"}})})]}),M.jsxs("label",{className:"form-control",children:[M.jsx("div",{children:"2"})," ",M.jsx("input",{type:"radio",className:"orange",value:"2",...c("money")})]}),M.jsxs("label",{className:"form-control",children:[M.jsx("div",{children:"3"})," ",M.jsx("input",{type:"radio",name:"money",className:"yellow",value:"3",...c("money")})]}),M.jsxs("label",{className:"form-control",children:[M.jsx("div",{children:"4"})," ",M.jsx("input",{type:"radio",name:"money",className:"green",value:"4",...c("money")})]}),M.jsxs("label",{className:"form-control",children:[M.jsx("div",{children:"5"})," ",M.jsx("input",{type:"radio",name:"money",className:"greener",value:"5",...c("money")})]})]}),M.jsx("h3",{className:"safety",children:"safety"}),M.jsxs("div",{className:"safety select",children:[M.jsxs("label",{className:"form-control",children:[M.jsx("div",{children:"1"})," ",M.jsx("input",{type:"radio",className:"red",value:"1",...c("safety",{required:{value:!0,message:"you must pick a value"}})})]}),M.jsxs("label",{className:"form-control",children:[M.jsx("div",{children:"2"})," ",M.jsx("input",{type:"radio",className:"orange",value:"2",...c("safety")})]}),M.jsxs("label",{className:"form-control",children:[M.jsx("div",{children:"3"})," ",M.jsx("input",{type:"radio",className:"yellow",value:"3",...c("safety")})]}),M.jsxs("label",{className:"form-control",children:[M.jsx("div",{children:"4"})," ",M.jsx("input",{type:"radio",className:"green",value:"4",...c("safety")})]}),M.jsxs("label",{className:"form-control",children:[M.jsx("div",{children:"5"})," ",M.jsx("input",{type:"radio",className:"greener",value:"5",...c("safety")})]})]}),M.jsx("h3",{className:"activities",children:"activities"}),M.jsxs("div",{className:"activities select",children:[M.jsxs("label",{className:"form-control",children:[M.jsx("div",{children:"1"})," ",M.jsx("input",{type:"radio",className:"red",value:"1",...c("activities",{required:{value:!0,message:"you must pick a value"}})})]}),M.jsxs("label",{className:"form-control",children:[M.jsx("div",{children:"2"})," ",M.jsx("input",{type:"radio",className:"orange",value:"2",...c("activities")})]}),M.jsxs("label",{className:"form-control",children:[M.jsx("div",{children:"3"})," ",M.jsx("input",{type:"radio",className:"yellow",value:"3",...c("activities")})]}),M.jsxs("label",{className:"form-control",children:[M.jsx("div",{children:"4"})," ",M.jsx("input",{type:"radio",className:"green",value:"4",...c("activities")})]}),M.jsxs("label",{className:"form-control",children:[M.jsx("div",{children:"5"})," ",M.jsx("input",{type:"radio",className:"greener",value:"5",...c("activities")})]})]}),M.jsx("h3",{className:"food",children:"food"}),M.jsxs("div",{className:"food select",children:[M.jsxs("label",{className:"form-control",children:[M.jsx("div",{children:"1"})," ",M.jsx("input",{type:"radio",className:"red",value:"1",...c("food",{required:{value:!0,message:"you must pick a value"}})})]}),M.jsxs("label",{className:"form-control",children:[M.jsx("div",{children:"2"})," ",M.jsx("input",{type:"radio",className:"orange",value:"2",...c("food")})]}),M.jsxs("label",{className:"form-control",children:[M.jsx("div",{children:"3"})," ",M.jsx("input",{type:"radio",className:"yellow",value:"3",...c("food")})]}),M.jsxs("label",{className:"form-control",children:[M.jsx("div",{children:"4"})," ",M.jsx("input",{type:"radio",className:"green",value:"4",...c("food")})]}),M.jsxs("label",{className:"form-control",children:[M.jsx("div",{children:"5"})," ",M.jsx("input",{type:"radio",className:"greener",value:"5",...c("food")})]})]})]}),M.jsxs("div",{className:"comment",children:[M.jsx("p",{children:"comment about the city"}),M.jsx("textarea",{type:"text",name:"comment",placeholder:"type your review here",...c("comment",{required:{value:!0,message:"you must type out a review"}})})]})]})}OI.propTypes={dialog:$t.object,cityName:$t.string,setNumReviews:$t.func,numReviews:$t.number,user:$t.object,setErrors:$t.func};const YO=()=>{const t=Q.useRef(null),e=Q.useRef(null),[n,r]=Q.useState(""),[i,o]=Q.useState({}),{name:l}=Nx(),c=Q.useRef([]),d=Q.useRef({}),p=i_(Xu,"cities",l),g=Xb(r_(Xu,"cities",l,"reviews"),Jb("posted")),[y,E]=Q.useState(""),[k,F]=Q.useState(0),[V,B]=Q.useState(0),[C,S]=Q.useState(0),[b,Z]=Q.useState(0),[J,z]=Q.useState(0),[P,T]=Q.useState(null);Q.useEffect(()=>{const R=async()=>{try{const x=(await A2(g)).docs.map(Y=>({...Y.data(),id:Y.id}));x.reverse(),c.current=x;let Ie=0,Je=0,We=0,Ae=0;x.forEach(Y=>{Ie+=Number(Y.money),Je+=Number(Y.safety),We+=Number(Y.activities),Ae+=Number(Y.food)}),F(x.length>0?Ie/x.length:0),B(x.length>0>0?Je/x.length:0),S(x.length>0?We/x.length:0),Z(x.length>0?Ae/x.length:0),E(x.length>0?((Ie+Je+We+Ae)/(x.length*4)).toFixed(1):"0.0"),z(x.length)}catch(N){console.log(N)}},D=async()=>{try{const x=(await S2(p)).data();d.current=x}catch(N){console.log(N)}};R(),D()},[p,g,k,V,C,b,y,J]);function A(){t.current&&(t.current.hasAttribute("open")?(t.current.close(),t.current.querySelector("form").reset()):t.current.showModal())}return M.jsxs(M.Fragment,{children:[M.jsx(O_,{user:P,setUser:T,setUserAction:r,userAction:n,ref:e}),M.jsx(NI,{name:l}),M.jsx("section",{id:"overview",children:M.jsxs("div",{children:[M.jsxs("div",{className:"top",children:[M.jsxs("div",{className:"name",children:[M.jsx("h1",{children:l}),M.jsx("button",{onClick:P?A:()=>{r("sign up"),e.current.showModal()},children:"review"})]}),M.jsxs("div",{className:"review",children:[M.jsx("h1",{id:"rating",children:y}),M.jsx("p",{id:"review-count",children:"("+c.current.length+" "+(c.current.length===1?"review)":"reviews)")})]})]}),M.jsx(MI,{money:k,safety:V,activities:C,food:b})]})}),M.jsxs("section",{id:"reviews",children:[M.jsx("h1",{children:"latest reviews"}),c.current.length===0?M.jsx("div",{className:"no-reviews",children:M.jsx("h2",{children:"no reviews yet!"})}):M.jsx("div",{className:"reviews",children:c.current.map((R,D)=>M.jsx(DI,{money:Number(R.money),safety:Number(R.safety),activities:Number(R.activities),food:Number(R.food),comment:R.review,username:R.username},D))})]}),M.jsxs("dialog",{ref:t,className:"add-review",children:[M.jsx("h1",{children:"Help us rate your experience"}),M.jsx("p",{className:"error"}),M.jsx(OI,{dialog:t,cityName:l,setNumReviews:z,numReviews:J,user:P,setErrors:o}),M.jsxs("div",{className:"buttons",children:[M.jsx("button",{form:"add-review",type:"submit",onClick:()=>{Object.keys(i).length!==0&&(t.current.querySelector("p.error").innerHTML="please fill in all fields!"),i.comment?i.comment.ref.style.border="1px solid red":t.current.querySelector("textarea").style.border="none"},children:"submit"}),M.jsx("button",{onClick:()=>{t.current.querySelector("p.error").innerHTML="",t.current.querySelector("textarea").style.border="none",A()},children:"cancel"})]})]})]})},XO=()=>{const t=Yx([{path:"/",element:M.jsx(kO,{})},{path:"search/:name",element:M.jsx(YO,{})}]);return M.jsx(oC,{router:t})};ip.createRoot(document.getElementById("root")).render(M.jsx(Tn.StrictMode,{children:M.jsx(XO,{})}));
